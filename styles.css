.mod-sidebar-layout .calloutmanager-setting-tab.vertical-tab-content {
  position: relative;
  padding: 0 !important;
  display: flex;
  flex-direction: column;
  overflow-y: initial;
}
.mod-sidebar-layout .calloutmanager-setting-tab.vertical-tab-content {
  --cm-setting-tab-controls-margin: calc(var(--size-4-12) - (var(--size-4-2) - var(--size-4-1)));
}
body.is-phone .mod-sidebar-layout .calloutmanager-setting-tab.vertical-tab-content {
  --cm-setting-tab-controls-margin: var(--size-4-2);
}

.calloutmanager-setting-tab-header {
  display: flex;
  align-items: center;
  padding-top: var(--size-4-1);
  padding-bottom: var(--size-4-1);
  padding-right: var(--size-4-2);
  border-bottom: 1px solid var(--background-modifier-border);
  background-color: var(--background-secondary);
}
body.is-phone .calloutmanager-setting-tab-header {
  background-color: var(--background-primary);
}

.calloutmanager-setting-tab-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: var(--size-4-12);
  min-height: calc(var(--size-4-2) + var(--input-height));
}
.calloutmanager-setting-tab-nav button {
  padding: var(--size-4-1) var(--size-4-2);
  box-shadow: none;
}
body.is-mobile .calloutmanager-setting-tab-nav {
  padding: var(--size-4-2);
}
body.is-phone .calloutmanager-setting-tab-nav, body.is-phone .calloutmanager-setting-tab-nav button {
  height: 100%;
  min-width: unset;
}

.calloutmanager-setting-tab-controls {
  flex: 3 3;
  display: flex;
  align-items: center;
  justify-content: end;
  gap: var(--size-4-2);
  padding-left: var(--cm-setting-tab-controls-margin);
}
.calloutmanager-setting-tab-controls > *:not(.modal-close-button) {
  display: contents;
}
.calloutmanager-setting-tab-controls > *:not(.modal-close-button) > input[type=text] {
  flex: 1 1 auto;
}

.calloutmanager-setting-tab-controls .modal-close-button {
  flex: 0 0 auto;
  position: static;
  left: unset;
  top: 0;
  right: 0;
  bottom: 0;
}
body.is-phone .calloutmanager-setting-tab-controls .modal-close-button {
  display: none;
}

.calloutmanager-setting-tab-title {
  flex: 1 1 auto;
  flex-wrap: nowrap;
}
.calloutmanager-setting-tab-title h2,
.calloutmanager-setting-tab-title h3 {
  margin: 0;
  word-break: keep-all;
}
.calloutmanager-setting-tab-title h3 {
  font-size: var(--font-ui-small);
}
body:not(.is-phone) .calloutmanager-setting-tab-title h3 {
  font-size: 0.8em;
}
body.is-phone .calloutmanager-setting-tab-title h2:has(+ h3) {
  display: none;
}

.calloutmanager-setting-tab-viewport {
  flex: 1 2 auto;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.calloutmanager-setting-tab-content {
  flex: 1 1 auto;
}
.calloutmanager-setting-tab-content body:not(.is-phone) {
  min-height: 100%;
}

.calloutmanager-callout-resolver {
  display: none !important;
}

.calloutmanager-search-error {
  width: 60%;
}
body.is-phone .calloutmanager-search-error {
  width: 100%;
}
.calloutmanager-search-error code {
  word-break: break-all;
  color: var(--text-accent);
}

.calloutmanager-search-error-suggestions {
  color: var(--text-muted);
}

.calloutmanager-preview-container-with-button {
  --calloutmanager-callout-edit-buttons-size: calc(var(--input-height) + 2 * var(--size-4-3));
  display: grid;
  grid-template-columns: 1fr var(--calloutmanager-callout-edit-buttons-size);
  align-items: center;
  gap: var(--size-4-2);
}
body.is-phone .calloutmanager-preview-container-with-button {
  --calloutmanager-callout-edit-buttons-size: var(--input-height);
}
.calloutmanager-preview-container-with-button > button {
  width: var(--calloutmanager-callout-edit-buttons-size);
  height: 100%;
}
body:not(.is-phone) .calloutmanager-preview-container-with-button > button {
  display: block;
  padding: 0 !important;
}

.callout.calloutmanager-preview {
  mix-blend-mode: unset !important;
  margin: 0 !important;
}

.calloutmanager-preview-container {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.calloutmanager-centerbox {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.calloutmanager-pane button[disabled] {
  box-shadow: none;
  background-color: var(--interactive-normal);
}
.calloutmanager-pane button[disabled]:hover {
  background-color: var(--interactive-normal);
  cursor: not-allowed;
}
.calloutmanager-pane input[type=color][disabled] {
  cursor: not-allowed;
}
.calloutmanager-pane input:invalid:not(:placeholder-shown) {
  border-color: var(--text-error);
}
body.is-phone .calloutmanager-pane input[type=color]::-webkit-color-swatch {
  border-radius: var(--button-radius);
  border: #f00 2px solid;
  border: 1px solid var(--checkbox-border-color);
}
.calloutmanager-pane .clickable-icon.mod-warning {
  color: var(--text-error);
  background: transparent;
}
.calloutmanager-pane .clickable-icon.mod-warning:hover {
  color: var(--text-error);
  background: transparent;
}

body.is-phone .calloutmanager-setting-tab-content .setting-item-control button.clickable-icon,
body.is-phone .calloutmanager-setting-tab-controls button.clickable-icon {
  width: var(--button-height);
}

body.is-phone .calloutmanager-setting-tab-content .setting-item-control button.clickable-icon {
  border: 1px solid var(--checkbox-border-color);
}
.calloutmanager-edit-callout-section {
  border-top: 1px solid var(--background-modifier-border);
  padding-top: var(--size-4-3);
  padding-bottom: var(--size-4-6);
}

.calloutmanager-edit-callout-section h2 {
  margin-bottom: 0.3em;
}
.calloutmanager-edit-callout-section h2 + p {
  margin-top: 0;
}

.calloutmanager-edit-callout-appearance .setting-item {
  border-top: none;
  padding-top: 0.375em;
}
.calloutmanager-edit-callout-appearance .setting-item:has(+ .setting-item) {
  padding-bottom: 0.375em;
}
body.is-phone .calloutmanager-edit-callout-appearance .setting-item:has(+ .setting-item) {
  margin-bottom: 0.7em;
}
.calloutmanager-edit-callout-appearance-json pre {
  border: rgba(var(--background-modifier-border)) 1px solid;
  border-radius: var(--callout-radius);
  padding: var(--size-4-2);
  background: var(--background-primary-alt);
  overflow-x: auto;
  margin: 0;
}

.calloutmanager-edit-callout-appearance-reset {
  width: 100%;
}

.calloutmanager-edit-callout-preview {
  padding-bottom: var(--size-4-8);
  min-height: 14em;
}
body.is-mobile .calloutmanager-edit-callout-preview {
  min-height: 35vh;
}

.calloutmanager-preview-editor {
  resize: vertical;
  width: 100%;
  min-height: 6em;
  margin-top: var(--size-4-3);
  background: transparent;
  font-size: var(--font-text-size);
  font-family: var(--font-text);
  line-height: var(--line-height-normal);
}

.calloutmanager-edit-callout-info {
  color: var(--text-muted);
}

.calloutmanager-edit-callout--invalid-color {
  color: var(--text-error);
}

.calloutmanager-edit-callout--callout-color {
  color: rgb(var(--resolved-callout-color));
}

.calloutmanager-edit-callout--callout-id,
.calloutmanager-edit-callout--callout-icon,
.calloutmanager-edit-callout--callout-source {
  color: var(--text-normal);
}

:root {
  --calloutmanager-reset-button-disabled-opacity: 0.3;
}

.calloutmanager-reset-button:is(.is-disabled, [disabled]) {
  opacity: var(--calloutmanager-reset-button-disabled-opacity);
}
.calloutmanager-reset-button:is(.is-disabled, [disabled]):hover {
  background-color: transparent;
}
.calloutmanager-reset-button:is(.is-disabled, [disabled]):active {
  color: var(--icon-color);
}

:root {
  --calloutmanager-icon-picker-size: 100px;
  --calloutmanager-icon-picker-gap: 8px;
  --calloutmanager-icon-picker-icon-size: 2.5em;
  --calloutmanager-icon-picker-id-size: 0.75em;
}

.calloutmanager-icon-picker {
  display: grid;
  grid-template-columns: repeat(auto-fill, var(--calloutmanager-icon-picker-size));
  grid-auto-rows: var(--calloutmanager-icon-picker-size);
  gap: var(--calloutmanager-icon-picker-gap);
  justify-content: center;
}
.calloutmanager-icon-picker .calloutmanager-icon-preview {
  height: 100%;
  --calloutmanager-icon-preview-icon-size: var(--calloutmanager-icon-picker-icon-size);
  --calloutmanager-icon-preview-id-size: var(--calloutmanager-icon-picker-id-size);
}

:root {
  --calloutmanager-icon-preview-icon-size: 1em;
  --calloutmanager-icon-preview-id-size: 0.8em;
}

.calloutmanager-icon-preview {
  position: relative;
  height: unset;
  min-height: 3em;
  display: flex;
  flex-direction: column;
}

.calloutmanager-icon-preview--icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, calc(-50% - 0.5em));
  --icon-size: var(--calloutmanager-icon-picker-icon-size);
}

.calloutmanager-icon-preview--id {
  width: 100%;
  margin-top: auto;
  white-space: normal;
  word-break: break-word;
  hyphens: manual;
  font-size: var(--calloutmanager-icon-picker-id-size);
}

/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX19maW5hbF9fLmNzcyIsInNvdXJjZXMiOlsic3JjL3VpL2NvbXBvbmVudC9pY29uLXByZXZpZXcudHMiLCJzcmMvcGFuZXMvc2VsZWN0LWljb24tcGFuZS50cyIsInNyYy91aS9jb21wb25lbnQvcmVzZXQtYnV0dG9uLnRzIiwic3JjL3BhbmVzL2VkaXQtY2FsbG91dC1wYW5lL3NlY3Rpb24taW5mby50cyIsInNyYy9wYW5lcy9lZGl0LWNhbGxvdXQtcGFuZS9zZWN0aW9uLXByZXZpZXcudHMiLCJzcmMvcGFuZXMvZWRpdC1jYWxsb3V0LXBhbmUvaW5kZXgudHMiLCJzcmMvdWkvcGFuZS50cyIsInNyYy91aS9jb21wb25lbnQvY2FsbG91dC1wcmV2aWV3LnRzIiwic3JjL3BhbmVzL21hbmFnZS1jYWxsb3V0cy1wYW5lLnRzIiwic3JjL2NhbGxvdXQtcmVzb2x2ZXIudHMiLCJzcmMvdWkvcGFuZWQtc2V0dGluZy10YWIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBnZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEEgcHJldmlldyBvZiBhbiBpY29uLlxyXG4gKlxyXG4gKiBUaGlzIGlzIGEgYnV0dG9uIHRoYXQgc2hvd3MgdGhlIGljb24gZ3JhcGhpYyBhbmQgaXRzIG5hbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSWNvblByZXZpZXdDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdHB1YmxpYyByZWFkb25seSBjb21wb25lbnRFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHVibGljIHJlYWRvbmx5IGljb25FbDogSFRNTEVsZW1lbnQ7XHJcblx0cHVibGljIHJlYWRvbmx5IGlkRWw6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0dGhpcy5jb21wb25lbnRFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldycgfSk7XHJcblx0XHR0aGlzLmljb25FbCA9IHRoaXMuY29tcG9uZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LS1pY29uJyB9KTtcclxuXHRcdHRoaXMuaWRFbCA9IHRoaXMuY29tcG9uZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LS1pZCcgfSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSBpY29uIG9mIHRoZSBpY29uIHByZXZpZXcgY29tcG9uZW50LlxyXG5cdCAqIFRoaXMgd2lsbCB1cGRhdGUgdGhlIGxhYmVsIGFuZCB0aGUgaWNvbiBTVkcuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gaWNvbiBUaGUgaWNvbiBuYW1lLlxyXG5cdCAqIEByZXR1cm5zIFRoaXMsIGZvciBjaGFpbmluZy5cclxuXHQgKi9cclxuXHRwdWJsaWMgc2V0SWNvbihpY29uOiBzdHJpbmcpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb25zdCBpY29uU3ZnID0gZ2V0SWNvbihpY29uKTtcclxuXHJcblx0XHR0aGlzLmNvbXBvbmVudEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1pY29uLWlkJywgaWNvbik7XHJcblx0XHR0aGlzLmlkRWwudGV4dENvbnRlbnQgPSBpY29uO1xyXG5cdFx0dGhpcy5pY29uRWwuZW1wdHkoKTtcclxuXHRcdGlmIChpY29uU3ZnICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy5pY29uRWwuYXBwZW5kQ2hpbGQoaWNvblN2Zyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSBgY2xpY2tgIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgY29tcG9uZW50LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGxpc3RlbmVyIFRoZSBsaXN0ZW5lci5cclxuXHQgKiBAcmV0dXJucyBUaGlzLCBmb3IgY2hhaW5pbmcuXHJcblx0ICovXHJcblx0cHVibGljIG9uQ2xpY2sobGlzdGVuZXI6IChldnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHR0aGlzLmNvbXBvbmVudEVsLm9uY2xpY2sgPSBsaXN0ZW5lcjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQ6cm9vdCB7XHJcblx0XHQtLWNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldy1pY29uLXNpemU6IDFlbTtcclxuXHRcdC0tY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LWlkLXNpemU6IDAuOGVtO1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldyB7XHJcblx0XHRwb3NpdGlvbjogcmVsYXRpdmU7XHJcblx0XHRoZWlnaHQ6IHVuc2V0O1xyXG5cdFx0bWluLWhlaWdodDogM2VtO1xyXG5cclxuXHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldy0taWNvbiB7XHJcblx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XHJcblx0XHR0b3A6IDUwJTtcclxuXHRcdGxlZnQ6IDUwJTtcclxuXHRcdHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIGNhbGMoLTUwJSAtIDAuNWVtKSk7XHJcblxyXG5cdFx0LS1pY29uLXNpemU6IHZhcigtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLWljb24tc2l6ZSk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LS1pZCB7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHRcdG1hcmdpbi10b3A6IGF1dG87XHJcblxyXG5cdFx0Ly8gQnJlYWsgd29yZHMuXHJcblx0XHR3aGl0ZS1zcGFjZTogbm9ybWFsO1xyXG5cdFx0d29yZC1icmVhazogYnJlYWstd29yZDtcclxuXHRcdGh5cGhlbnM6IG1hbnVhbDtcclxuXHJcblx0XHRmb250LXNpemU6IHZhcigtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLWlkLXNpemUpO1xyXG5cdH1cclxuYDtcclxuIiwiaW1wb3J0IHsgU2VhcmNoUmVzdWx0LCBUZXh0Q29tcG9uZW50LCBnZXRJY29uSWRzLCBwcmVwYXJlRnV6enlTZWFyY2ggfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgQ2FsbG91dE1hbmFnZXJQbHVnaW4gZnJvbSAnJnBsdWdpbic7XHJcblxyXG5pbXBvcnQgeyBJY29uUHJldmlld0NvbXBvbmVudCB9IGZyb20gJyZ1aS9jb21wb25lbnQvaWNvbi1wcmV2aWV3JztcclxuaW1wb3J0IHsgVUlQYW5lLCBVSVBhbmVUaXRsZSB9IGZyb20gJyZ1aS9wYW5lJztcclxuXHJcbmNvbnN0IHJlY2VudEljb25zOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuXHJcbi8qKlxyXG4gKiBBIHVzZXIgaW50ZXJmYWNlIHBhbmUgZm9yIHNlbGVjdGluZyBhbiBpY29uLlxyXG4gKlxyXG4gKiBUaGlzIHByb3ZpZGVzIGEgc2VhcmNoYWJsZSBncmlkIG9mIGljb25zIHRoYXQgdGhlIHVzZXIgY2FuIHNjcm9sbCB0aHJvdWdoLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlbGVjdEljb25QYW5lIGV4dGVuZHMgVUlQYW5lPHZvaWQ+IHtcclxuXHRwdWJsaWMgcmVhZG9ubHkgdGl0bGU6IFVJUGFuZVRpdGxlO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbjtcclxuXHJcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nO1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0czogSWNvbkZvclNlYXJjaFtdO1xyXG5cclxuXHRwcml2YXRlIHVzZWRJY29uczogTWFwPHN0cmluZywgSWNvbkZvclNlYXJjaD47XHJcblx0cHJpdmF0ZSBhbGxJY29uczogSWNvbkZvclNlYXJjaFtdO1xyXG5cdHByaXZhdGUgcHJldmlld0xpbWl0OiBudW1iZXI7XHJcblx0cHJpdmF0ZSBwcmV2aWV3TGltaXRPdmVyYWdlOiBudW1iZXI7XHJcblx0cHJpdmF0ZSBvbkNob29zZTogKGljb246IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSBjb21wYXJlSWNvbnM6IChhOiBJY29uRm9yU2VhcmNoLCBiOiBJY29uRm9yU2VhcmNoKSA9PiBudW1iZXI7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuXHRcdHBsdWdpbjogQ2FsbG91dE1hbmFnZXJQbHVnaW4sXHJcblx0XHR0aXRsZTogVUlQYW5lVGl0bGUsXHJcblx0XHRvcHRpb25zOiB7IGxpbWl0PzogbnVtYmVyOyBvbkNob29zZTogKGljb246IHN0cmluZykgPT4gdm9pZCB9LFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5vbkNob29zZSA9IG9wdGlvbnMub25DaG9vc2U7XHJcblxyXG5cdFx0dGhpcy5wcmV2aWV3TGltaXQgPSBvcHRpb25zLmxpbWl0ID8/IDI1MDtcclxuXHRcdHRoaXMucHJldmlld0xpbWl0T3ZlcmFnZSA9IDA7XHJcblxyXG5cdFx0dGhpcy5zZWFyY2hRdWVyeSA9ICcnO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzID0gW107XHJcblxyXG5cdFx0Ly8gR2VuZXJhdGUgc3VnZ2VzdGlvbnMgYmFzZWQgb24gd2hhdCBvdGhlciBjYWxsb3V0cyBhcmUgdXNpbmcuXHJcblx0XHRjb25zdCB1c2VkSWNvbklkcyA9IG5ldyBTZXQocGx1Z2luLmNhbGxvdXRzLnZhbHVlcygpLm1hcCgoYykgPT4gYy5pY29uKSk7XHJcblx0XHRjb25zdCB1c2VkSWNvbnMgPSAodGhpcy51c2VkSWNvbnMgPSBuZXcgTWFwKCkpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhbiBlYXNpbHktc2VhcmNoYWJsZSBsaXN0IG9mIGljb25zLlxyXG5cdFx0dGhpcy5hbGxJY29ucyA9IGdldEljb25JZHMoKS5tYXAoKGlkKSA9PiB7XHJcblx0XHRcdGNvbnN0IGljb246IEljb25Gb3JTZWFyY2ggPSB7XHJcblx0XHRcdFx0aWQsXHJcblx0XHRcdFx0c2VhcmNoSWQ6IGlkLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRcdGNvbXBvbmVudDogbnVsbCxcclxuXHRcdFx0XHRzZWFyY2hSZXN1bHQ6IG51bGwsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpZiAodXNlZEljb25JZHMuaGFzKGlkKSkge1xyXG5cdFx0XHRcdHRoaXMudXNlZEljb25zLnNldChpZCwgaWNvbik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBpY29uO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNvbXBhcmF0b3IgZnVuY3Rpb24uXHJcblx0XHR0aGlzLmNvbXBhcmVJY29ucyA9IChcclxuXHRcdFx0eyBpZDogYSwgc2VhcmNoSWQ6IGFMQywgc2VhcmNoUmVzdWx0OiBhU1IgfSxcclxuXHRcdFx0eyBpZDogYiwgc2VhcmNoSWQ6IGJMQywgc2VhcmNoUmVzdWx0OiBiU1IgfSxcclxuXHRcdCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZWNlbmN5ID0gKHJlY2VudEljb25zLmhhcyhiKSA/IDEgOiAwKSAtIChyZWNlbnRJY29ucy5oYXMoYSkgPyAxIDogMCk7XHJcblx0XHRcdGNvbnN0IHN1Z2dlc3RlZCA9ICh1c2VkSWNvbnMuaGFzKGIpID8gMSA6IDApIC0gKHVzZWRJY29ucy5oYXMoYSkgPyAxIDogMCk7XHJcblx0XHRcdGNvbnN0IHNlYXJjaFJhbmsgPSAoYlNSPy5zY29yZSA/PyAwKSAtIChhU1I/LnNjb3JlID8/IDApO1xyXG5cclxuXHRcdFx0Ly8gUmFua2VkLlxyXG5cdFx0XHRjb25zdCBzdW0gPSByZWNlbmN5ICsgc3VnZ2VzdGVkICsgc2VhcmNoUmFuaztcclxuXHRcdFx0aWYgKHN1bSAhPT0gMCkgcmV0dXJuIHN1bTtcclxuXHJcblx0XHRcdC8vIExvY2FsZSBjb21wYXJlLlxyXG5cdFx0XHRyZXR1cm4gYkxDLmxvY2FsZUNvbXBhcmUoYUxDKTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICovXHJcblx0cHVibGljIHNlYXJjaChxdWVyeTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gcXVlcnk7XHJcblxyXG5cdFx0aWYgKHF1ZXJ5ID09PSAnJykge1xyXG5cdFx0XHR0aGlzLnJlc2V0U2VhcmNoUmVzdWx0cygpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc3Qgc2VhcmNoID0gcHJlcGFyZUZ1enp5U2VhcmNoKHF1ZXJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdFx0dGhpcy5jYWxjdWxhdGVTZWFyY2hSZXN1bHRzKChpY29uKSA9PiBzZWFyY2goaWNvbi5zZWFyY2hJZCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRzZSB0aGUgc2VhcmNoIHJlc3VsdHMgbGlzdC5cclxuXHQgKiBAcGFyYW0gc2VhcmNoIFRoZSBzZWFyY2ggZnVuY3Rpb24uXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIGNhbGN1bGF0ZVNlYXJjaFJlc3VsdHMoc2VhcmNoOiAoaWNvbjogSWNvbkZvclNlYXJjaCkgPT4gU2VhcmNoUmVzdWx0IHwgbnVsbCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzID0gdGhpcy5hbGxJY29ucy5maWx0ZXIoKGljb24pID0+IHtcclxuXHRcdFx0aWNvbi5zZWFyY2hSZXN1bHQgPSBzZWFyY2goaWNvbik7XHJcblx0XHRcdHJldHVybiBpY29uLnNlYXJjaFJlc3VsdCAhPSBudWxsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzLnNvcnQodGhpcy5jb21wYXJlSWNvbnMpO1xyXG5cdFx0dGhpcy5wcmV2aWV3TGltaXRPdmVyYWdlID0gdGhpcy5zZWFyY2hSZXN1bHRzLnNwbGljZSh0aGlzLnByZXZpZXdMaW1pdCkubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVzZXRzIHRoZSBzZWFyY2ggcmVzdWx0cyBsaXN0IHRvIHNob3cgYSBkZWZhdWx0IGxpc3Qgb2Ygc3VnZ2VzdGVkIGljb25zLlxyXG5cdCAqL1xyXG5cdHByb3RlY3RlZCByZXNldFNlYXJjaFJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGFsbEljb25zLCBwcmV2aWV3TGltaXQsIHVzZWRJY29ucyB9ID0gdGhpcztcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0cyA9IEFycmF5LmZyb20oXHJcblx0XHRcdG5ldyBTZXQoW1xyXG5cdFx0XHRcdC4uLmFsbEljb25zLnNsaWNlKDAsIHByZXZpZXdMaW1pdCksXHJcblx0XHRcdFx0Li4uQXJyYXkuZnJvbSh1c2VkSWNvbnMudmFsdWVzKCkpLnNsaWNlKDAsIHByZXZpZXdMaW1pdCksXHJcblx0XHRcdF0pLnZhbHVlcygpLFxyXG5cdFx0KTtcclxuXHJcblx0XHQvLyBTb3J0LlxyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzLnNvcnQodGhpcy5jb21wYXJlSWNvbnMpLnNsaWNlKDAsIHRoaXMucHJldmlld0xpbWl0KTtcclxuXHRcdHRoaXMucHJldmlld0xpbWl0T3ZlcmFnZSA9IHRoaXMuYWxsSWNvbnMubGVuZ3RoIC0gdGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwdWJsaWMgZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gQWRkIHRoZSBpY29ucy5cclxuXHRcdGNvbnN0IGdyaWRFbCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKS5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlcicgfSk7XHJcblx0XHRmb3IgKGNvbnN0IGljb24gb2YgdGhpcy5zZWFyY2hSZXN1bHRzKSB7XHJcblx0XHRcdGlmIChpY29uLmNvbXBvbmVudCA9PSBudWxsKSB7XHJcblx0XHRcdFx0aWNvbi5jb21wb25lbnQgPSBuZXcgSWNvblByZXZpZXdDb21wb25lbnQoZ3JpZEVsKS5zZXRJY29uKGljb24uaWQpLmNvbXBvbmVudEVsO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGdyaWRFbC5hcHBlbmRDaGlsZChpY29uLmNvbXBvbmVudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgYSBkZWxlZ2F0ZWQgY2xpY2sgbGlzdGVuZXIuXHJcblx0XHRncmlkRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoeyB0YXJnZXROb2RlIH0pID0+IHtcclxuXHRcdFx0Zm9yICg7IHRhcmdldE5vZGUgIT0gbnVsbCAmJiB0YXJnZXROb2RlICE9PSBncmlkRWw7IHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRpZiAoISh0YXJnZXROb2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSBjb250aW51ZTtcclxuXHRcdFx0XHRjb25zdCBpY29uSWQgPSB0YXJnZXROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1pY29uLWlkJyk7XHJcblx0XHRcdFx0aWYgKGljb25JZCAhPSBudWxsKSB7XHJcblx0XHRcdFx0XHRyZWNlbnRJY29ucy5hZGQoaWNvbklkKTtcclxuXHRcdFx0XHRcdHRoaXMubmF2LmNsb3NlKCk7XHJcblx0XHRcdFx0XHR0aGlzLm9uQ2hvb3NlKGljb25JZCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgY29udGFpbmVyIGFuZCByZS1yZW5kZXIuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZ3JpZEVsKTtcclxuXHJcblx0XHQvLyBBZGQgYSBtZXNzYWdlIGlmIHRoZXJlIGFyZSB0b28gbWFueSBpY29ucyB0byBkaXNwbGF5LlxyXG5cdFx0Y29uc3QgeyBwcmV2aWV3TGltaXRPdmVyYWdlIH0gPSB0aGlzO1xyXG5cdFx0aWYgKHByZXZpZXdMaW1pdE92ZXJhZ2UgPiAwKSB7XHJcblx0XHRcdGNvbnN0IHsgcGx1cmFsSXMsIHBsdXJhbEljb24gfSA9XHJcblx0XHRcdFx0cHJldmlld0xpbWl0T3ZlcmFnZSA9PT0gMVxyXG5cdFx0XHRcdFx0PyB7IHBsdXJhbElzOiAnaXMnLCBwbHVyYWxJY29uOiAnaWNvbicgfVxyXG5cdFx0XHRcdFx0OiB7IHBsdXJhbElzOiAnYXJlJywgcGx1cmFsSWNvbjogJ2ljb25zJyB9O1xyXG5cdFx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0XHR0ZXh0OlxyXG5cdFx0XHRcdFx0YFRoZXJlICR7cGx1cmFsSXN9ICR7cHJldmlld0xpbWl0T3ZlcmFnZX0gbW9yZSAke3BsdXJhbEljb259IHRvIHNob3cuIGAgK1xyXG5cdFx0XHRcdFx0YFJlZmluZSB5b3VyIHNlYXJjaCB0byBzZWUgbW9yZS5gLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwdWJsaWMgZGlzcGxheUNvbnRyb2xzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250cm9sc0VsIH0gPSB0aGlzO1xyXG5cclxuXHRcdG5ldyBUZXh0Q29tcG9uZW50KGNvbnRyb2xzRWwpXHJcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNlYXJjaFF1ZXJ5KVxyXG5cdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCBpY29ucy4uLicpXHJcblx0XHRcdC5vbkNoYW5nZSh0aGlzLnNlYXJjaC5iaW5kKHRoaXMpKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwcm90ZWN0ZWQgb25SZWFkeSgpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVzZXRTZWFyY2hSZXN1bHRzKCk7XHJcblx0fVxyXG59XHJcblxyXG5pbnRlcmZhY2UgSWNvbkZvclNlYXJjaCB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRzZWFyY2hJZDogc3RyaW5nO1xyXG5cdGNvbXBvbmVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdHNlYXJjaFJlc3VsdDogU2VhcmNoUmVzdWx0IHwgbnVsbDtcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIFN0eWxlczpcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdDpyb290IHtcclxuXHRcdC0tY2FsbG91dG1hbmFnZXItaWNvbi1waWNrZXItc2l6ZTogMTAwcHg7XHJcblx0XHQtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLWdhcDogOHB4O1xyXG5cdFx0LS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pY29uLXNpemU6IDIuNWVtO1xyXG5cdFx0LS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pZC1zaXplOiAwLjc1ZW07XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItaWNvbi1waWNrZXIge1xyXG5cdFx0ZGlzcGxheTogZ3JpZDtcclxuXHJcblx0XHRncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIHZhcigtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLXNpemUpKTtcclxuXHRcdGdyaWQtYXV0by1yb3dzOiB2YXIoLS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1zaXplKTtcclxuXHRcdGdhcDogdmFyKC0tY2FsbG91dG1hbmFnZXItaWNvbi1waWNrZXItZ2FwKTtcclxuXHJcblx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHJcblx0XHQuY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3IHtcclxuXHRcdFx0aGVpZ2h0OiAxMDAlO1xyXG5cclxuXHRcdFx0LS1jYWxsb3V0bWFuYWdlci1pY29uLXByZXZpZXctaWNvbi1zaXplOiB2YXIoLS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pY29uLXNpemUpO1xyXG5cdFx0XHQtLWNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldy1pZC1zaXplOiB2YXIoLS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pZC1zaXplKTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IEV4dHJhQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEEgcmVzZXQgYnV0dG9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJlc2V0QnV0dG9uQ29tcG9uZW50IGV4dGVuZHMgRXh0cmFCdXR0b25Db21wb25lbnQge1xyXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGNvbnRhaW5lckVsKTtcclxuXHRcdHRoaXMuc2V0SWNvbignbHVjaWRlLXVuZG8nKTtcclxuXHRcdHRoaXMuZXh0cmFTZXR0aW5nc0VsLmNsYXNzTGlzdC5hZGQoJ2NhbGxvdXRtYW5hZ2VyLXJlc2V0LWJ1dHRvbicpO1xyXG5cdH1cclxufVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQ6cm9vdCB7XHJcblx0XHQtLWNhbGxvdXRtYW5hZ2VyLXJlc2V0LWJ1dHRvbi1kaXNhYmxlZC1vcGFjaXR5OiAwLjM7XHJcblx0fVxyXG5cclxuXHQvLyBUaGUgXCJ1bmRvXCIgYnV0dG9uIHdoZW4gdGhlIHNldHRpbmcgaGFzIG5vdCBiZWVuIGNoYW5nZWQgZnJvbSB0aGUgZGVmYXVsdC5cclxuXHQuY2FsbG91dG1hbmFnZXItcmVzZXQtYnV0dG9uOmlzKC5pcy1kaXNhYmxlZCwgW2Rpc2FibGVkXSkge1xyXG5cdFx0b3BhY2l0eTogdmFyKC0tY2FsbG91dG1hbmFnZXItcmVzZXQtYnV0dG9uLWRpc2FibGVkLW9wYWNpdHkpO1xyXG5cclxuXHRcdCY6aG92ZXIge1xyXG5cdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuXHRcdH1cclxuXHJcblx0XHQmOmFjdGl2ZSB7XHJcblx0XHRcdGNvbG9yOiB2YXIoLS1pY29uLWNvbG9yKTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0VGhlbWVNYW5pZmVzdCB9IGZyb20gJ29ic2lkaWFuLWV4dHJhJztcclxuXHJcbmltcG9ydCB7IENhbGxvdXQsIENhbGxvdXRTb3VyY2UgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IGdldENvbG9yRnJvbUNhbGxvdXQgfSBmcm9tICcmY2FsbG91dC1yZXNvbHZlcic7XHJcbmltcG9ydCB7IHRvSGV4UkdCIH0gZnJvbSAnJmNvbG9yJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJJbmZvKGFwcDogQXBwLCBjYWxsb3V0OiBDYWxsb3V0LCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRjb25zdCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cdGNvbnN0IGNvbnRlbnRFbCA9IGZyYWcuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LXNlY3Rpb24nIH0pO1xyXG5cclxuXHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQWJvdXQgdGhpcyBDYWxsb3V0JyB9KTtcclxuXHRjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LWluZm8nIH0sIChlbCkgPT4ge1xyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnVGhlICcpO1xyXG5cdFx0ZWwuY3JlYXRlU3Bhbih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC0tY2FsbG91dC1pZCcsIHRleHQ6IGNhbGxvdXQuaWQgfSk7XHJcblx0XHRlbC5hcHBlbmRUZXh0KCcgY2FsbG91dCcpO1xyXG5cclxuXHRcdC8vIENvbG9yIGluZm9ybWF0aW9uLlxyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnIGhhcyAnKTtcclxuXHRcdGFwcGVuZENvbG9ySW5mbyhlbCwgY2FsbG91dCk7XHJcblxyXG5cdFx0Ly8gSWNvbiBpbmZvcm1hdGlvbi5cclxuXHRcdGVsLmFwcGVuZFRleHQoJyBhbmQgJyk7XHJcblx0XHRhcHBlbmRJY29uSW5mbyhlbCwgY2FsbG91dCk7XHJcblxyXG5cdFx0Ly8gU291cmNlIGluZm9ybWF0aW9uLlxyXG5cdFx0aWYgKGNhbGxvdXQuc291cmNlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0aWYgKGNhbGxvdXQuc291cmNlc1swXS50eXBlID09PSAnYnVpbHRpbicpIHtcclxuXHRcdFx0XHRlbC5hcHBlbmRUZXh0KCcuIEl0IGlzIG9uZSBvZiB0aGUgYnVpbHQtaW4gY2FsbG91dHMuJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbC5hcHBlbmRUZXh0KCcuIEl0IHdhcyBhZGRlZCB0byBPYnNpZGlhbiBieSB0aGUgJyk7XHJcblx0XHRcdGFwcGVuZFNvdXJjZUluZm8oYXBwLCBlbCwgY2FsbG91dC5zb3VyY2VzWzBdKTtcclxuXHRcdFx0ZWwuYXBwZW5kVGV4dCgnLicpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnLiBUaGUgY2FsbG91dCBjb21lcyBmcm9tOicpO1xyXG5cdFx0Y29uc3Qgc291cmNlcyA9IGVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LXNvdXJjZS1saXN0JyB9KTtcclxuXHRcdGZvciAoY29uc3Qgc291cmNlIG9mIGNhbGxvdXQuc291cmNlcykge1xyXG5cdFx0XHRjb25zdCBpdGVtRWwgPSBzb3VyY2VzLmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0XHRpdGVtRWwuYXBwZW5kVGV4dCgnVGhlICcpO1xyXG5cdFx0XHRhcHBlbmRTb3VyY2VJbmZvKGFwcCwgaXRlbUVsLCBzb3VyY2UpO1xyXG5cdFx0XHRpdGVtRWwuYXBwZW5kVGV4dCgnLicpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBSZW5kZXIgdGhlIGZyYWdtZW50LlxyXG5cdGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGZyYWcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBlbmRJY29uSW5mbyhlbDogSFRNTEVsZW1lbnQsIGNhbGxvdXQ6IENhbGxvdXQpOiB2b2lkIHtcclxuXHRlbC5hcHBlbmRUZXh0KCdpcyB1c2luZyB0aGUgaWNvbiAnKTtcclxuXHRlbC5jcmVhdGVFbCgnY29kZScsIHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LWljb24nLCB0ZXh0OiBjYWxsb3V0Lmljb24gfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGVuZENvbG9ySW5mbyhlbDogSFRNTEVsZW1lbnQsIGNhbGxvdXQ6IENhbGxvdXQpOiB2b2lkIHtcclxuXHRjb25zdCBjYWxsb3V0Q29sb3IgPSBnZXRDb2xvckZyb21DYWxsb3V0KGNhbGxvdXQpO1xyXG5cclxuXHQvLyBJbnZhbGlkIGNvbG9yLlxyXG5cdGlmIChjYWxsb3V0Q29sb3IgPT0gbnVsbCkge1xyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnYW4gaW52YWxpZCBjb2xvciAoJyk7XHJcblx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHtcclxuXHRcdFx0Y2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jb2xvci1pbnZhbGlkJyxcclxuXHRcdFx0dGV4dDogY2FsbG91dC5jb2xvci50cmltKCksXHJcblx0XHR9KTtcclxuXHRcdGVsLmFwcGVuZFRleHQoJyknKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIFZhbGlkIGNvbG9yLlxyXG5cdGVsLmFwcGVuZFRleHQoJ3RoZSBjb2xvciAnKTtcclxuXHRlbC5jcmVhdGVFbChcclxuXHRcdCdjb2RlJyxcclxuXHRcdHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LWNvbG9yJywgdGV4dDogdG9IZXhSR0IoY2FsbG91dENvbG9yKSB9LFxyXG5cdFx0KGNvbG9yRWwpID0+IGNvbG9yRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmVzb2x2ZWQtY2FsbG91dC1jb2xvcicsIGNhbGxvdXQuY29sb3IpLFxyXG5cdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGVuZFNvdXJjZUluZm8oYXBwOiBBcHAsIGVsOiBIVE1MRWxlbWVudCwgc291cmNlOiBDYWxsb3V0U291cmNlKTogYm9vbGVhbiB7XHJcblx0c3dpdGNoIChzb3VyY2UudHlwZSkge1xyXG5cdFx0Y2FzZSAnYnVpbHRpbic6XHJcblx0XHRcdGVsLmFwcGVuZFRleHQoJ2J1aWx0LWluIGNhbGxvdXRzJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Y2FzZSAnY3VzdG9tJzpcclxuXHRcdFx0ZWwuYXBwZW5kVGV4dCgnY3VzdG9tIGNhbGxvdXRzIHlvdSBjcmVhdGVkJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Y2FzZSAnc25pcHBldCc6XHJcblx0XHRcdGVsLmFwcGVuZFRleHQoJ0NTUyBzbmlwcGV0ICcpO1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHtcclxuXHRcdFx0XHRjbHM6ICdjYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtc291cmNlJyxcclxuXHRcdFx0XHR0ZXh0OiBgJHtzb3VyY2Uuc25pcHBldH0uY3NzYCxcclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Y2FzZSAndGhlbWUnOiB7XHJcblx0XHRcdGVsLmFwcGVuZFRleHQoJ3RoZW1lICcpO1xyXG5cdFx0XHRjb25zdCB0aGVtZU5hbWUgPSBnZXRUaGVtZU1hbmlmZXN0KGFwcCwgc291cmNlLnRoZW1lKT8ubmFtZSA/PyBzb3VyY2UudGhlbWU7XHJcblx0XHRcdGVsLmNyZWF0ZVNwYW4oeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtc291cmNlJywgdGV4dDogdGhlbWVOYW1lIH0pO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gVGhlIGluZm8gcGFyYWdyYXBoIGFuZCBsaXN0LlxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtaW5mbyB7XHJcblx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1pbnZhbGlkLWNvbG9yIHtcclxuXHRcdGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcclxuXHR9XHJcblxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtY29sb3Ige1xyXG5cdFx0Y29sb3I6IHJnYih2YXIoLS1yZXNvbHZlZC1jYWxsb3V0LWNvbG9yKSk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LWlkLFxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtaWNvbixcclxuXHQuY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LXNvdXJjZSB7XHJcblx0XHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC0tY2FsbG91dC1zb3VyY2UtbGlzdCB7XHJcblx0fVxyXG5gO1xyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE1hcmtkb3duUmVuZGVyZXIsIFRleHRBcmVhQ29tcG9uZW50LCBnZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50Q29sb3JTY2hlbWUgfSBmcm9tICdvYnNpZGlhbi1leHRyYSc7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0IH0gZnJvbSAnJmNhbGxvdXQnO1xyXG5pbXBvcnQgeyBDYWxsb3V0U2V0dGluZ3MsIGNhbGxvdXRTZXR0aW5nc1RvQ1NTLCBjdXJyZW50Q2FsbG91dEVudmlyb25tZW50IH0gZnJvbSAnJmNhbGxvdXQtc2V0dGluZ3MnO1xyXG5pbXBvcnQgQ2FsbG91dE1hbmFnZXJQbHVnaW4gZnJvbSAnJnBsdWdpbic7XHJcblxyXG5pbXBvcnQgeyBJc29sYXRlZENhbGxvdXRQcmV2aWV3Q29tcG9uZW50IH0gZnJvbSAnJnVpL2NvbXBvbmVudC9jYWxsb3V0LXByZXZpZXcnO1xyXG5pbXBvcnQgeyBnZXRUaXRsZUZyb21DYWxsb3V0IH0gZnJvbSAnJmNhbGxvdXQtcmVzb2x2ZXInO1xyXG5cclxuLyoqXHJcbiAqIEEgY2FsbG91dCBwcmV2aWV3IGZvciB0aGUgZWRpdCBjYWxsb3V0IHBhbmUuXHJcbiAqXHJcbiAqIFRoaXMgYWxsb3dzIHRoZSBwcmV2aWV3IHRleHQgdG8gYmUgZWRpdGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVkaXRDYWxsb3V0UGFuZVByZXZpZXcge1xyXG5cdHB1YmxpYyByZWFkb25seSBwcmV2aWV3OiBJc29sYXRlZENhbGxvdXRQcmV2aWV3Q29tcG9uZW50O1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHBsdWdpbjogQ2FsbG91dE1hbmFnZXJQbHVnaW47XHJcblx0cHJpdmF0ZSByZWFkb25seSBzZWN0aW9uRWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgY2FsbG91dElkOiBzdHJpbmc7XHJcblxyXG5cdHByaXZhdGUgcHJldmlld01hcmtkb3duID0gJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0Lic7XHJcblx0cHJpdmF0ZSBwcmV2aWV3RWRpdG9yRWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0cHJpdmF0ZSBjYWxsb3V0SGFzSWNvblJlYWR5OiBib29sZWFuO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IocGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbiwgY2FsbG91dDogQ2FsbG91dCwgdmlld09ubHk6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuY2FsbG91dEhhc0ljb25SZWFkeSA9IGZhbHNlO1xyXG5cdFx0dGhpcy5jYWxsb3V0SWQgPSBjYWxsb3V0LmlkO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRoZSBjYWxsb3V0IHByZXZpZXcuXHJcblx0XHRjb25zdCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cdFx0dGhpcy5zZWN0aW9uRWwgPSBmcmFnLmNyZWF0ZURpdih7XHJcblx0XHRcdGNsczogWydjYWxsb3V0bWFuYWdlci1wcmV2aWV3LWNvbnRhaW5lcicsICdjYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtcHJldmlldyddLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wcmV2aWV3ID0gbmV3IElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQodGhpcy5zZWN0aW9uRWwsIHtcclxuXHRcdFx0aWQ6IGNhbGxvdXQuaWQsXHJcblx0XHRcdHRpdGxlOiBnZXRUaXRsZUZyb21DYWxsb3V0KGNhbGxvdXQpLFxyXG5cdFx0XHRpY29uOiBjYWxsb3V0Lmljb24sXHJcblx0XHRcdGNvbG9yU2NoZW1lOiBnZXRDdXJyZW50Q29sb3JTY2hlbWUocGx1Z2luLmFwcCksXHJcblx0XHRcdGNvbnRlbnQ6IChjb250YWluZXJFbCkgPT4ge1xyXG5cdFx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLnByZXZpZXdNYXJrZG93biB9KTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE1ha2UgdGhlIHByZXZpZXcgZWRpdGFibGUuXHJcblx0XHRpZiAoIXZpZXdPbmx5KSB7XHJcblx0XHRcdHRoaXMubWFrZUVkaXRhYmxlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG1ha2VFZGl0YWJsZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMucHJldmlldy5jb250ZW50RWwgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gQWRkIGEgY2xpY2sgaGFuZGxlciB0byBjaGFuZ2UgdGhlIHByZXZpZXcuXHJcblx0XHR0aGlzLnByZXZpZXdFZGl0b3JFbCA9IG51bGw7XHJcblx0XHR0aGlzLnByZXZpZXcuY2FsbG91dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5wcmV2aWV3RWRpdG9yRWwgIT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgaGVpZ2h0ID0gY29udGVudEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHRcdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRcdG5ldyBUZXh0QXJlYUNvbXBvbmVudChjb250ZW50RWwpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucHJldmlld01hcmtkb3duKVxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignUHJldmlldyBNYXJrZG93bi4uLicpXHJcblx0XHRcdFx0LnRoZW4oKGMpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGlucHV0RWwgPSAodGhpcy5wcmV2aWV3RWRpdG9yRWwgPSBjLmlucHV0RWwpO1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnaGVpZ2h0JywgYCR7aGVpZ2h0fXB4YCk7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmNsYXNzTGlzdC5hZGQoJ2NhbGxvdXRtYW5hZ2VyLXByZXZpZXctZWRpdG9yJyk7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gYy5nZXRWYWx1ZSgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnByZXZpZXdFZGl0b3JFbCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJldmlld01hcmtkb3duID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2hhbmdlQ29udGVudCh2YWx1ZSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaGVzIHRoZSBjYWxsb3V0IHByZXZpZXcncyBpY29uLlxyXG5cdCAqIFdlIG5lZWQgdG8gZG8gdGhpcyBhZnRlciB0aGUgcHJldmlldyBpcyBhdHRhY2hlZCB0byBET00sIGFzIHdlIGNhbid0IGdldCB0aGUgY29ycmVjdCBpY29uIHVudGlsIHRoYXQgaGFwcGVucy5cclxuXHQgKi9cclxuXHRwcm90ZWN0ZWQgcmVmcmVzaFByZXZpZXdJY29uKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBpY29uRWwsIGNhbGxvdXRFbCB9ID0gdGhpcy5wcmV2aWV3O1xyXG5cclxuXHRcdGlmICh3aW5kb3cuZG9jdW1lbnQuY29udGFpbnModGhpcy5zZWN0aW9uRWwpKSB7XHJcblx0XHRcdGNvbnN0IGljb24gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYWxsb3V0RWwpLmdldFByb3BlcnR5VmFsdWUoJy0tY2FsbG91dC1pY29uJykudHJpbSgpO1xyXG5cdFx0XHRjb25zdCBpY29uU3ZnID0gZ2V0SWNvbihpY29uKSA/PyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdmcnKTtcclxuXHJcblx0XHRcdGljb25FbC5lbXB0eSgpO1xyXG5cdFx0XHRpY29uRWwuYXBwZW5kQ2hpbGQoaWNvblN2Zyk7XHJcblxyXG5cdFx0XHR0aGlzLmNhbGxvdXRIYXNJY29uUmVhZHkgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgcHJldmlldyB0aGF0IGlzIGRpc3BsYXllZCBpbnNpZGUgdGhlIGNhbGxvdXQuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gbWFya2Rvd24gVGhlIG1hcmtkb3duIHRvIHJlbmRlci5cclxuXHQgKi9cclxuXHRwdWJsaWMgYXN5bmMgY2hhbmdlQ29udGVudChtYXJrZG93bjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBjb250ZW50RWwgPSB0aGlzLnByZXZpZXcuY29udGVudEVsIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihtYXJrZG93biwgY29udGVudEVsLCAnJywgdW5kZWZpbmVkIGFzIHVua25vd24gYXMgQ29tcG9uZW50KTtcclxuXHRcdH0gY2F0Y2ggKGV4KSB7XHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnY29kZScpLmNyZWF0ZUVsKCdwcmUnLCB7IHRleHQ6IG1hcmtkb3duIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgc2V0dGluZ3MgZm9yIHRoZSBjYWxsb3V0LlxyXG5cdCAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgY3VzdG9taXplZCBjYWxsb3V0LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHNldHRpbmdzIFRoZSBzZXR0aW5ncyB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIGFzeW5jIGNoYW5nZVNldHRpbmdzKHNldHRpbmdzOiBDYWxsb3V0U2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHsgcHJldmlldyB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHN0eWxlcyA9IGNhbGxvdXRTZXR0aW5nc1RvQ1NTKHRoaXMuY2FsbG91dElkLCBzZXR0aW5ncywgY3VycmVudENhbGxvdXRFbnZpcm9ubWVudCh0aGlzLnBsdWdpbi5hcHApKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgdGhlIGN1c3RvbSBzdHlsZXNoZWV0IG9mIHRoZSBjYWxsb3V0IHByZXZpZXcuXHJcblx0XHRwcmV2aWV3LmN1c3RvbVN0eWxlRWwudGV4dENvbnRlbnQgPSBzdHlsZXM7XHJcblx0XHRwcmV2aWV3LnJlc2V0U3R5bGVQcm9wZXJ0eU92ZXJyaWRlcygpO1xyXG5cdFx0cHJldmlldy5yZW1vdmVTdHlsZXMoKGVsKSA9PiBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dC1tYW5hZ2VyJykgPT09ICdzdHlsZS1vdmVycmlkZXMnKTtcclxuXHJcblx0XHR0aGlzLmNhbGxvdXRIYXNJY29uUmVhZHkgPSBmYWxzZTtcclxuXHJcblx0XHQvLyBSZW1vdmUgdGhlIHByZXZpZXcgc3R5bGVzIGFkZGVkIGJ5IGNhbGxvdXQgbWFuYWdlci5cclxuXHRcdC8vIE5vdyB0aGF0IHdlIGNoYW5nZWQgdGhlIHNldHRpbmdzLCBoYXZpbmcgdGhlIG9sZCBzdHlsZXMgd291bGQgbGVhZCB0byBpbmNvbnNpc3RlbmN5LlxyXG5cdFx0cHJldmlldy5yZW1vdmVTdHlsZXMoKGVsKSA9PiBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5qZWN0LWlkJykgPT09ICdjYWxsb3V0LXNldHRpbmdzJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBdHRhY2hlcyB0aGUgcHJldmlldyB0byBhIGNvbnRhaW5lci5cclxuXHQgKiBAcGFyYW0gY29udGFpbmVyRWwgVGhlIGNvbnRhaW5lciBlbGVtZW50LlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhdHRhY2goY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRjb250YWluZXJFbC5hcHBlbmRDaGlsZCh0aGlzLnNlY3Rpb25FbCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmNhbGxvdXRIYXNJY29uUmVhZHkpIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoUHJldmlld0ljb24oKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gRW5zdXJlIHRoZSBwcmV2aWV3IHRha2VzIGEgY2VydGFpbiBoZWlnaHQuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1wcmV2aWV3IHtcclxuXHRcdHBhZGRpbmctYm90dG9tOiB2YXIoLS1zaXplLTQtOCk7XHJcblx0XHRtaW4taGVpZ2h0OiAxNGVtO1xyXG5cclxuXHRcdGJvZHkuaXMtbW9iaWxlICYge1xyXG5cdFx0XHRtaW4taGVpZ2h0OiAzNXZoO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhlIHRleHQgYm94IHRoYXQgYWxsb3dzIHRoZSBwcmV2aWV3IHRvIGJlIGNoYW5nZWQuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXByZXZpZXctZWRpdG9yIHtcclxuXHRcdHJlc2l6ZTogdmVydGljYWw7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHRcdG1pbi1oZWlnaHQ6IDZlbTtcclxuXHJcblx0XHRtYXJnaW4tdG9wOiB2YXIoLS1zaXplLTQtMyk7XHJcblxyXG5cdFx0Ly8gVHJ5IHRvIGJlIGFzIHRyYW5zcGFyZW50IGFzIHBvc3NpYmxlLlxyXG5cdFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcblx0XHRmb250LXNpemU6IHZhcigtLWZvbnQtdGV4dC1zaXplKTtcclxuXHRcdGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LXRleHQpO1xyXG5cdFx0bGluZS1oZWlnaHQ6IHZhcigtLWxpbmUtaGVpZ2h0LW5vcm1hbCk7XHJcblx0fVxyXG5gO1xyXG4iLCJpbXBvcnQgeyBCdXR0b25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0LCBDYWxsb3V0SUQgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IENhbGxvdXRTZXR0aW5ncyB9IGZyb20gJyZjYWxsb3V0LXNldHRpbmdzJztcclxuaW1wb3J0IENhbGxvdXRNYW5hZ2VyUGx1Z2luIGZyb20gJyZwbHVnaW4nO1xyXG5cclxuaW1wb3J0IHsgVUlQYW5lIH0gZnJvbSAnJnVpL3BhbmUnO1xyXG5cclxuaW1wb3J0IHsgQXBwZWFyYW5jZUVkaXRvciB9IGZyb20gJy4vYXBwZWFyYW5jZS1lZGl0b3InO1xyXG5pbXBvcnQgeyBBcHBlYXJhbmNlLCBkZXRlcm1pbmVBcHBlYXJhbmNlVHlwZSB9IGZyb20gJy4vYXBwZWFyYW5jZS10eXBlJztcclxuaW1wb3J0IENvbXBsZXhBcHBlYXJhbmNlRWRpdG9yIGZyb20gJy4vZWRpdG9yLWNvbXBsZXgnO1xyXG5pbXBvcnQgUGVyU2NoZW1lQXBwZWFyYW5jZUVkaXRvciBmcm9tICcuL2VkaXRvci1wZXItc2NoZW1lJztcclxuaW1wb3J0IFVuaWZpZWRBcHBlYXJhbmNlRWRpdG9yIGZyb20gJy4vZWRpdG9yLXVuaWZpZWQnO1xyXG5pbXBvcnQgeyByZW5kZXJJbmZvIH0gZnJvbSAnLi9zZWN0aW9uLWluZm8nO1xyXG5pbXBvcnQgeyBFZGl0Q2FsbG91dFBhbmVQcmV2aWV3IH0gZnJvbSAnLi9zZWN0aW9uLXByZXZpZXcnO1xyXG5cclxuY29uc3QgSU1QT1NTSUJMRV9DQUxMT1VUX0lEID0gJ1tub3QgYSByZWFsIGNhbGxvdXRdJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0Q2FsbG91dFBhbmUgZXh0ZW5kcyBVSVBhbmUge1xyXG5cdHB1YmxpYyByZWFkb25seSB0aXRsZTtcclxuXHRwcml2YXRlIHJlYWRvbmx5IHZpZXdPbmx5OiBib29sZWFuO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgcGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbjtcclxuXHJcblx0cHJpdmF0ZSBjYWxsb3V0OiBDYWxsb3V0O1xyXG5cclxuXHRwcml2YXRlIHByZXZpZXdTZWN0aW9uOiBFZGl0Q2FsbG91dFBhbmVQcmV2aWV3O1xyXG5cdHByaXZhdGUgYXBwZWFyYW5jZUVkaXRvckNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGFwcGVhcmFuY2VFZGl0b3JFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhcHBlYXJhbmNlRWRpdG9yITogQXBwZWFyYW5jZUVkaXRvcjxBcHBlYXJhbmNlPjtcclxuXHRwcml2YXRlIGFwcGVhcmFuY2UhOiBBcHBlYXJhbmNlO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IocGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbiwgaWQ6IENhbGxvdXRJRCwgdmlld09ubHk6IGJvb2xlYW4pIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMudmlld09ubHkgPSB2aWV3T25seTtcclxuXHRcdHRoaXMudGl0bGUgPSB7IHRpdGxlOiAnQ2FsbG91dCcsIHN1YnRpdGxlOiBpZCB9O1xyXG5cclxuXHRcdC8vIEdldCB0aGUgY2FsbG91dCBpbmZvcm1hdGlvbi5cclxuXHRcdHRoaXMuY2FsbG91dCA9IHBsdWdpbi5jYWxsb3V0cy5nZXQoaWQpID8/IHtcclxuXHRcdFx0c291cmNlczogW3sgdHlwZTogJ2N1c3RvbScgfV0sXHJcblx0XHRcdC4uLnBsdWdpbi5jYWxsb3V0UmVzb2x2ZXIuZ2V0Q2FsbG91dFByb3BlcnRpZXMoSU1QT1NTSUJMRV9DQUxMT1VUX0lEKSxcclxuXHRcdFx0aWQsXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIENyZWF0ZSB0aGUgcHJldmlldy5cclxuXHRcdHRoaXMucHJldmlld1NlY3Rpb24gPSBuZXcgRWRpdENhbGxvdXRQYW5lUHJldmlldyhwbHVnaW4sIHRoaXMuY2FsbG91dCwgZmFsc2UpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSB0aGUgYXBwZWFyYW5jZSBlZGl0b3IuXHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3JDb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5hcHBlYXJhbmNlRWRpdG9yQ29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcclxuXHRcdFx0J2NhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1zZWN0aW9uJyxcclxuXHRcdFx0J2NhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1hcHBlYXJhbmNlJyxcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hcHBlYXJhbmNlRWRpdG9yQ29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQXBwZWFyYW5jZScgfSk7XHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3JFbCA9IHRoaXMuYXBwZWFyYW5jZUVkaXRvckNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xyXG5cclxuXHRcdHRoaXMuY2hhbmdlU2V0dGluZ3MocGx1Z2luLmdldENhbGxvdXRTZXR0aW5ncyhpZCkgPz8gW10pO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGNoYW5nZUFwcGVhcmFuY2VFZGl0b3IobmV3QXBwZWFyYW5jZTogQXBwZWFyYW5jZSkge1xyXG5cdFx0Y29uc3Qgb2xkQXBwZWFyYW5jZSA9IHRoaXMuYXBwZWFyYW5jZTtcclxuXHRcdHRoaXMuYXBwZWFyYW5jZSA9IG5ld0FwcGVhcmFuY2U7XHJcblxyXG5cdFx0aWYgKG5ld0FwcGVhcmFuY2UudHlwZSAhPT0gb2xkQXBwZWFyYW5jZT8udHlwZSkge1xyXG5cdFx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3IgPSBuZXcgQVBQRUFSQU5DRV9FRElUT1JTW25ld0FwcGVhcmFuY2UudHlwZV0oKTtcclxuXHJcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMuYXBwZWFyYW5jZUVkaXRvciwge1xyXG5cdFx0XHRcdG5hdjogeyBnZXQ6ICgpID0+IHRoaXMubmF2IH0sXHJcblx0XHRcdFx0cGx1Z2luOiB7IHZhbHVlOiB0aGlzLnBsdWdpbiB9LFxyXG5cdFx0XHRcdGNvbnRhaW5lckVsOiB7IHZhbHVlOiB0aGlzLmFwcGVhcmFuY2VFZGl0b3JFbCB9LFxyXG5cdFx0XHRcdHNldEFwcGVhcmFuY2U6IHsgdmFsdWU6IHRoaXMub25TZXRBcHBlYXJhbmNlLmJpbmQodGhpcykgfSxcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgeyBhcHBlYXJhbmNlRWRpdG9yIH0gPSB0aGlzO1xyXG5cdFx0YXBwZWFyYW5jZUVkaXRvci5hcHBlYXJhbmNlID0gbmV3QXBwZWFyYW5jZTtcclxuXHRcdGFwcGVhcmFuY2VFZGl0b3IuY2FsbG91dCA9IHRoaXMuY2FsbG91dDtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBvblNldEFwcGVhcmFuY2UoYXBwZWFyYW5jZTogQXBwZWFyYW5jZSkge1xyXG5cdFx0dGhpcy5jaGFuZ2VBcHBlYXJhbmNlRWRpdG9yKGFwcGVhcmFuY2UpO1xyXG5cdFx0Y29uc3QgbmV3U2V0dGluZ3MgPSB0aGlzLmFwcGVhcmFuY2VFZGl0b3IudG9TZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0IH0gPSB0aGlzO1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0UmVzb2x2ZXIgfSA9IHRoaXMucGx1Z2luO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSB0aGUgcGx1Z2luIHNldHRpbmdzLlxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0Q2FsbG91dFNldHRpbmdzKGNhbGxvdXQuaWQsIG5ld1NldHRpbmdzKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgdGhlIGNhbGxvdXQgcHJvcGVydGllcy5cclxuXHRcdGNvbnN0IHsgY29sb3IsIGljb24gfSA9IGNhbGxvdXRSZXNvbHZlci5nZXRDYWxsb3V0UHJvcGVydGllcyhjYWxsb3V0LmlkKTtcclxuXHRcdGNhbGxvdXQuY29sb3IgPSBjb2xvcjtcclxuXHRcdGNhbGxvdXQuaWNvbiA9IGljb247XHJcblxyXG5cdFx0Ly8gUmVyZW5kZXIgdG8gc2hvdyB3aGF0IGNoYW5nZWQuXHJcblx0XHR0aGlzLnByZXZpZXdTZWN0aW9uLmNoYW5nZVNldHRpbmdzKG5ld1NldHRpbmdzKTtcclxuXHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3IuY2FsbG91dCA9IGNhbGxvdXQ7XHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3JFbC5lbXB0eSgpO1xyXG5cdFx0dGhpcy5hcHBlYXJhbmNlRWRpdG9yLnJlbmRlcigpO1xyXG5cclxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdH1cclxuXHJcblx0LyoqIEBvdmVycmlkZSAqL1xyXG5cdHB1YmxpYyBkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCwgcHJldmlld1NlY3Rpb24sIGFwcGVhcmFuY2VFZGl0b3JDb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0cHJldmlld1NlY3Rpb24uYXR0YWNoKGNvbnRhaW5lckVsKTtcclxuXHRcdHJlbmRlckluZm8odGhpcy5wbHVnaW4uYXBwLCB0aGlzLmNhbGxvdXQsIGNvbnRhaW5lckVsKTtcclxuXHRcdGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGFwcGVhcmFuY2VFZGl0b3JDb250YWluZXJFbCk7XHJcblx0fVxyXG5cclxuXHQvKiogQG92ZXJyaWRlICovXHJcblx0cHVibGljIGRpc3BsYXlDb250cm9scygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY2FsbG91dCwgY29udHJvbHNFbCB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBEZWxldGUgYnV0dG9uLlxyXG5cdFx0aWYgKCF0aGlzLnZpZXdPbmx5ICYmIGNhbGxvdXQuc291cmNlcy5sZW5ndGggPT09IDEgJiYgY2FsbG91dC5zb3VyY2VzWzBdLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbHNFbClcclxuXHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXRyYXNoJylcclxuXHRcdFx0XHQuc2V0VG9vbHRpcCgnRGVsZXRlIENhbGxvdXQnKVxyXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlbW92ZUN1c3RvbUNhbGxvdXQoY2FsbG91dC5pZCk7XHJcblx0XHRcdFx0XHR0aGlzLm5hdi5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnRoZW4oKHsgYnV0dG9uRWwgfSkgPT4gYnV0dG9uRWwuY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWljb24nLCAnbW9kLXdhcm5pbmcnKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBwcmV2aWV3IHRoYXQgaXMgZGlzcGxheWVkIGluc2lkZSB0aGUgY2FsbG91dC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBtYXJrZG93biBUaGUgbWFya2Rvd24gdG8gcmVuZGVyLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhc3luYyBjaGFuZ2VQcmV2aWV3KG1hcmtkb3duOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHJldHVybiB0aGlzLnByZXZpZXdTZWN0aW9uLmNoYW5nZUNvbnRlbnQobWFya2Rvd24pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgc3R5bGVzIG9mIHRoZSBwcmV2aWV3IHRoYXQgaXMgZGlzcGxheWVkIGluc2lkZSB0aGUgY2FsbG91dC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBtYXJrZG93biBUaGUgbWFya2Rvd24gdG8gcmVuZGVyLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhc3luYyBjaGFuZ2VTZXR0aW5ncyhzZXR0aW5nczogQ2FsbG91dFNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0aGlzLmNoYW5nZUFwcGVhcmFuY2VFZGl0b3IoZGV0ZXJtaW5lQXBwZWFyYW5jZVR5cGUoc2V0dGluZ3MpKTtcclxuXHRcdHRoaXMuYXBwZWFyYW5jZUVkaXRvckVsLmVtcHR5KCk7XHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3IucmVuZGVyKCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5wcmV2aWV3U2VjdGlvbi5jaGFuZ2VTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBBUFBFQVJBTkNFX0VESVRPUlM6IFJlY29yZDxBcHBlYXJhbmNlWyd0eXBlJ10sIHsgbmV3ICgpOiBBcHBlYXJhbmNlRWRpdG9yPEFwcGVhcmFuY2U+IH0+ID0ge1xyXG5cdGNvbXBsZXg6IENvbXBsZXhBcHBlYXJhbmNlRWRpdG9yLFxyXG5cdHVuaWZpZWQ6IFVuaWZpZWRBcHBlYXJhbmNlRWRpdG9yLFxyXG5cdCdwZXItc2NoZW1lJzogUGVyU2NoZW1lQXBwZWFyYW5jZUVkaXRvcixcclxufTtcclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gU2VjdGlvbnMgb2YgdGhlIHBhbmUuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1zZWN0aW9uIHtcclxuXHRcdGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcblx0XHRwYWRkaW5nLXRvcDogdmFyKC0tc2l6ZS00LTMpO1xyXG5cdFx0cGFkZGluZy1ib3R0b206IHZhcigtLXNpemUtNC02KTtcclxuXHR9XHJcblxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtc2VjdGlvbiBoMiB7XHJcblx0XHRtYXJnaW4tYm90dG9tOiAwLjNlbTtcclxuXHRcdCYgKyBwIHtcclxuXHRcdFx0bWFyZ2luLXRvcDogMDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtYXBwZWFyYW5jZSB7XHJcblx0XHQuc2V0dGluZy1pdGVtIHtcclxuXHRcdFx0Ym9yZGVyLXRvcDogbm9uZTtcclxuXHRcdFx0cGFkZGluZy10b3A6IDAuMzc1ZW07XHJcblx0XHR9XHJcblxyXG5cdFx0LnNldHRpbmctaXRlbTpoYXMoKyAuc2V0dGluZy1pdGVtKSB7XHJcblx0XHRcdHBhZGRpbmctYm90dG9tOiAwLjM3NWVtO1xyXG5cclxuXHRcdFx0Ym9keS5pcy1waG9uZSAmIHtcclxuXHRcdFx0XHRtYXJnaW4tYm90dG9tOiAwLjdlbTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC5zZXR0aW5nLWl0ZW0gKyAuc2V0dGluZy1pdGVtIHtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRoZSBwcmV2aWV3IHNob3dpbmcgdGhlIGNvbXBsZXggY2FsbG91dCBzZXR0aW5nIEpTT04uXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1hcHBlYXJhbmNlLWpzb24gcHJlIHtcclxuXHRcdGJvcmRlcjogcmdiYSh2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikpIDFweCBzb2xpZDtcclxuXHRcdGJvcmRlci1yYWRpdXM6IHZhcigtLWNhbGxvdXQtcmFkaXVzKTtcclxuXHRcdHBhZGRpbmc6IHZhcigtLXNpemUtNC0yKTtcclxuXHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xyXG5cdFx0b3ZlcmZsb3cteDogYXV0bztcclxuXHJcblx0XHRtYXJnaW46IDA7XHJcblx0fVxyXG5cclxuXHQvLyBUaGUgcmVzZXQgYnV0dG9uLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtYXBwZWFyYW5jZS1yZXNldCB7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHR9XHJcbmA7XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgVUlQYW5lTmF2aWdhdGlvbiB7XHJcblx0Y2xvc2UoKTogdm9pZDtcclxuXHRvcGVuKHBhbmU6IFVJUGFuZTx1bmtub3duPik6IHZvaWQ7XHJcblx0cmVwbGFjZShwYW5lOiBVSVBhbmU8dW5rbm93bj4pOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBVSVBhbmVUaXRsZSA9IHN0cmluZyB8IHsgdGl0bGU6IHN0cmluZzsgc3VidGl0bGU6IHN0cmluZyB9O1xyXG5cclxuLyoqXHJcbiAqIEEgc2V0dGluZyBwYW5lIHRoYXQgZXhpc3RzIHdpdGhpbiB0aGUgc2V0dGluZyB0YWIuXHJcbiAqXHJcbiAqIFRoaXMgaGFzIGl0cyBvd24gbmF2aWdhdGlvbiBhbmQgc3RpY2t5IGhlYWRlciFcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBVSVBhbmU8UyA9IHVua25vd24+IHtcclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgbmF2ITogVUlQYW5lTmF2aWdhdGlvbjtcclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgY29udGFpbmVyRWwhOiBIVE1MRWxlbWVudDtcclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgY29udHJvbHNFbCE6IEhUTUxFbGVtZW50O1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgdGl0bGUgb2YgdGhlIHBhbmUuXHJcblx0ICovXHJcblx0cHVibGljIGFic3RyYWN0IGdldCB0aXRsZSgpOiBVSVBhbmVUaXRsZTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGVkIHRvIHJlbmRlciB0aGUgcGFuZSB0byBpdHMgY29udGFpbmVyIGVsZW1lbnQuXHJcblx0ICovXHJcblx0cHVibGljIGFic3RyYWN0IGRpc3BsYXkoKTogdm9pZDtcclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGVkIHRvIGRpc3BsYXkgdGhlIGNvbnRyb2xzIGZvciB0aGUgcGFuZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZGlzcGxheUNvbnRyb2xzKCk6IHZvaWQge31cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGVkIHdoZW4gdGhlIHBhbmUgaXMgY3JlYXRlZCBhbmQgYXR0YWNoZWQgdG8gdGhlIHNldHRpbmcgdGFiLCBidXQgYmVmb3JlIHtAbGluayBkaXNwbGF5fSBpcyBjYWxsZWQuXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIG9uUmVhZHkoKTogdm9pZCB7fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgcGFuZSBpcyByZW1vdmVkIGFuZCByZWFkeSB0byBiZSBkZXN0cm95ZWQuXHJcblx0ICogQW55IGltcG9ydGFudCBzZXR0aW5ncyBzaG91bGQgYmUgc2F2ZWQgaGVyZS5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjYW5jZWxsZWQgSWYgdHJ1ZSwgdGhlIHVzZXIgY2xvc2VkIHRoZSBwYW5lIHdpdGggdGhlIGVzY2FwZSBrZXkuXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIG9uQ2xvc2UoY2FuY2VsbGVkOiBib29sZWFuKTogdm9pZCB7fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxsZWQgdG8gc2F2ZSB0aGUgc3RhdGUgb2YgdGhlIHNldHRpbmcgcGFuZS5cclxuXHQgKiBUaGlzIGlzIHVzZWQgZm9yIHN1c3BlbmRpbmcgYSBwYW5lIHdoZW4gYW5vdGhlciBwYW5lIGNvdmVycyBpdCB1cC5cclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIFRoZSBzYXZlZCBzdGF0ZS5cclxuXHQgKi9cclxuXHRwcm90ZWN0ZWQgc3VzcGVuZFN0YXRlKCk6IFMge1xyXG5cdFx0cmV0dXJuIHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxsZWQgdG8gbG9hZCB0aGUgc3RhdGUgb2YgdGhlIHNldHRpbmcgcGFuZS5cclxuXHQgKiBUaGlzIGlzIGNhbGxlZCBiZWZvcmUge0BsaW5rIGRpc3BsYXl9LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byByZXN0b3JlLlxyXG5cdCAqL1xyXG5cdHByb3RlY3RlZCByZXN0b3JlU3RhdGUoc3RhdGU6IFMpOiB2b2lkIHt9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHR5cGUgZm9yIGEge0BsaW5rIFVJUGFuZX0sIGJ1dCB3aXRoIGFsbCBwcm9wZXJ0aWVzIGV4cG9zZWQgYW5kIHdyaXRhYmxlLlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmV4cG9ydCB0eXBlIFVJUGFuZV9GUklFTkQ8UyA9IHVua25vd24+ID0ge1xyXG5cdC1yZWFkb25seSBba2V5IGluIGtleW9mIFVJUGFuZTxTPl06IFVJUGFuZTxTPltrZXldO1xyXG59ICYge1xyXG5cdG5hdjogVUlQYW5lPFM+WyduYXYnXSB8IHVuZGVmaW5lZDtcclxuXHRjb250YWluZXJFbDogVUlQYW5lPFM+Wydjb250YWluZXJFbCddIHwgdW5kZWZpbmVkO1xyXG5cdGNvbnRyb2xzRWw6IFVJUGFuZTxTPlsnY29udHJvbHNFbCddIHwgdW5kZWZpbmVkO1xyXG5cdG9uUmVhZHk6IFVJUGFuZTxTPlsnb25SZWFkeSddO1xyXG5cdG9uQ2xvc2U6IFVJUGFuZTxTPlsnb25DbG9zZSddO1xyXG5cdHN1c3BlbmRTdGF0ZTogVUlQYW5lPFM+WydzdXNwZW5kU3RhdGUnXTtcclxuXHRyZXN0b3JlU3RhdGU6IFVJUGFuZTxTPlsncmVzdG9yZVN0YXRlJ107XHJcbn07XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gU3R5bGVzOlxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gQSBjZW50ZXJlZCBib3ggdG8gaGVscCBkaXNwbGF5IGhlbHAgbWVzc2FnZXMgZm9yIGVtcHR5IHNlYXJjaGVzLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1jZW50ZXJib3gge1xyXG5cdFx0d2lkdGg6IDEwMCU7XHJcblx0XHRoZWlnaHQ6IDEwMCU7XHJcblxyXG5cdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcblx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xyXG5cdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblx0fVxyXG5cclxuXHQvLyBJbXByb3ZlIGZvcm0gVVguXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXBhbmUge1xyXG5cdFx0Ly8gTWFrZSBkaXNhYmxlZCBidXR0b25zIGxvb2sgZGlzYWJsZWQuXHJcblx0XHRidXR0b25bZGlzYWJsZWRdIHtcclxuXHRcdFx0Ym94LXNoYWRvdzogbm9uZTtcclxuXHRcdFx0YmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcclxuXHJcblx0XHRcdCY6aG92ZXIge1xyXG5cdFx0XHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XHJcblx0XHRcdFx0Y3Vyc29yOiBub3QtYWxsb3dlZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlucHV0W3R5cGU9J2NvbG9yJ11bZGlzYWJsZWRdIHtcclxuXHRcdFx0Y3Vyc29yOiBub3QtYWxsb3dlZDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYWtlIGludmFsaWQgdGV4dCBib3hlcyBsb29rIGludmFsaWQuXHJcblx0XHRpbnB1dDppbnZhbGlkOm5vdCg6cGxhY2Vob2xkZXItc2hvd24pIHtcclxuXHRcdFx0Ym9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJbXByb3ZlIGNvbG9yIHBpY2tlciBVWCBvbiBtb2JpbGUuXHJcblx0XHRib2R5LmlzLXBob25lICYgaW5wdXRbdHlwZT0nY29sb3InXTo6LXdlYmtpdC1jb2xvci1zd2F0Y2gge1xyXG5cdFx0XHRib3JkZXItcmFkaXVzOiB2YXIoLS1idXR0b24tcmFkaXVzKTtcclxuXHRcdFx0Ym9yZGVyOiAjZjAwIDJweCBzb2xpZDtcclxuXHRcdFx0Ym9yZGVyOiAxcHggc29saWQgdmFyKC0tY2hlY2tib3gtYm9yZGVyLWNvbG9yKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYWtlIGNsaWNrYWJsZSBpY29ucyB3aXRoICdtb2Qtd2FybmluZycgbm90IHNvbGlkLlxyXG5cdFx0LmNsaWNrYWJsZS1pY29uLm1vZC13YXJuaW5nIHtcclxuXHRcdFx0Y29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xyXG5cdFx0XHRiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuXHRcdFx0Jjpob3ZlciB7XHJcblx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xyXG5cdFx0XHRcdGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBNYWtlIGNsaWNrYWJsZSBpY29ucyBub3QgdG9vIGxhcmdlIG9uIG1vYmlsZS5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItY29udGVudCAuc2V0dGluZy1pdGVtLWNvbnRyb2wsXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRyb2xzIHtcclxuXHRcdGJvZHkuaXMtcGhvbmUgJiBidXR0b24uY2xpY2thYmxlLWljb24ge1xyXG5cdFx0XHR3aWR0aDogdmFyKC0tYnV0dG9uLWhlaWdodCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBNYWtlIGNsaWNrYWJsZSBpY29ucyBpbiBzZXR0aW5nIHBhbmVzIG1vcmUgdmlzaWJsZSBvbiBtb2JpbGUuXHJcblx0Ym9keS5pcy1waG9uZSAuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItY29udGVudCAuc2V0dGluZy1pdGVtLWNvbnRyb2wgYnV0dG9uLmNsaWNrYWJsZS1pY29uIHtcclxuXHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNoZWNrYm94LWJvcmRlci1jb2xvcik7XHJcblxyXG5cdFx0Ji5jYWxsb3V0bWFuYWdlci1zZXR0aW5nLXNldCB7XHJcblx0XHRcdC8vIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IENvbXBvbmVudCwgZ2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IENhbGxvdXRJRCB9IGZyb20gJyZjYWxsb3V0JztcclxuaW1wb3J0IHsgUkdCIH0gZnJvbSAnJmNvbG9yJztcclxuXHJcbmNvbnN0IE5PX0FUVEFDSCA9IFN5bWJvbCgpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcmV2aWV3T3B0aW9ucyB7XHJcblx0LyoqXHJcblx0ICogVGhlIGNhbGxvdXQgSUQuXHJcblx0ICovXHJcblx0aWQ6IENhbGxvdXRJRDtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGljb24gdG8gZGlzcGxheSBpbiB0aGUgY2FsbG91dC5cclxuXHQgKiBUaGlzIHNob3VsZCBiZSBrbm93biBpbiBhZHZhbmNlLlxyXG5cdCAqL1xyXG5cdGljb246IHN0cmluZztcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGNvbG9yIG9mIHRoZSBjYWxsb3V0LlxyXG5cdCAqL1xyXG5cdGNvbG9yPzogUkdCO1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgdGl0bGUgdG8gc2hvdy5cclxuXHQgKiBUaGUgY2FsbG91dCBJRCB3aWxsIGJlIHVzZWQgaWYgdGhpcyBpcyBvbWl0dGVkLlxyXG5cdCAqL1xyXG5cdHRpdGxlPzogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHwgc3RyaW5nIHwgKCh0aXRsZUVsOiBIVE1MRWxlbWVudCkgPT4gdW5rbm93bik7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBjb250ZW50IHRvIHNob3cuXHJcblx0ICovXHJcblx0Y29udGVudD86IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCB8IHN0cmluZyB8ICgoY29udGVudEVsOiBIVE1MRWxlbWVudCkgPT4gdW5rbm93bik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGNvbXBvbmVudCB0aGF0IGRpc3BsYXlzIGEgcHJldmlldyBvZiBhIGNhbGxvdXQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2FsbG91dFByZXZpZXdDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdHB1YmxpYyByZWFkb25seSBjYWxsb3V0RWw6IEhUTUxFbGVtZW50O1xyXG5cdHB1YmxpYyByZWFkb25seSBjb250ZW50RWw6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cdHB1YmxpYyByZWFkb25seSB0aXRsZUVsOiBIVE1MRWxlbWVudDtcclxuXHRwdWJsaWMgcmVhZG9ubHkgaWNvbkVsOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCB8IHR5cGVvZiBOT19BVFRBQ0gsIG9wdGlvbnM6IFByZXZpZXdPcHRpb25zKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0Y29uc3QgeyBjb2xvciwgaWNvbiwgaWQsIHRpdGxlLCBjb250ZW50IH0gPSBvcHRpb25zO1xyXG5cclxuXHRcdGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG5cdFx0Ly8gQnVpbGQgdGhlIGNhbGxvdXQuXHJcblx0XHRjb25zdCBjYWxsb3V0RWwgPSAodGhpcy5jYWxsb3V0RWwgPSBmcmFnLmNyZWF0ZURpdih7IGNsczogWydjYWxsb3V0JywgJ2NhbGxvdXRtYW5hZ2VyLXByZXZpZXcnXSB9KSk7XHJcblx0XHRjb25zdCB0aXRsZUVsQ29udGFpbmVyID0gY2FsbG91dEVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXQtdGl0bGUnIH0pO1xyXG5cdFx0dGhpcy5pY29uRWwgPSB0aXRsZUVsQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXQtaWNvbicgfSk7XHJcblx0XHRjb25zdCB0aXRsZUVsID0gKHRoaXMudGl0bGVFbCA9IHRpdGxlRWxDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dC10aXRsZS1pbm5lcicgfSkpO1xyXG5cdFx0Y29uc3QgY29udGVudEVsID0gKHRoaXMuY29udGVudEVsID1cclxuXHRcdFx0Y29udGVudCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogY2FsbG91dEVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXQtY29udGVudCcgfSkpO1xyXG5cclxuXHRcdHRoaXMuc2V0SWNvbihpY29uKTtcclxuXHRcdHRoaXMuc2V0Q29sb3IoY29sb3IpO1xyXG5cdFx0dGhpcy5zZXRDYWxsb3V0SUQoaWQpO1xyXG5cclxuXHRcdC8vIFNldCB0aGUgY2FsbG91dCB0aXRsZS5cclxuXHRcdGlmICh0aXRsZSA9PSBudWxsKSB0aXRsZUVsLnRleHRDb250ZW50ID0gaWQ7XHJcblx0XHRlbHNlIGlmICh0eXBlb2YgdGl0bGUgPT09ICdmdW5jdGlvbicpIHRpdGxlKHRpdGxlRWwpO1xyXG5cdFx0ZWxzZSBpZiAodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykgdGl0bGVFbC50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG5cdFx0ZWxzZSB0aXRsZUVsLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcblx0XHQvLyBTZXQgdGhlIGNhbGxvdXQgY29udGVudHMuXHJcblx0XHRpZiAoY29udGVudEVsICE9IG51bGwpIHtcclxuXHRcdFx0aWYgKHR5cGVvZiBjb250ZW50ID09PSAnZnVuY3Rpb24nKSBjb250ZW50KGNvbnRlbnRFbCk7XHJcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudEVsLnRleHRDb250ZW50ID0gY29udGVudDtcclxuXHRcdFx0ZWxzZSBjb250ZW50RWwuYXBwZW5kQ2hpbGQoY29udGVudCBhcyBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEF0dGFjaCB0byB0aGUgY29udGFpbmVyLlxyXG5cdFx0aWYgKGNvbnRhaW5lckVsICE9IE5PX0FUVEFDSCkge1xyXG5cdFx0XHRDYWxsb3V0UHJldmlld0NvbXBvbmVudC5wcm90b3R5cGUuYXR0YWNoVG8uY2FsbCh0aGlzLCBjb250YWluZXJFbCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBjYWxsb3V0IElELlxyXG5cdCAqIFRoaXMgd2lsbCAqbm90KiBjaGFuZ2UgdGhlIGFwcGVhcmFuY2Ugb2YgdGhlIHByZXZpZXcuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gaWQgVGhlIG5ldyBJRCB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIHNldENhbGxvdXRJRChpZDogc3RyaW5nKTogdHlwZW9mIHRoaXMge1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0RWwgfSA9IHRoaXM7XHJcblx0XHRjYWxsb3V0RWwuc2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQnLCBpZCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoYW5nZXMgdGhlIGNhbGxvdXQgaWNvbi5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBpY29uIFRoZSBJRCBvZiB0aGUgbmV3IGljb24gdG8gdXNlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBzZXRJY29uKGljb246IHN0cmluZyk6IHR5cGVvZiB0aGlzIHtcclxuXHRcdGNvbnN0IHsgaWNvbkVsLCBjYWxsb3V0RWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gQ2hhbmdlIHRoZSBpY29uIHN0eWxlIHZhcmlhYmxlLlxyXG5cdFx0Y2FsbG91dEVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGxvdXQtaWNvbicsIGljb24pO1xyXG5cclxuXHRcdC8vIENsZWFyIHRoZSBpY29uIGVsZW1lbnQgYW5kIGFwcGVuZCB0aGUgU1ZHLlxyXG5cdFx0aWNvbkVsLmVtcHR5KCk7XHJcblx0XHRjb25zdCBpY29uU3ZnID0gZ2V0SWNvbihpY29uKTtcclxuXHRcdGlmIChpY29uU3ZnICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy5pY29uRWwuYXBwZW5kQ2hpbGQoaWNvblN2Zyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBjYWxsb3V0IGNvbG9yLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGNvbG9yIFRoZSBjb2xvciB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIHNldENvbG9yKGNvbG9yOiBSR0IgfCB1bmRlZmluZWQpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb25zdCB7IGNhbGxvdXRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRpZiAoY29sb3IgPT0gbnVsbCkge1xyXG5cdFx0XHRjYWxsb3V0RWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tY2FsbG91dC1jb2xvcicpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHRjYWxsb3V0RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsbG91dC1jb2xvcicsIGAke2NvbG9yLnJ9LCAke2NvbG9yLmd9LCAke2NvbG9yLmJ9YCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEF0dGFjaGVzIHRoZSBjYWxsb3V0IHByZXZpZXcgdG8gYSBET00gZWxlbWVudC5cclxuXHQgKiBUaGlzIHBsYWNlcyBpdCBhdCB0aGUgZW5kIG9mIHRoZSBlbGVtZW50LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGNvbnRhaW5lckVsIFRoZSBjb250YWluZXIgdG8gYXR0YWNoIHRvLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhdHRhY2hUbyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb250YWluZXJFbC5hcHBlbmRDaGlsZCh0aGlzLmNhbGxvdXRFbCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlc2V0cyB0aGUgYC0tY2FsbG91dC1jb2xvcmAgYW5kIGAtLWNhbGxvdXQtaWNvbmAgQ1NTIHByb3BlcnRpZXMgYWRkZWQgdG8gdGhlIGNhbGxvdXQgZWxlbWVudC5cclxuXHQgKi9cclxuXHRwdWJsaWMgcmVzZXRTdHlsZVByb3BlcnR5T3ZlcnJpZGVzKCkge1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0RWwgfSA9IHRoaXM7XHJcblx0XHRjYWxsb3V0RWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tY2FsbG91dC1jb2xvcicpO1xyXG5cdFx0Y2FsbG91dEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWNhbGxvdXQtaWNvbicpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJc29sYXRlZFByZXZpZXdPcHRpb25zIGV4dGVuZHMgUHJldmlld09wdGlvbnMge1xyXG5cdGNvbG9yU2NoZW1lOiAnZGFyaycgfCAnbGlnaHQnO1xyXG5cclxuXHRmb2N1c2VkPzogYm9vbGVhbjtcclxuXHR2aWV3VHlwZT86ICdzb3VyY2UnIHwgJ3JlYWRpbmcnO1xyXG5cdGNzc0Vscz86IChIVE1MU3R5bGVFbGVtZW50IHwgSFRNTExpbmtFbGVtZW50KVtdO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gaXNvbGF0ZWQgY2FsbG91dCBwcmV2aWV3LlxyXG4gKlxyXG4gKiBUaGlzIHVzZXMgdGhlIFNoYWRvdyBET00gdG8gY3JlYXRlIGEgZnVsbCBET00gZm9yIHRoZSBjYWxsb3V0LCBhbmQgYWxsb3dzIGZvciBjdXN0b20gc3R5bGVzIHRvIGJlIHVzZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSXNvbGF0ZWRDYWxsb3V0UHJldmlld0NvbXBvbmVudCBleHRlbmRzIENhbGxvdXRQcmV2aWV3Q29tcG9uZW50IHtcclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgc3R5bGVFbHM6IEhUTUxTdHlsZUVsZW1lbnRbXTtcclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgc2hhZG93Qm9keTogSFRNTEJvZHlFbGVtZW50O1xyXG5cdHByb3RlY3RlZCByZWFkb25seSBzaGFkb3dIZWFkOiBIVE1MSGVhZEVsZW1lbnQ7XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IHNoYWRvd0hvc3RFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IHNoYWRvd1Jvb3Q6IFNoYWRvd1Jvb3Q7XHJcblxyXG5cdHB1YmxpYyByZWFkb25seSBjdXN0b21TdHlsZUVsOiBIVE1MU3R5bGVFbGVtZW50O1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBJc29sYXRlZFByZXZpZXdPcHRpb25zKSB7XHJcblx0XHRzdXBlcihOT19BVFRBQ0gsIG9wdGlvbnMpO1xyXG5cclxuXHRcdGNvbnN0IGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblx0XHRjb25zdCBmb2N1c2VkID0gb3B0aW9ucy5mb2N1c2VkID8/IGZhbHNlO1xyXG5cdFx0Y29uc3QgY29sb3JTY2hlbWUgPSBvcHRpb25zLmNvbG9yU2NoZW1lO1xyXG5cdFx0Y29uc3QgcmVhZGluZ1ZpZXcgPSAob3B0aW9ucy52aWV3VHlwZSA/PyAncmVhZGluZycpID09PSAncmVhZGluZyc7XHJcblx0XHRjb25zdCBjc3NFbHMgPSBvcHRpb25zPy5jc3NFbHMgPz8gZ2V0Q3VycmVudFN0eWxlcyhjb250YWluZXJFbD8uZG9jKTtcclxuXHJcblx0XHQvLyBDcmVhdGUgYSBzaGFkb3cgZG9tLlxyXG5cdFx0Y29uc3Qgc2hhZG93SG9zdEVsID0gKHRoaXMuc2hhZG93SG9zdEVsID0gZnJhZy5jcmVhdGVEaXYoKSk7XHJcblx0XHRjb25zdCBzaGFkb3dSb290ID0gKHRoaXMuc2hhZG93Um9vdCA9IHNoYWRvd0hvc3RFbC5hdHRhY2hTaGFkb3coeyBkZWxlZ2F0ZXNGb2N1czogZmFsc2UsIG1vZGU6ICdjbG9zZWQnIH0pKTtcclxuXHRcdGNvbnN0IHNoYWRvd0hlYWQgPSAodGhpcy5zaGFkb3dIZWFkID0gc2hhZG93Um9vdC5jcmVhdGVFbCgnaGVhZCcpKTtcclxuXHRcdGNvbnN0IHNoYWRvd0JvZHkgPSAodGhpcy5zaGFkb3dCb2R5ID0gc2hhZG93Um9vdC5jcmVhdGVFbCgnYm9keScpKTtcclxuXHJcblx0XHQvLyBDb3B5IHRoZSBzdHlsZXMgaW50byB0aGUgc2hhZG93IGhlYWQuXHJcblx0XHRjb25zdCBzdHlsZUVscyA9ICh0aGlzLnN0eWxlRWxzID0gW10gYXMgSFRNTFN0eWxlRWxlbWVudFtdKTtcclxuXHRcdGZvciAoY29uc3QgY3NzRWwgb2YgY3NzRWxzKSB7XHJcblx0XHRcdGNvbnN0IGNzc0VsQ2xvbmUgPSBjc3NFbC5jbG9uZU5vZGUodHJ1ZSk7XHJcblx0XHRcdGlmIChjc3NFbC50YWdOYW1lID09PSAnU1RZTEUnKSB7XHJcblx0XHRcdFx0c3R5bGVFbHMucHVzaChjc3NFbENsb25lIGFzIEhUTUxTdHlsZUVsZW1lbnQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzaGFkb3dIZWFkLmFwcGVuZENoaWxkKGNzc0VsQ2xvbmUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBzdHlsZXMgdG8gcmVzZXQgYWxsIHByb3BlcnRpZXMgb24gZXZlcnl0aGluZyBhYm92ZSB0aGUgY2FsbG91dC5cclxuXHRcdC8vXHJcblx0XHQvLyBUaGlzIGlzIHNvIHdlIGNhbiBrZWVwIHRoZSBzZWxlY3RvcnMgY29uc2lzdGVudCBiZXR3ZWVuIHJlYWwgT2JzaWRpYW4gYW5kIG91ciBmYWtlIG9uZSwgd2l0aG91dFxyXG5cdFx0Ly8gaGF2aW5nIHRob3NlIGVsZW1lbnRzIGFmZmVjdCB0aGUgZGlzcGxheSBvZiB0aGUgY2FsbG91dCBpdHNlbGYuXHJcblx0XHRzaGFkb3dIZWFkLmNyZWF0ZUVsKCdzdHlsZScsIHsgdGV4dDogU0hBRE9XX0RPTV9SRVNFVF9TVFlMRVMgfSk7XHJcblxyXG5cdFx0Ly8gQWRkIGEgY3VzdG9tIHN0eWxlIGVsZW1lbnQuXHJcblx0XHR0aGlzLmN1c3RvbVN0eWxlRWwgPSBzaGFkb3dIZWFkLmNyZWF0ZUVsKCdzdHlsZScsIHsgYXR0cjogeyAnZGF0YS1jdXN0b20tc3R5bGVzJzogJ3RydWUnIH0gfSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgZmFrZSBET00gdHJlZSBpbnNpZGUgdGhlIHNoYWRvdyBib2R5IHRvIGhvc3QgdGhlIGNhbGxvdXQuXHJcblx0XHRzaGFkb3dCb2R5LmNsYXNzTGlzdC5hZGQoYHRoZW1lLSR7Y29sb3JTY2hlbWV9YCwgJ29ic2lkaWFuLWFwcCcpO1xyXG5cdFx0Y29uc3Qgdmlld0NvbnRlbnRFbCA9IHNoYWRvd0JvZHlcclxuXHRcdFx0LmNyZWF0ZURpdih7IGNsczogJ2FwcC1jb250YWluZXInIH0pXHJcblx0XHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdob3Jpem9udGFsLW1haW4tY29udGFpbmVyJyB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnd29ya3NwYWNlJyB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnd29ya3NwYWNlLXNwbGl0IG1vZC1yb290JyB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiBgd29ya3NwYWNlLXRhYnMgJHtmb2N1c2VkID8gJ21vZC1hY3RpdmUnIDogJyd9YCB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnd29ya3NwYWNlLXRhYi1jb250YWluZXInIH0pXHJcblx0XHRcdC5jcmVhdGVEaXYoeyBjbHM6IGB3b3Jrc3BhY2UtbGVhZiAke2ZvY3VzZWQgPyAnbW9kLWFjdGl2ZScgOiAnJ31gIH0pXHJcblx0XHRcdC5jcmVhdGVEaXYoeyBjbHM6ICd3b3Jrc3BhY2UtbGVhZi1jb250ZW50JyB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiAndmlldy1jb250ZW50JyB9KTtcclxuXHJcblx0XHRjb25zdCBjYWxsb3V0UGFyZW50RWwgPSByZWFkaW5nVmlld1xyXG5cdFx0XHQ/IGNyZWF0ZVJlYWRpbmdWaWV3Q29udGFpbmVyKHZpZXdDb250ZW50RWwpXHJcblx0XHRcdDogY3JlYXRlTGl2ZVZpZXdDb250YWluZXIodmlld0NvbnRlbnRFbCk7XHJcblxyXG5cdFx0Y2FsbG91dFBhcmVudEVsLmFwcGVuZENoaWxkKHRoaXMuY2FsbG91dEVsKTtcclxuXHJcblx0XHQvLyBBdHRhY2ggdG8gdGhlIGNvbnRhaW5lci5cclxuXHRcdGlmIChjb250YWluZXJFbCAhPSBudWxsKSB7XHJcblx0XHRcdElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaFRvLmNhbGwodGhpcywgY29udGFpbmVyRWwpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVwbGFjZXMgdGhlIGA8c3R5bGU+YCBlbGVtZW50cyB1c2VkIGJ5IHRoZSBpc29sYXRlZCBjYWxsb3V0IHByZXZpZXcgd2l0aCB0aGUgbGF0ZXN0IG9uZXMuXHJcblx0ICovXHJcblx0cHVibGljIHVwZGF0ZVN0eWxlcygpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRyZXR1cm4gdGhpcy51cGRhdGVTdHlsZXNXaXRoKFxyXG5cdFx0XHRnZXRDdXJyZW50U3R5bGVzKHRoaXMuc2hhZG93SG9zdEVsLmRvYylcclxuXHRcdFx0XHQuZmlsdGVyKChlKSA9PiBlLnRhZ05hbWUgPT09ICdTVFlMRScpXHJcblx0XHRcdFx0Lm1hcCgoZSkgPT4gZS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFN0eWxlRWxlbWVudCksXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVwbGFjZXMgdGhlIGA8c3R5bGU+YCBlbGVtZW50cyB1c2VkIGJ5IHRoZSBpc29sYXRlZCBjYWxsb3V0IHByZXZpZXcuXHJcblx0ICogVGhpcyBjYW4gYmUgdXNlZCB0byB1cGRhdGUgdGhlIHByZXZpZXcgd2l0aCB0aGUgbGF0ZXN0IHN0eWxlcy5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBzdHlsZUVscyBUaGUgbmV3IHN0eWxlIGVsZW1lbnRzIHRvIHVzZS4gVGhlc2Ugd2lsbCAqbm90KiBiZSBjbG9uZWQuXHJcblx0ICovXHJcblx0cHVibGljIHVwZGF0ZVN0eWxlc1dpdGgoc3R5bGVFbHM6IEhUTUxTdHlsZUVsZW1lbnRbXSk6IHR5cGVvZiB0aGlzIHtcclxuXHRcdGNvbnN0IHsgc3R5bGVFbHM6IG9sZFN0eWxlRWxzLCBjdXN0b21TdHlsZUVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdC8vIFJlcGxhY2UgdGhlIHN0eWxlcy5cclxuXHRcdGxldCBpLCBlbmQ7XHJcblx0XHRsZXQgbGFzdE5vZGUgPSBjdXN0b21TdHlsZUVsLnByZXZpb3VzU2libGluZyBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGZvciAoaSA9IDAsIGVuZCA9IE1hdGgubWluKHN0eWxlRWxzLmxlbmd0aCwgb2xkU3R5bGVFbHMubGVuZ3RoKTsgaSA8IGVuZDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGVsID0gc3R5bGVFbHNbaV07XHJcblx0XHRcdG9sZFN0eWxlRWxzW2ldLnJlcGxhY2VXaXRoKGVsKTtcclxuXHRcdFx0bGFzdE5vZGUgPSBlbDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgc3R5bGVzIHRoYXQgZGlkbid0IGhhdmUgYW55d2hlcmUgdG8gZ28uXHJcblx0XHRmb3IgKGVuZCA9IHN0eWxlRWxzLmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGVsID0gc3R5bGVFbHNbaV07XHJcblx0XHRcdGxhc3ROb2RlLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBlbCk7XHJcblx0XHRcdG9sZFN0eWxlRWxzLnB1c2goZWwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlbW92ZSBleHRyYSBzdHlsZXMuXHJcblx0XHRjb25zdCB0b1JlbW92ZSA9IG9sZFN0eWxlRWxzLnNwbGljZShpLCBvbGRTdHlsZUVscy5sZW5ndGggLSBpKTtcclxuXHRcdGZvciAoY29uc3Qgbm9kZSBvZiB0b1JlbW92ZSkge1xyXG5cdFx0XHRub2RlLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlcyBtYXRjaGluZyBzdHlsZSBlbGVtZW50cy5cclxuXHQgKiBAcGFyYW0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uIElmIGl0IHJldHVybnMgdHJ1ZSwgdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZC5cclxuXHQgKi9cclxuXHRwdWJsaWMgcmVtb3ZlU3R5bGVzKHByZWRpY2F0ZTogKGVsOiBIVE1MU3R5bGVFbGVtZW50KSA9PiBib29sZWFuKSB7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3R5bGVFbHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgZWwgPSB0aGlzLnN0eWxlRWxzW2ldO1xyXG5cdFx0XHRpZiAocHJlZGljYXRlKGVsKSkge1xyXG5cdFx0XHRcdGVsLnJlbW92ZSgpO1xyXG5cdFx0XHRcdHRoaXMuc3R5bGVFbHMuc3BsaWNlKGksIDEpO1xyXG5cdFx0XHRcdGktLTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgY29sb3Igc2NoZW1lLlxyXG5cdCAqIEBwYXJhbSBjb2xvclNjaGVtZSBUaGUgY29sb3Igc2NoZW1lIHRvIHVzZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgc2V0Q29sb3JTY2hlbWUoY29sb3JTY2hlbWU6ICdkYXJrJyB8ICdsaWdodCcpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb25zdCB7IGNsYXNzTGlzdCB9ID0gdGhpcy5zaGFkb3dCb2R5O1xyXG5cdFx0Y2xhc3NMaXN0LnRvZ2dsZSgndGhlbWUtZGFyaycsIGNvbG9yU2NoZW1lID09PSAnZGFyaycpO1xyXG5cdFx0Y2xhc3NMaXN0LnRvZ2dsZSgndGhlbWUtbGlnaHQnLCBjb2xvclNjaGVtZSA9PT0gJ2xpZ2h0Jyk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEF0dGFjaGVzIHRoZSBjYWxsb3V0IHByZXZpZXcgdG8gYSBET00gZWxlbWVudC5cclxuXHQgKiBUaGlzIHBsYWNlcyBpdCBhdCB0aGUgZW5kIG9mIHRoZSBlbGVtZW50LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGNvbnRhaW5lckVsIFRoZSBjb250YWluZXIgdG8gYXR0YWNoIHRvLlxyXG5cdCAqIEBvdmVycmlkZVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhdHRhY2hUbyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb250YWluZXJFbC5hcHBlbmRDaGlsZCh0aGlzLnNoYWRvd0hvc3RFbCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBjdXJyZW50bHktYXBwbGllZCBPYnNpZGlhbiBzdHlsZXNoZWV0cyBhbmQgc3R5bGVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZG9jIFRoZSBkb2N1bWVudCB0byB0YWtlIHRoZSBzdHlsZXMgZnJvbS5cclxuICogQHJldHVybnMgQW4gYXJyYXkgb2YgKip1bmNsb25lZCoqIGBzdHlsZWAgYW5kIGBsaW5rYCBub2Rlcy5cclxuICovXHJcbmZ1bmN0aW9uIGdldEN1cnJlbnRTdHlsZXMoZG9jPzogRG9jdW1lbnQpOiBBcnJheTxIVE1MU3R5bGVFbGVtZW50IHwgSFRNTExpbmtFbGVtZW50PiB7XHJcblx0Y29uc3QgZWxzOiBBcnJheTxIVE1MU3R5bGVFbGVtZW50IHwgSFRNTExpbmtFbGVtZW50PiA9IFtdO1xyXG5cdGxldCBub2RlID0gKGRvYyA/PyB3aW5kb3cuZG9jdW1lbnQpLmhlYWQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblx0Zm9yICg7IG5vZGUgIT0gbnVsbDsgbm9kZSA9IG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nKSB7XHJcblx0XHRjb25zdCBub2RlVGFnID0gbm9kZS50YWdOYW1lO1xyXG5cdFx0aWYgKG5vZGVUYWcgPT09ICdTVFlMRScgfHwgKG5vZGVUYWcgPT09ICdMSU5LJyAmJiBub2RlLmdldEF0dHJpYnV0ZSgncmVsJyk/LnRvTG93ZXJDYXNlKCkgPT09ICdzdHlsZXNoZWV0JykpIHtcclxuXHRcdFx0ZWxzLnB1c2gobm9kZSBhcyBIVE1MU3R5bGVFbGVtZW50IHwgSFRNTExpbmtFbGVtZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGVscztcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIE9ic2lkaWFuIHJlYWRpbmcgdmlldy5cclxuICogQSBjYWxsb3V0IHBsYWNlZCB3aXRoaW4gdGhlIHJldHVybmVkIGNvbnRhaW5lciB3aWxsIGFjdCBhcyB0aG91Z2ggaXQgaXMgaW5zaWRlIGEgTWFya2Rvd24gZG9jdW1lbnQncyByZWFkaW5nIHZpZXcuXHJcbiAqXHJcbiAqIEBwYXJhbSB2aWV3Q29udGVudEVsIFRoZSBgLnZpZXctY29udGVudGAgY29udGFpbmVyIGVsZW1lbnQuXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRvIGF0dGFjaCBhIGNhbGxvdXQgdG8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSZWFkaW5nVmlld0NvbnRhaW5lcih2aWV3Q29udGVudEVsOiBIVE1MRGl2RWxlbWVudCk6IEhUTUxEaXZFbGVtZW50IHtcclxuXHQvLyBkaXYubWFya2Rvd24tcmVhZGluZy12aWV3IGRpdi5tYXJrZG93bi1wcmV2aWV3LXZpZS5tYXJrZG93bi1yZW5kZXJlZCAubWFya2Rvd24tcHJldmlldy1zZWN0aW9uXHJcblx0Ly8gZGl2IGRpdi5jYWxsb3V0W2RhdGEtY2FsbG91dF1cclxuXHRyZXR1cm4gdmlld0NvbnRlbnRFbFxyXG5cdFx0LmNyZWF0ZURpdih7IGNsczogJ21hcmtkb3duLXJlYWRpbmctdmlldycgfSlcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdtYXJrZG93bi1wcmV2aWV3LXZpZXcgbWFya2Rvd24tcmVuZGVyZWQnIH0pXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnbWFya2Rvd24tcHJldmlldy1zZWN0aW9uJyB9KVxyXG5cdFx0LmNyZWF0ZURpdigpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgT2JzaWRpYW4gbGl2ZSBlZGl0b3Igdmlldy5cclxuICogQSBjYWxsb3V0IHBsYWNlZCB3aXRoaW4gdGhlIHJldHVybmVkIGNvbnRhaW5lciB3aWxsIGFjdCBhcyB0aG91Z2ggaXQgaXMgaW5zaWRlIGEgTWFya2Rvd24gZG9jdW1lbnQncyBDb2RlTWlycm9yIGVkaXRvci5cclxuICpcclxuICogQHBhcmFtIHZpZXdDb250ZW50RWwgVGhlIGAudmlldy1jb250ZW50YCBjb250YWluZXIgZWxlbWVudC5cclxuICogQHJldHVybnMgQSBjb250YWluZXIgdG8gYXR0YWNoIGEgY2FsbG91dCB0by5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUxpdmVWaWV3Q29udGFpbmVyKHZpZXdDb250ZW50RWw6IEhUTUxEaXZFbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xyXG5cdC8vIGRpdi5tYXJrZG93bi1zb3VyY2Utdmlldy5jbS1zLW9ic2lkaWFuLm1vZC1jbTYuaXMtbGl2ZS1wcmV2aWV3IGRpdi5jbS1lZGl0b3IuzbwxLs28Mi7NvHEgZGl2LmNtLXNjcm9sbGVyXHJcblx0Ly8gZGl2LmNtLXNpemVyIGRpdi5jbS1jb250ZW50Q29udGFpbmVyIGRpdi5jbS1jb250ZW50IGRpdi5jbS1lbWJlZC1ibG9jay5tYXJrZG93bi1yZW5kZXJlZC5jbS1jYWxsb3V0XHJcblx0cmV0dXJuIHZpZXdDb250ZW50RWxcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdtYXJrZG93bi1zb3VyY2UtdmlldyBjbS1zLW9ic2lkaWFuIG1vZC1jbTYgaXMtbGl2ZS1wcmV2aWV3JyB9KVxyXG5cdFx0LmNyZWF0ZURpdih7IGNsczogJ2NtLWVkaXRvciDNvDEgzbwyIM28cScgfSlcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdjbS1zY3JvbGxlcicgfSlcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdjbS1zaXplcicgfSlcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdjbS1jb250ZW50Q29udGFpbmVyJyB9KVxyXG5cdFx0LmNyZWF0ZURpdih7IGNsczogJ2NtLWNvbnRlbnQnIH0pXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnY20tZW1iZWQtYmxvY2sgbWFya2Rvd24tcmVuZGVyZWQgY20tY2FsbG91dCcgfSk7XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBTdHlsZXM6XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQvLyBSZXNldCB0aGUgYmxlbmQgbW9kZSBvZiB0aGUgcHJldmlldy5cclxuXHQvLyBUaGUgcmVuZGVyaW5nIG9mIHRoZSBjYWxsb3V0cyB3aWxsIGJlIGJyb2tlbiB1bmxlc3MgdGhpcyBpcyByZXNldC5cclxuXHQuY2FsbG91dC5jYWxsb3V0bWFuYWdlci1wcmV2aWV3IHtcclxuXHRcdG1peC1ibGVuZC1tb2RlOiB1bnNldCAhaW1wb3J0YW50O1xyXG5cdFx0bWFyZ2luOiAwICFpbXBvcnRhbnQ7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItcHJldmlldy1jb250YWluZXIge1xyXG5cdFx0bWFyZ2luLXRvcDogMC41ZW07XHJcblx0XHRtYXJnaW4tYm90dG9tOiAwLjVlbTtcclxuXHR9XHJcbmA7XHJcblxyXG5jb25zdCBTSEFET1dfRE9NX1JFU0VUX1NUWUxFUyA9IGBcclxuLyogUmVzZXQgbGF5b3V0IGFuZCBzdHlsaW5ncyBmb3IgYWxsIHByb3BlcnRpZXMgdXAgdG8gdGhlIGNhbGxvdXQuICovXHJcbi5hcHAtY29udGFpbmVyLFxyXG4uaG9yaXpvbnRhbC1tYWluLWNvbnRhaW5lcixcclxuLndvcmtzcGFjZSxcclxuLndvcmtzcGFjZS1zcGxpdCxcclxuLndvcmtzcGFjZS10YWJzLFxyXG4ud29ya3NwYWNlLXRhYi1jb250YWluZXIsXHJcbi53b3Jrc3BhY2UtbGVhZixcclxuLndvcmtzcGFjZS1sZWFmLWNvbnRlbnQsXHJcbi52aWV3LWNvbnRlbnQsXHJcbi5tYXJrZG93bi1yZWFkaW5nLXZpZXcsXHJcbi5tYXJrZG93bi1zb3VyY2UtdmlldyxcclxuLmNtLWVkaXRvci7NvDEuzbwyLs28cSxcclxuLmNtLWVkaXRvci7NvDEuzbwyLs28cSA+IC5jbS1zY3JvbGxlcixcclxuLmNtLXNpemVyLFxyXG4uY20tY29udGVudENvbnRhaW5lcixcclxuLmNtLWNvbnRlbnQsXHJcbi5tYXJrZG93bi1wcmV2aWV3LXZpZXcge1xyXG5cdGFsbDogaW5pdGlhbCAhaW1wb3J0YW50O1xyXG5cdGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8qIFNldCB0aGUgdGV4dCBjb2xvciBvZiB0aGUgY29udGFpbmVyIGZvciB0aGUgY2FsbG91dC4gKi9cclxuLm1hcmtkb3duLXByZXZpZXctc2VjdGlvbixcclxuLmNtLWNhbGxvdXQge1xyXG5cdGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCkgIWltcG9ydGFudDtcclxufVxyXG5cclxuLyogT3ZlcnJpZGUgbWFyZ2luIG9uIGNhbGxvdXQgdG8ga2VlcCB0aGUgcHJldmlldyBhcyBzbWFsbCBhcyBwb3NzaWJsZS4gKi9cclxuLm1hcmtkb3duLXByZXZpZXctc2VjdGlvbiA+IGRpdiA+IC5jYWxsb3V0LFxyXG4uY20tY2FsbG91dCA+IC5jYWxsb3V0LFxyXG4uY2FsbG91dG1hbmFnZXItcHJldmlldy5jYWxsb3V0IHtcclxuXHRtYXJnaW46IDAgIWltcG9ydGFudDtcclxufVxyXG5cclxuLyogU2V0IHRoZSBmb250IHByb3BlcnRpZXMgb2YgdGhlIGNhbGxvdXQuICovXHJcbi5jbS1jYWxsb3V0LFxyXG4uY2FsbG91dCB7XHJcblx0Zm9udC1zaXplOiB2YXIoLS1mb250LXRleHQtc2l6ZSkgIWltcG9ydGFudDtcclxuXHRmb250LWZhbWlseTogdmFyKC0tZm9udC10ZXh0KSAhaW1wb3J0YW50O1xyXG5cdGxpbmUtaGVpZ2h0OiB2YXIoLS1saW5lLWhlaWdodC1ub3JtYWwpICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8qIFVzZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIGNvbG9yLiAqL1xyXG5ib2R5IHtcclxuXHRiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xyXG59XHJcbmA7XHJcbiIsImltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCwgTWFya2Rvd25WaWV3LCBTZWFyY2hSZXN1bHQsIFRleHRDb21wb25lbnQsIGdldEljb24sIHByZXBhcmVGdXp6eVNlYXJjaCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IENhbGxvdXQgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IGdldENvbG9yRnJvbUNhbGxvdXQsIGdldFRpdGxlRnJvbUNhbGxvdXQgfSBmcm9tICcmY2FsbG91dC1yZXNvbHZlcic7XHJcbmltcG9ydCB7IHRvSFNWIH0gZnJvbSAnJmNvbG9yJztcclxuaW1wb3J0IENhbGxvdXRNYW5hZ2VyUGx1Z2luIGZyb20gJyZwbHVnaW4nO1xyXG5cclxuaW1wb3J0IHsgQ2FsbG91dFByZXZpZXdDb21wb25lbnQgfSBmcm9tICcmdWkvY29tcG9uZW50L2NhbGxvdXQtcHJldmlldyc7XHJcbmltcG9ydCB7IFVJUGFuZSB9IGZyb20gJyZ1aS9wYW5lJztcclxuXHJcbmltcG9ydCB7IENyZWF0ZUNhbGxvdXRQYW5lIH0gZnJvbSAnLi9jcmVhdGUtY2FsbG91dC1wYW5lJztcclxuaW1wb3J0IHsgRWRpdENhbGxvdXRQYW5lIH0gZnJvbSAnLi9lZGl0LWNhbGxvdXQtcGFuZSc7XHJcbmltcG9ydCB7IGNsb3NlU2V0dGluZ3MgfSBmcm9tICdvYnNpZGlhbi1leHRyYS91bnNhZmUnO1xyXG5cclxuLyoqXHJcbiAqIFRoZSB1c2VyIGludGVyZmFjZSBwYW5lIGZvciBjaGFuZ2luZyBDYWxsb3V0IE1hbmFnZXIgc2V0dGluZ3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFuYWdlQ2FsbG91dHNQYW5lIGV4dGVuZHMgVUlQYW5lIHtcclxuXHRwdWJsaWMgcmVhZG9ubHkgdGl0bGUgPSB7IHRpdGxlOiAnQ2FsbG91dHMnLCBzdWJ0aXRsZTogJ01hbmFnZScgfTtcclxuXHRwcml2YXRlIHJlYWRvbmx5IHZpZXdPbmx5OiBib29sZWFuO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbjtcclxuXHJcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nO1xyXG5cdHByaXZhdGUgc2VhcmNoRmlsdGVyOiBudWxsIHwgKChjYWxsb3V0OiBDYWxsb3V0Rm9yU2VhcmNoKSA9PiBTZWFyY2hSZXN1bHQgfCBudWxsKTtcclxuXHRwcml2YXRlIHByZXZpZXdDYWNoZTogQ2FsbG91dEZvclNlYXJjaFtdO1xyXG5cclxuXHRwcml2YXRlIHNlYXJjaEVycm9yRGl2OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHNlYXJjaEVycm9yUXVlcnkhOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKHBsdWdpbjogQ2FsbG91dE1hbmFnZXJQbHVnaW4pIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHJcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gJyc7XHJcblx0XHR0aGlzLnNlYXJjaEZpbHRlciA9IG51bGw7XHJcblx0XHR0aGlzLnByZXZpZXdDYWNoZSA9IFtdO1xyXG5cdFx0dGhpcy52aWV3T25seSA9IGZhbHNlO1xyXG5cclxuXHRcdGNvbnN0IHsgc2VhcmNoRXJyb3JEaXYsIHNlYXJjaEVycm9yUXVlcnkgfSA9IGNyZWF0ZUVtcHR5U2VhcmNoUmVzdWx0RGl2KCk7XHJcblx0XHR0aGlzLnNlYXJjaEVycm9yRGl2ID0gc2VhcmNoRXJyb3JEaXY7XHJcblx0XHR0aGlzLnNlYXJjaEVycm9yUXVlcnkgPSBzZWFyY2hFcnJvclF1ZXJ5O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlIHRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICovXHJcblx0cHVibGljIHNlYXJjaChxdWVyeTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCBzcGxpdCA9IHF1ZXJ5LnNwbGl0KCc6JywgMik7XHJcblx0XHRsZXQgcHJlZml4ID0gJ2lkJyxcclxuXHRcdFx0c2VhcmNoID0gcXVlcnk7XHJcblx0XHRpZiAoc3BsaXQubGVuZ3RoID09PSAyKSB7XHJcblx0XHRcdHByZWZpeCA9IHNwbGl0WzBdO1xyXG5cdFx0XHRzZWFyY2ggPSBzcGxpdFsxXS50cmltKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHRoZSBzZWFyY2ggcGFyYW1ldGVycy5cclxuXHRcdHRoaXMuc2VhcmNoRmlsdGVyID0gdGhpcy5wcmVwYXJlU2VhcmNoKHNlYXJjaCwgcHJlZml4KTtcclxuXHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBxdWVyeTtcclxuXHRcdHRoaXMuc2VhcmNoRXJyb3JRdWVyeS50ZXh0Q29udGVudCA9IHNlYXJjaDtcclxuXHJcblx0XHQvLyBSZWZyZXNoIHRoZSBkaXNwbGF5LlxyXG5cdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcmVwYXJlcyB0aGUgc2VhcmNoIGZpbHRlciBmdW5jdGlvbi5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkuXHJcblx0ICogQHBhcmFtIHF1ZXJ5UHJlZml4IFRoZSBxdWVyeSBwcmVmaXggKHR5cGUgb2YgcXVlcnkpLlxyXG5cdCAqXHJcblx0ICogQHJldHVybnMgVGhlIHNlYXJjaCBmaWx0ZXIgZnVuY3Rpb24uXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIHByZXBhcmVTZWFyY2gocXVlcnk6IHN0cmluZywgcXVlcnlQcmVmaXg6IHN0cmluZyk6IE1hbmFnZUNhbGxvdXRzUGFuZVsnc2VhcmNoRmlsdGVyJ10ge1xyXG5cdFx0Ly8gU2VhcmNoIGBpZDpgIC0tIFNlYXJjaCBieSBJRC5cclxuXHRcdGlmIChxdWVyeVByZWZpeCA9PT0gJ2lkJykge1xyXG5cdFx0XHRjb25zdCBmdXp6eSA9IHByZXBhcmVGdXp6eVNlYXJjaChxdWVyeS50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdFx0cmV0dXJuIChjYWxsb3V0KSA9PiBmdXp6eShjYWxsb3V0LmlkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZWFyY2ggYGljb246YCAtLSBTZWFyY2ggYnkgaWNvbi5cclxuXHRcdGlmIChxdWVyeVByZWZpeCA9PT0gJ2ljb24nKSB7XHJcblx0XHRcdGNvbnN0IGZ1enp5ID0gcHJlcGFyZUZ1enp5U2VhcmNoKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0XHRyZXR1cm4gKGNhbGxvdXQpID0+IGZ1enp5KGNhbGxvdXQuaWNvbi50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZWFyY2ggYGZyb206YCAtLSBTZWFyY2ggYnkgc291cmNlLlxyXG5cdFx0aWYgKHF1ZXJ5UHJlZml4ID09PSAnZnJvbScpIHtcclxuXHRcdFx0Y29uc3QgcXVlcnlMQyA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGNvbnN0IHF1ZXJ5SXNCdWlsdGluID0gcXVlcnlMQyA9PT0gJ29ic2lkaWFuJyB8fCBxdWVyeUxDID09PSAnYnVpbHRpbicgfHwgcXVlcnlMQyA9PT0gJ2J1aWx0LWluJztcclxuXHRcdFx0Y29uc3QgZnV6enkgPSBwcmVwYXJlRnV6enlTZWFyY2gocXVlcnlMQyk7XHJcblxyXG5cdFx0XHRjb25zdCBoYXNTbmlwcGV0V2l0aFF1ZXJ5QXNJZCA9XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uY2FsbG91dHMuc25pcHBldHMua2V5cygpLmZpbmQoKGlkKSA9PiBpZC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeUxDKSAhPT0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0cmV0dXJuIChjYWxsb3V0KSA9PiB7XHJcblx0XHRcdFx0bGV0IHJlc3VsdCA9IG51bGw7XHJcblx0XHRcdFx0aWYgKHF1ZXJ5ID09PSAnJykgcmV0dXJuIHsgbWF0Y2hlczogW10sIHNjb3JlOiAwIH07XHJcblxyXG5cdFx0XHRcdGZvciAoY29uc3Qgc291cmNlIG9mIGNhbGxvdXQuc291cmNlcykge1xyXG5cdFx0XHRcdFx0Ly8gU3BlY2lhbCBjYXNlOiBhbiBleGFjdCBtYXRjaCBvbiB0aGUgc25pcHBldCBJRC5cclxuXHRcdFx0XHRcdGlmIChoYXNTbmlwcGV0V2l0aFF1ZXJ5QXNJZCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoc291cmNlLnR5cGUgPT09ICdzbmlwcGV0JyAmJiBzb3VyY2Uuc25pcHBldC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeUxDKVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiB7IG1hdGNoZXM6IFtdLCBzY29yZTogLTEgfTtcclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gR2VuZXJhbCBjYXNlczpcclxuXHRcdFx0XHRcdHN3aXRjaCAoc291cmNlLnR5cGUpIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSAnYnVpbHRpbic6XHJcblx0XHRcdFx0XHRcdFx0aWYgKHF1ZXJ5SXNCdWlsdGluKSByZXR1cm4geyBtYXRjaGVzOiBbXSwgc2NvcmU6IC0xIH07XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0XHRjYXNlICdjdXN0b20nOlxyXG5cdFx0XHRcdFx0XHRcdGlmIChxdWVyeUxDID09PSAnY3VzdG9tJykgcmV0dXJuIHsgbWF0Y2hlczogW10sIHNjb3JlOiAtMSB9O1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdFx0Y2FzZSAndGhlbWUnOlxyXG5cdFx0XHRcdFx0XHRcdGlmIChxdWVyeUxDID09PSAndGhlbWUnKSByZXR1cm4geyBtYXRjaGVzOiBbXSwgc2NvcmU6IC0xIH07XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0XHRjYXNlICdzbmlwcGV0Jzoge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNuaXBwZXRMQyA9IHNvdXJjZS5zbmlwcGV0LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHNuaXBwZXRMQyA9PT0gcXVlcnlMQykgcmV0dXJuIHsgbWF0Y2hlczogW10sIHNjb3JlOiAtMSB9O1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBUcnkgbWF0Y2hpbmcgZnV6emlseSBvbiB0aGUgc25pcHBldCBuYW1lLlxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZ1enppbHkgPSBmdXp6eShzbmlwcGV0TEMpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmdXp6aWx5ICE9IG51bGwgJiYgKHJlc3VsdCA9PSBudWxsIHx8IGZ1enppbHkuc2NvcmUgPCByZXN1bHQuc2NvcmUpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQgPSBmdXp6aWx5O1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVbmtub3duIHByZWZpeC5cclxuXHRcdHJldHVybiAoKSA9PiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmlsdGVyIGFuZCBzb3J0IGNhbGxvdXQgcHJldmlld3MgYmFzZWQgb24gdGhlIGZ1enp5IHNlYXJjaCBxdWVyeS5cclxuXHQgKiBJZiB0aGVyZSBpcyBubyBzZWFyY2ggcXVlcnksIHByZXZpZXdzIHdpbGwgYmUgc29ydGVkIGJhc2VkIG9uIGNvbG9yLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHByZXZpZXdzIFRoZSBwcmV2aWV3cyB0byBmaWx0ZXIgYW5kIHNvcnQuXHJcblx0ICogQHJldHVybnMgVGhlIGZpbHRlcmVkIGFuZCBzb3J0ZWQgcHJldmlld3MuXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIGZpbHRlckFuZFNvcnQocHJldmlld3M6IENhbGxvdXRGb3JTZWFyY2hbXSk6IENhbGxvdXRGb3JTZWFyY2hbXSB7XHJcblx0XHRjb25zdCB7IHNlYXJjaEZpbHRlciB9ID0gdGhpcztcclxuXHRcdGlmIChzZWFyY2hGaWx0ZXIgPT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm4gcHJldmlld3Muc29ydChjb21wYXJlUHJldmlld0J5Q29sb3IpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZpbHRlciBvdXQgdGhlIHByZXZpZXdzIHRoYXQgZG9uJ3QgbWF0Y2ggdGhlIHNlYXJjaCBxdWVyeS5cclxuXHRcdGNvbnN0IGZpbHRlck1hcHBlZDogQXJyYXk8W0NhbGxvdXRGb3JTZWFyY2gsIFNlYXJjaFJlc3VsdF0+ID0gW107XHJcblx0XHRmb3IgKGNvbnN0IHByZXZpZXcgb2YgcHJldmlld3MpIHtcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gc2VhcmNoRmlsdGVyKHByZXZpZXcpO1xyXG5cdFx0XHRpZiAocmVzdWx0ICE9IG51bGwpIHtcclxuXHRcdFx0XHRmaWx0ZXJNYXBwZWQucHVzaChbcHJldmlldywgcmVzdWx0XSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTb3J0IHRoZSBwcmV2aWV3cy5cclxuXHRcdGZpbHRlck1hcHBlZC5zb3J0KChbYVByZXZpZXcsIGFSZXN1bHRzXSwgW2JQcmV2aWV3LCBiUmVzdWx0c10pID0+IHtcclxuXHRcdFx0Y29uc3Qgc2NvcmVEaWZmID0gYlJlc3VsdHMuc2NvcmUgLSBhUmVzdWx0cy5zY29yZTtcclxuXHRcdFx0aWYgKHNjb3JlRGlmZiAhPSAwKSByZXR1cm4gc2NvcmVEaWZmO1xyXG5cdFx0XHRyZXR1cm4gY29tcGFyZVByZXZpZXdCeUNvbG9yKGFQcmV2aWV3LCBiUHJldmlldyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZXR1cm4gdGhlIHByZXZpZXdzLlxyXG5cdFx0cmV0dXJuIGZpbHRlck1hcHBlZC5tYXAoKFtwcmV2aWV3LCBfXSkgPT4gcHJldmlldyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRoZSBjYWxsb3V0IHByZXZpZXdzLlxyXG5cdCAqIFRoaXMgcmVnZW5lcmF0ZXMgdGhlIHByZXZpZXdzIGFuZCB0aGVpciBtZXRhZGF0YSBmcm9tIHRoZSBsaXN0IG9mIGNhbGxvdXRzIGtub3duIHRvIHRoZSBwbHVnaW4uXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIHJlZnJlc2hQcmV2aWV3cygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGVkaXRCdXR0b25Db250ZW50ID1cclxuXHRcdFx0KHRoaXMudmlld09ubHkgPyBnZXRJY29uKCdsdWNpZGUtdmlldycpIDogZ2V0SWNvbignbHVjaWRlLWVkaXQnKSkgPz9cclxuXHRcdFx0ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0VkaXQgQ2FsbG91dCcpO1xyXG5cclxuXHRcdGNvbnN0IGluc2VydEJ1dHRvbkNvbnRlbnQgPVxyXG5cdFx0XHQodGhpcy52aWV3T25seSA/IGdldEljb24oJ2x1Y2lkZS12aWV3JykgOiBnZXRJY29uKCdsdWNpZGUtZm9yd2FyZCcpKSA/P1xyXG5cdFx0XHRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnSW5zZXJ0IENhbGxvdXQnKTtcclxuXHJcblx0XHRjb25zdCBlZGl0QnV0dG9uSGFuZGxlciA9IChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0bGV0IGlkID0gbnVsbDtcclxuXHRcdFx0Zm9yIChsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldE5vZGU7IHRhcmdldCAhPSBudWxsICYmIGlkID09IG51bGw7IHRhcmdldCA9IHRhcmdldD8ucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdGlmICh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRpZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dC1tYW5hZ2VyLWNhbGxvdXQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChpZCAhPSBudWxsKSB7XHJcblx0XHRcdFx0dGhpcy5uYXYub3BlbihuZXcgRWRpdENhbGxvdXRQYW5lKHRoaXMucGx1Z2luLCBpZCwgdGhpcy52aWV3T25seSkpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IGluc2VydEJ1dHRvbkhhbmRsZXIgPSAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdGxldCBpZCA9IG51bGw7XHJcblx0XHRcdGZvciAobGV0IHRhcmdldCA9IGV2dC50YXJnZXROb2RlOyB0YXJnZXQgIT0gbnVsbCAmJiBpZCA9PSBudWxsOyB0YXJnZXQgPSB0YXJnZXQ/LnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRpZiAodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0aWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtbWFuYWdlci1jYWxsb3V0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzZWxlY3RlZCBjYWxsb3V0LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyBlZGl0aW5nIGEgTWFya2Rvd24gZmlsZS5cclxuICAgICAgICAgICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gdmlldy5lZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbnNlcnRpbmdcIiwgaWQsIGN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlldy5lZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgPiBbISR7aWR9XVxcbj4gQ29udGVudHNgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgdmlldy5lZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvci5saW5lICsgMSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VTZXR0aW5ncyhhcHApXHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gR2VuZXJhdGUgdGhlIGNhY2hlIG9mIHByZXZpZXcgaXRlbXMuXHJcblx0XHR0aGlzLnByZXZpZXdDYWNoZSA9IFtdO1xyXG5cdFx0Zm9yIChjb25zdCBjYWxsb3V0IG9mIHRoaXMucGx1Z2luLmNhbGxvdXRzLnZhbHVlcygpKSB7XHJcblx0XHRcdGNvbnN0IGNhbGxvdXRDb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRjYWxsb3V0Q29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZCgnY2FsbG91dG1hbmFnZXItcHJldmlldy1jb250YWluZXInKTtcclxuXHRcdFx0Y2FsbG91dENvbnRhaW5lckVsLnNldEF0dHJpYnV0ZSgnZGF0YS1jYWxsb3V0LW1hbmFnZXItY2FsbG91dCcsIGNhbGxvdXQuaWQpO1xyXG5cclxuXHRcdFx0Ly8gQWRkIHRoZSBwcmV2aWV3LlxyXG5cdFx0XHR0aGlzLnByZXZpZXdDYWNoZS5wdXNoKGNyZWF0ZVByZXZpZXcoY2FsbG91dCwgY2FsbG91dENvbnRhaW5lckVsKSk7XHJcblxyXG5cdFx0XHQvLyBBZGQgdGhlIGVkaXQgYnV0dG9uIHRvIHRoZSBjb250YWluZXIuXHJcblx0XHRcdGNhbGxvdXRDb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKCdjYWxsb3V0bWFuYWdlci1wcmV2aWV3LWNvbnRhaW5lci13aXRoLWJ1dHRvbicpO1xyXG5cclxuXHRcdFx0Y29uc3QgZWRpdEJ1dHRvbiA9IGNhbGxvdXRDb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRcdGVkaXRCdXR0b24uYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbkNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuXHRcdFx0ZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRCdXR0b25IYW5kbGVyKTtcclxuXHJcblx0XHRcdGNvbnN0IGluc2VydEJ1dHRvbiA9IGNhbGxvdXRDb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRcdGluc2VydEJ1dHRvbi5hcHBlbmRDaGlsZChpbnNlcnRCdXR0b25Db250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcblx0XHRcdGluc2VydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGluc2VydEJ1dHRvbkhhbmRsZXIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqIEBvdmVycmlkZSAqL1xyXG5cdHB1YmxpYyBkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHByZXZpZXdzID0gdGhpcy5maWx0ZXJBbmRTb3J0KHRoaXMucHJldmlld0NhY2hlKTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgY29udGFpbmVyIGFuZCByZS1yZW5kZXIuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Zm9yIChjb25zdCBwcmV2aWV3IG9mIHByZXZpZXdzKSB7XHJcblx0XHRcdGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKHByZXZpZXcuY2FsbG91dENvbnRhaW5lckVsKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBubyBwcmV2aWV3cywgcHJpbnQgaGVscC5cclxuXHRcdGlmIChwcmV2aWV3cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Y29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5zZWFyY2hFcnJvckRpdik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiogQG92ZXJyaWRlICovXHJcblx0cHVibGljIGRpc3BsYXlDb250cm9scygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udHJvbHNFbCB9ID0gdGhpcztcclxuXHJcblx0XHRuZXcgVGV4dENvbXBvbmVudChjb250cm9sc0VsKVxyXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5zZWFyY2hRdWVyeSlcclxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdGaWx0ZXIgY2FsbG91dHMuLi4nKVxyXG5cdFx0XHQub25DaGFuZ2UodGhpcy5zZWFyY2guYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnZpZXdPbmx5KSB7XHJcblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbHNFbClcclxuXHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXBsdXMnKVxyXG5cdFx0XHRcdC5zZXRUb29sdGlwKCdOZXcgQ2FsbG91dCcpXHJcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5uYXYub3BlbihuZXcgQ3JlYXRlQ2FsbG91dFBhbmUodGhpcy5wbHVnaW4pKSlcclxuXHRcdFx0XHQudGhlbigoeyBidXR0b25FbCB9KSA9PiBidXR0b25FbC5jbGFzc0xpc3QuYWRkKCdjbGlja2FibGUtaWNvbicpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwcm90ZWN0ZWQgcmVzdG9yZVN0YXRlKHN0YXRlOiB1bmtub3duKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlZnJlc2hQcmV2aWV3cygpO1xyXG5cdH1cclxuXHJcblx0LyoqIEBvdmVycmlkZSAqL1xyXG5cdHByb3RlY3RlZCBvblJlYWR5KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZWZyZXNoUHJldmlld3MoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHtAbGluayBDYWxsb3V0UHJldmlld30gd2l0aCBhdHRhY2hlZCBtZXRhZGF0YSB0byBtYWtlIGl0IGVhc2llciB0byBmaWx0ZXIgYW5kIHNlYXJjaC5cclxuICovXHJcbmludGVyZmFjZSBDYWxsb3V0Rm9yU2VhcmNoIHtcclxuXHRpY29uOiBzdHJpbmc7XHJcblx0aWQ6IHN0cmluZztcclxuXHRzb3VyY2VzOiBDYWxsb3V0Wydzb3VyY2VzJ107XHJcblx0Y2FsbG91dENvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRjb2xvclZhbGlkOiBib29sZWFuO1xyXG5cdGNvbG9ySHVlOiBudW1iZXI7XHJcblx0cHJldmlldzogQ2FsbG91dFByZXZpZXdDb21wb25lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByZXZpZXcoY2FsbG91dDogQ2FsbG91dCwgY2FsbG91dENvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IENhbGxvdXRGb3JTZWFyY2gge1xyXG5cdGNvbnN0IHsgaWNvbiwgaWQgfSA9IGNhbGxvdXQ7XHJcblx0Y29uc3QgY29sb3IgPSBnZXRDb2xvckZyb21DYWxsb3V0KGNhbGxvdXQpO1xyXG5cdHJldHVybiB7XHJcblx0XHRzb3VyY2VzOiBjYWxsb3V0LnNvdXJjZXMsXHJcblx0XHRpY29uLFxyXG5cdFx0aWQsXHJcblx0XHRjYWxsb3V0Q29udGFpbmVyRWwsXHJcblx0XHRjb2xvclZhbGlkOiBjb2xvciAhPSBudWxsLFxyXG5cdFx0Y29sb3JIdWU6IGNvbG9yID09IG51bGwgPyAwIDogdG9IU1YoY29sb3IpLmgsXHJcblx0XHRwcmV2aWV3OiBuZXcgQ2FsbG91dFByZXZpZXdDb21wb25lbnQoY2FsbG91dENvbnRhaW5lckVsLCB7XHJcblx0XHRcdGlkLFxyXG5cdFx0XHRpY29uLFxyXG5cdFx0XHR0aXRsZTogZ2V0VGl0bGVGcm9tQ2FsbG91dChjYWxsb3V0KSxcclxuXHRcdFx0Y29sb3I6IGNvbG9yID8/IHVuZGVmaW5lZCxcclxuXHRcdH0pLFxyXG5cdH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21wYXJlcyB0d28gY2FsbG91dCBwcmV2aWV3cyBieSB0aGVpciBodWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBhIFRoZSBmaXJzdCBwcmV2aWV3LlxyXG4gKiBAcGFyYW0gYiBUaGUgc2Vjb25kIHByZXZpZXcuXHJcbiAqIEByZXR1cm5zIGAtMWAgaWYgdGhlIGEgaGFzIGEgbG93ZXIgaHVlLCBgMGAgaWYgdGhleSBhcmUgdGhlIHNhbWUsIG9yIGAxYCBpZiBhIGhhcyBhIGhpZ2hlciBodWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wYXJlUHJldmlld0J5Q29sb3IoYTogQ2FsbG91dEZvclNlYXJjaCwgYjogQ2FsbG91dEZvclNlYXJjaCk6IG51bWJlciB7XHJcblx0aWYgKGEuY29sb3JWYWxpZCAmJiAhYi5jb2xvclZhbGlkKSByZXR1cm4gLTE7XHJcblx0aWYgKGIuY29sb3JWYWxpZCAmJiAhYS5jb2xvclZhbGlkKSByZXR1cm4gMTtcclxuXHRyZXR1cm4gYS5jb2xvckh1ZSAtIGIuY29sb3JIdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgZGl2IHRoYXQgY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgdXNlciB3aHkgdGhlIHNlYXJjaCBxdWVyeSBmYWlsZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVFbXB0eVNlYXJjaFJlc3VsdERpdigpOiB7IHNlYXJjaEVycm9yRGl2OiBIVE1MRWxlbWVudDsgc2VhcmNoRXJyb3JRdWVyeTogSFRNTEVsZW1lbnQgfSB7XHJcblx0bGV0IHNlYXJjaEVycm9yUXVlcnkhOiBIVE1MRWxlbWVudDtcclxuXHRjb25zdCBzZWFyY2hFcnJvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdHNlYXJjaEVycm9yRGl2LmNsYXNzTmFtZSA9ICdjYWxsb3V0bWFuYWdlci1jZW50ZXJib3gnO1xyXG5cdGNvbnN0IGNvbnRlbnRFbCA9IHNlYXJjaEVycm9yRGl2LmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNlYXJjaC1lcnJvcicgfSk7XHJcblxyXG5cdC8vIFRpdGxlLlxyXG5cdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdObyBjYWxsb3V0cyBmb3VuZC4nIH0pO1xyXG5cclxuXHQvLyBFcnJvciBtZXNzYWdlLlxyXG5cdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHVuZGVmaW5lZCwgKGVsKSA9PiB7XHJcblx0XHRlbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1lvdXIgc2VhcmNoIHF1ZXJ5ICcgfSk7XHJcblx0XHRzZWFyY2hFcnJvclF1ZXJ5ID0gZWwuY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6ICcnIH0pO1xyXG5cdFx0ZWwuY3JlYXRlU3Bhbih7IHRleHQ6ICcgZGlkIG5vdCByZXR1cm4gYW55IHJlc3VsdHMuJyB9KTtcclxuXHR9KTtcclxuXHJcblx0Ly8gU3VnZ2VzdGlvbnMuXHJcblx0Y29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNlYXJjaC1lcnJvci1zdWdnZXN0aW9ucycgfSwgKGVsKSA9PiB7XHJcblx0XHRlbC5jcmVhdGVEaXYoeyB0ZXh0OiAnVHJ5IHNlYXJjaGluZzonIH0pO1xyXG5cdFx0ZWwuY3JlYXRlRWwoJ3VsJywgdW5kZWZpbmVkLCAoZWwpID0+IHtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnQnkgbmFtZTogJyB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ3dhcm5pbmcnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnQnkgaWNvbjogJyB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ2ljb246Y2hlY2snIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnQnVpbHQtaW4gY2FsbG91dHM6ICcgfSwgKGVsKSA9PiB7XHJcblx0XHRcdFx0ZWwuY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6ICdmcm9tOm9ic2lkaWFuJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1RoZW1lIGNhbGxvdXRzOiAnIH0sIChlbCkgPT4ge1xyXG5cdFx0XHRcdGVsLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiAnZnJvbTp0aGVtZScgfSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdTbmlwcGV0IGNhbGxvdXRzOiAnIH0sIChlbCkgPT4ge1xyXG5cdFx0XHRcdGVsLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiAnZnJvbTpteSBzbmlwcGV0JyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ0N1c3RvbSBjYWxsb3V0czogJyB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ2Zyb206Y3VzdG9tJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIHsgc2VhcmNoRXJyb3JEaXYsIHNlYXJjaEVycm9yUXVlcnkgfTtcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIFN0eWxlczpcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZWFyY2gtZXJyb3Ige1xyXG5cdFx0d2lkdGg6IDYwJTtcclxuXHJcblx0XHRib2R5LmlzLXBob25lICYge1xyXG5cdFx0XHR3aWR0aDogMTAwJTtcclxuXHRcdH1cclxuXHJcblx0XHRjb2RlIHtcclxuXHRcdFx0d29yZC1icmVhazogYnJlYWstYWxsO1xyXG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNlYXJjaC1lcnJvci1zdWdnZXN0aW9ucyB7XHJcblx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItcHJldmlldy1jb250YWluZXItd2l0aC1idXR0b24ge1xyXG5cdFx0LS1jYWxsb3V0bWFuYWdlci1jYWxsb3V0LWVkaXQtYnV0dG9ucy1zaXplOiBjYWxjKHZhcigtLWlucHV0LWhlaWdodCkgKyAyICogdmFyKC0tc2l6ZS00LTMpKTtcclxuXHRcdGJvZHkuaXMtcGhvbmUgJiB7XHJcblx0XHRcdC0tY2FsbG91dG1hbmFnZXItY2FsbG91dC1lZGl0LWJ1dHRvbnMtc2l6ZTogdmFyKC0taW5wdXQtaGVpZ2h0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDb252ZXIgdGhlIHByZXZpZXcgaW50byBhIGdyaWQuXHJcblx0XHRkaXNwbGF5OiBncmlkO1xyXG5cdFx0Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgdmFyKC0tY2FsbG91dG1hbmFnZXItY2FsbG91dC1lZGl0LWJ1dHRvbnMtc2l6ZSk7XHJcblxyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdGdhcDogdmFyKC0tc2l6ZS00LTIpO1xyXG5cclxuXHRcdC8vIEVuc3VyZSB0aGUgYnV0dG9uIGhhcyBhIHNtYWxsIHdpZHRoLCBidXQgY2FuIGdyb3cgdGFsbC5cclxuXHRcdD4gYnV0dG9uIHtcclxuXHRcdFx0d2lkdGg6IHZhcigtLWNhbGxvdXRtYW5hZ2VyLWNhbGxvdXQtZWRpdC1idXR0b25zLXNpemUpO1xyXG5cdFx0XHRoZWlnaHQ6IDEwMCU7XHJcblxyXG5cdFx0XHQvLyBGaXggcmVuZGVyaW5nIG5vdCB3b3JraW5nIG9uIG5vbi1waG9uZSBkZXZpY2VzLlxyXG5cdFx0XHRib2R5Om5vdCguaXMtcGhvbmUpICYge1xyXG5cdFx0XHRcdGRpc3BsYXk6IGJsb2NrO1xyXG5cdFx0XHRcdHBhZGRpbmc6IDAgIWltcG9ydGFudDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuYDtcclxuIiwiaW1wb3J0IHsgZ2V0Q3VycmVudENvbG9yU2NoZW1lIH0gZnJvbSAnb2JzaWRpYW4tZXh0cmEnO1xyXG5cclxuaW1wb3J0IHsgUkdCLCBwYXJzZUNvbG9yUkdCIH0gZnJvbSAnJmNvbG9yJztcclxuXHJcbmltcG9ydCB7IElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQgfSBmcm9tICcmdWkvY29tcG9uZW50L2NhbGxvdXQtcHJldmlldyc7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0LCBDYWxsb3V0SUQgfSBmcm9tICcuLi9hcGknO1xyXG5cclxuLyoqXHJcbiAqIEEgY2xhc3MgdGhhdCBmZXRjaGVzIHN0eWxlIGluZm9ybWF0aW9uIGZvciBjYWxsb3V0cy5cclxuICogVGhpcyBrZWVwcyBhIFNoYWRvdyBET00gd2l0aGluIHRoZSBwYWdlIGRvY3VtZW50IGFuZCB1c2VzIGdldENvbXB1dGVkU3R5bGVzIHRvIGdldCBDU1MgdmFyaWFibGVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENhbGxvdXRSZXNvbHZlciB7XHJcblx0cHJpdmF0ZSByZWFkb25seSBob3N0RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSByZWFkb25seSBjYWxsb3V0UHJldmlldzogSXNvbGF0ZWRDYWxsb3V0UHJldmlld0NvbXBvbmVudDtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5ob3N0RWxlbWVudCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRGl2KHtcclxuXHRcdFx0Y2xzOiAnY2FsbG91dG1hbmFnZXItY2FsbG91dC1yZXNvbHZlcicsXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmhvc3RFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XHJcblx0XHR0aGlzLmNhbGxvdXRQcmV2aWV3ID0gbmV3IElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQodGhpcy5ob3N0RWxlbWVudCwge1xyXG5cdFx0XHRpZDogJycsXHJcblx0XHRcdGljb246ICcnLFxyXG5cdFx0XHRjb2xvclNjaGVtZTogJ2RhcmsnLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5jYWxsb3V0UHJldmlldy5yZXNldFN0eWxlUHJvcGVydHlPdmVycmlkZXMoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbG9hZHMgdGhlIHN0eWxlcyBvZiB0aGUgY2FsbG91dCByZXNvbHZlci5cclxuXHQgKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBnZXQgdXAtdG8tZGF0ZSBzdHlsZXMgd2hlbiB0aGUgYXBwbGljYXRpb24gQ1NTIGNoYW5nZXMuXHJcblx0ICpcclxuXHQgKiBOb3RlOiBUaGlzIHdpbGwgbm90IHJlbG9hZCB0aGUgT2JzaWRpYW4gYXBwLmNzcyBzdHlsZXNoZWV0LlxyXG5cdCAqIEBwYXJhbSBzdHlsZXMgVGhlIG5ldyBzdHlsZSBlbGVtZW50cyB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIHJlbG9hZFN0eWxlcygpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2FsbG91dFByZXZpZXcuc2V0Q29sb3JTY2hlbWUoZ2V0Q3VycmVudENvbG9yU2NoZW1lKGFwcCkpO1xyXG5cdFx0dGhpcy5jYWxsb3V0UHJldmlldy51cGRhdGVTdHlsZXMoKTtcclxuXHRcdHRoaXMuY2FsbG91dFByZXZpZXcucmVtb3ZlU3R5bGVzKChlbCkgPT4gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtbWFuYWdlcicpID09PSAnc3R5bGUtb3ZlcnJpZGVzJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmVzIHRoZSBob3N0IGVsZW1lbnQuXHJcblx0ICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIHBsdWdpbiBpcyB1bmxvYWRpbmcuXHJcblx0ICovXHJcblx0cHVibGljIHVubG9hZCgpIHtcclxuXHRcdHRoaXMuaG9zdEVsZW1lbnQucmVtb3ZlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBjb21wdXRlZCBzdHlsZXMgZm9yIGEgZ2l2ZW4gdHlwZSBvZiBjYWxsb3V0LlxyXG5cdCAqIFRoaXMgdXNlcyB0aGUgY3VycmVudCBPYnNpZGlhbiBzdHlsZXMsIHRoZW1lcywgYW5kIHNuaXBwZXRzLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGlkIFRoZSBjYWxsb3V0IElELlxyXG5cdCAqIEBwYXJhbSBjYWxsYmFjayBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJ1bi4gVGhlIHN0eWxlcyBtYXkgb25seSBiZSBhY2Nlc3NlZCB0aHJvdWdoIHRoaXMuXHJcblx0ICogQHJldHVybnMgV2hhdGV2ZXIgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHJldHVybmVkLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXRDYWxsb3V0U3R5bGVzPFQ+KGlkOiBDYWxsb3V0SUQsIGNhbGxiYWNrOiAoc3R5bGVzOiBDU1NTdHlsZURlY2xhcmF0aW9uKSA9PiBUKTogVCB7XHJcblx0XHRjb25zdCB7IGNhbGxvdXRFbCB9ID0gdGhpcy5jYWxsb3V0UHJldmlldztcclxuXHRcdGNhbGxvdXRFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dCcsIGlkKTtcclxuXHJcblx0XHQvLyBSdW4gdGhlIGNhbGxiYWNrLlxyXG5cdFx0Ly8gICBXZSBuZWVkIHRvIHVzZSB0aGUgY2FsbGJhY2sgdG8gY3JlYXRlIHRoZSBmdWxsIHNldCBvZiBkZXNpcmVkIHJldHVybiBwcm9wZXJ0aWVzIGJlY2F1c2VcclxuXHRcdC8vICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBhbiBvYmplY3QgdGhhdCB3aWxsIHVwZGF0ZSBpdHNlbGYgYXV0b21hdGljYWxseS4gVGhlIG1vbWVudCB3ZVxyXG5cdFx0Ly8gICBjaGFuZ2UgdGhlIGhvc3QgZWxlbWVudCwgYWxsIHRoZSBzdHlsZXMgd2Ugd2FudCBmcm9tIGl0IHdpbGwgYmUgcmVtb3ZlZC5cclxuXHRcdHJldHVybiBjYWxsYmFjayh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYWxsb3V0RWwpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGljb24gYW5kIGNvbG9yIGZvciBhIGdpdmVuIHR5cGUgb2YgY2FsbG91dC5cclxuXHQgKiBUaGlzIHVzZXMgdGhlIGN1cnJlbnQgT2JzaWRpYW4gc3R5bGVzLCB0aGVtZXMsIGFuZCBzbmlwcGV0cy5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBpZCBUaGUgY2FsbG91dCBJRC5cclxuXHQgKiBAcmV0dXJucyBUaGUgY2FsbG91dCBpY29uIGFuZCBjb2xvci5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0Q2FsbG91dFByb3BlcnRpZXMoaWQ6IENhbGxvdXRJRCk6IHsgaWNvbjogc3RyaW5nOyBjb2xvcjogc3RyaW5nIH0ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q2FsbG91dFN0eWxlcyhpZCwgKHN0eWxlcykgPT4gKHtcclxuXHRcdFx0aWNvbjogc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJy0tY2FsbG91dC1pY29uJykudHJpbSgpLFxyXG5cdFx0XHRjb2xvcjogc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJy0tY2FsbG91dC1jb2xvcicpLnRyaW0oKSxcclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgY3VzdG9tU3R5bGVFbCgpOiBIVE1MU3R5bGVFbGVtZW50IHtcclxuXHRcdHJldHVybiB0aGlzLmNhbGxvdXRQcmV2aWV3LmN1c3RvbVN0eWxlRWwgYXMgSFRNTFN0eWxlRWxlbWVudDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBjb2xvciAoYXMgYSB7QGxpbmsgUkdCfSkgZnJvbSBhIHtAbGluayBDYWxsb3V0fS5cclxuICogVGhpcyB3aWxsIHRyeSB0byBkbyBiYXNpYyBwYXJzaW5nIG9uIHRoZSBjb2xvciBmaWVsZC5cclxuICpcclxuICogQHBhcmFtIGNhbGxvdXQgVGhlIGNhbGxvdXQuXHJcbiAqIEByZXR1cm5zIFRoZSBjYWxsb3V0J3MgY29sb3IsIG9yIG51bGwgaWYgbm90IHZhbGlkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9yRnJvbUNhbGxvdXQoY2FsbG91dDogQ2FsbG91dCk6IFJHQiB8IG51bGwge1xyXG5cdHJldHVybiBwYXJzZUNvbG9yUkdCKGByZ2IoJHtjYWxsb3V0LmNvbG9yfSlgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIHRpdGxlIG9mIGEgY2FsbG91dC5cclxuICpcclxuICogVGhpcyBzaG91bGQgYmUgdGhlIHNhbWUgYXMgd2hhdCBPYnNpZGlhbiBkaXNwbGF5cyB3aGVuIGEgY2FsbG91dCBibG9jayBkb2VzIG5vdCBoYXZlIGEgdXNlci1zcGVjaWZpZWQgdGl0bGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBjYWxsb3V0IFRoZSBjYWxsb3V0LlxyXG4gKiBAcmV0dXJucyBUaGUgY2FsbG91dCdzIHRpdGxlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpdGxlRnJvbUNhbGxvdXQoY2FsbG91dDogQ2FsbG91dCk6IHN0cmluZyB7XHJcblx0Y29uc3QgbWF0Y2hlcyA9IC9eKC4pKC4qKS91LmV4ZWMoY2FsbG91dC5pZCk7XHJcblx0aWYgKG1hdGNoZXMgPT0gbnVsbCkgcmV0dXJuIGNhbGxvdXQuaWQ7XHJcblxyXG5cdGNvbnN0IGZpcnN0Q2hhciA9IG1hdGNoZXNbMV0udG9Mb2NhbGVVcHBlckNhc2UoKTtcclxuXHRjb25zdCByZW1haW5pbmdDaGFycyA9IG1hdGNoZXNbMl0udG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC8tKy9nLCBcIiBcIik7XHJcblxyXG5cdHJldHVybiBgJHtmaXJzdENoYXJ9JHtyZW1haW5pbmdDaGFyc31gO1xyXG59XHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdC5jYWxsb3V0bWFuYWdlci1jYWxsb3V0LXJlc29sdmVyIHtcclxuXHRcdGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IG9wZW5QbHVnaW5TZXR0aW5ncyB9IGZyb20gJ29ic2lkaWFuLWV4dHJhJztcclxuaW1wb3J0IHsgY2xvc2VTZXR0aW5ncyB9IGZyb20gJ29ic2lkaWFuLWV4dHJhL3Vuc2FmZSc7XHJcblxyXG5pbXBvcnQgQ2FsbG91dE1hbmFnZXJQbHVnaW4gZnJvbSAnJnBsdWdpbic7XHJcblxyXG5pbXBvcnQgeyBVSVBhbmUgfSBmcm9tICcuL3BhbmUnO1xyXG5pbXBvcnQgeyBVSVBhbmVMYXllcnMgfSBmcm9tICcuL3BhbmUtbGF5ZXJzJztcclxuXHJcbi8qKlxyXG4gKiBUaGUgc2V0dGluZ3MgdGFiIChVSSkgdGhhdCB3aWxsIHNob3cgdXAgdW5kZXIgT2JzaWRpYW4ncyBzZXR0aW5ncy5cclxuICpcclxuICogVGhpcyBpbXBsZW1lbnRzIHN0YWNrZWQgbmF2aWdhdGlvbiwgd2hlcmUge0BsaW5rIFVJUGFuZX1zIG1heSBiZSBzdGFja2VkIG9uIHRvcCBvZiBlYWNob3RoZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVUlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cHJpdmF0ZSByZWFkb25seSBwbHVnaW46IENhbGxvdXRNYW5hZ2VyUGx1Z2luO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgbGF5ZXJzOiBVSVBhbmVMYXllcnM7XHJcblx0cHJpdmF0ZSByZWFkb25seSBjcmVhdGVEZWZhdWx0OiAoKSA9PiBVSVBhbmU7XHJcblxyXG5cdHByaXZhdGUgaW5pdExheWVyOiBVSVBhbmUgfCBudWxsO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IocGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbiwgY3JlYXRlRGVmYXVsdDogKCkgPT4gVUlQYW5lKSB7XHJcblx0XHRzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmNyZWF0ZURlZmF1bHQgPSBjcmVhdGVEZWZhdWx0O1xyXG5cclxuXHRcdHRoaXMuaW5pdExheWVyID0gbnVsbDtcclxuXHRcdHRoaXMubGF5ZXJzID0gbmV3IFVJUGFuZUxheWVycyh7XHJcblx0XHRcdGNsb3NlOiAoKSA9PiBjbG9zZVNldHRpbmdzKHRoaXMuYXBwKSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIG9wZW5XaXRoUGFuZShwYW5lOiBVSVBhbmUpIHtcclxuXHRcdHRoaXMuaW5pdExheWVyID0gcGFuZTtcclxuXHRcdG9wZW5QbHVnaW5TZXR0aW5ncyh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwdWJsaWMgaGlkZSgpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5pdExheWVyID0gbnVsbDtcclxuXHRcdHRoaXMubGF5ZXJzLmNsZWFyKCk7XHJcblx0XHRzdXBlci5oaWRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwsIGxheWVycyB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgY29udGFpbmVyIGFuZCBjcmVhdGUgdGhlIGVsZW1lbnRzLlxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiJywgJ2NhbGxvdXRtYW5hZ2VyLXBhbmUnKTtcclxuXHJcblx0XHRjb25zdCBoZWFkZXJFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWhlYWRlcicgfSk7XHJcblx0XHRsYXllcnMubmF2RWwgPSBoZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi1uYXYnIH0pO1xyXG5cdFx0bGF5ZXJzLnRpdGxlRWwgPSBoZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi10aXRsZScgfSk7XHJcblxyXG5cdFx0Y29uc3QgY29udHJvbHNFbCA9IGhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRyb2xzJyB9KTtcclxuXHRcdGxheWVycy5jb250cm9sc0VsID0gY29udHJvbHNFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGxheWVycy5zY3JvbGxFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7XHJcblx0XHRcdGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLXZpZXdwb3J0IHZlcnRpY2FsLXRhYi1jb250ZW50JyxcclxuXHRcdH0pO1xyXG5cdFx0bGF5ZXJzLmNvbnRhaW5lckVsID0gbGF5ZXJzLnNjcm9sbEVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRlbnQnIH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNsb3NlIGJ1dHRvbiwgc2luY2UgdGhlIG5hdGl2ZSBvbmUgaXMgY292ZXJlZC5cclxuXHRcdGNvbnRyb2xzRWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtY2xvc2UtYnV0dG9uJyB9LCAoY2xvc2VCdXR0b25FbCkgPT4ge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XHJcblx0XHRcdFx0aWYgKCFldi5pc1RydXN0ZWQpIHJldHVybjtcclxuXHRcdFx0XHRjbG9zZVNldHRpbmdzKHRoaXMuYXBwKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgbGF5ZXJzLlxyXG5cdFx0bGF5ZXJzLmNsZWFyKCk7XHJcblxyXG5cdFx0Ly8gUmVuZGVyIHRoZSB0b3AgbGF5ZXIgKG9yIHRoZSBkZWZhdWx0KS5cclxuXHRcdGNvbnN0IGluaXRMYXllciA9IHRoaXMuaW5pdExheWVyID8/IHRoaXMuY3JlYXRlRGVmYXVsdCgpO1xyXG5cdFx0dGhpcy5pbml0TGF5ZXIgPSBudWxsO1xyXG5cdFx0bGF5ZXJzLnRvcCA9IGluaXRMYXllcjtcclxuXHR9XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBTdHlsZXM6XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQvLyBUaGUgc2V0dGluZyB0YWIgY29udGFpbmVyLlxyXG5cdC5tb2Qtc2lkZWJhci1sYXlvdXQgLmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLnZlcnRpY2FsLXRhYi1jb250ZW50IHtcclxuXHRcdHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHRcdHBhZGRpbmc6IDAgIWltcG9ydGFudDtcclxuXHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cclxuXHRcdC8vIFByZXZlbnQgc2Nyb2xsaW5nIG9uIHRoZSBwYXJlbnQgY29udGFpbmVyIHNvIHdlIGNhbiBoYXZlIGEgc3RpY2t5IGhlYWRlci5cclxuXHRcdG92ZXJmbG93LXk6IGluaXRpYWw7XHJcblxyXG5cdFx0Ly8gVmFyaWFibGVzLlxyXG5cdFx0JiB7XHJcblx0XHRcdC8vIFNldCBhIG1hcmdpbiB0aGF0IGFsbG93cyB0aGUgY29udHJvbHMgdG8gYmVjb21lIHBhZGRpbmcgaWYgdGhlcmUncyBub3RoaW5nIGluc2lkZSB0aGVtLlxyXG5cdFx0XHQtLWNtLXNldHRpbmctdGFiLWNvbnRyb2xzLW1hcmdpbjogY2FsYyh2YXIoLS1zaXplLTQtMTIpIC0gKHZhcigtLXNpemUtNC0yKSAtIHZhcigtLXNpemUtNC0xKSkpO1xyXG5cdFx0XHRib2R5LmlzLXBob25lICYge1xyXG5cdFx0XHRcdC0tY20tc2V0dGluZy10YWItY29udHJvbHMtbWFyZ2luOiB2YXIoLS1zaXplLTQtMik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRoZSBzZXR0aW5nIHRhYiBoZWFkZXIuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWhlYWRlciB7XHJcblx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcblx0XHQvLyBQYWRkaW5nIHRvIG1pbWljIHRoZSBzaXppbmcgb2YgdGhlICcudmVydGljYWwtdGFiLWNvbnRlbnQnXHJcblx0XHRwYWRkaW5nLXRvcDogdmFyKC0tc2l6ZS00LTEpO1xyXG5cdFx0cGFkZGluZy1ib3R0b206IHZhcigtLXNpemUtNC0xKTtcclxuXHRcdHBhZGRpbmctcmlnaHQ6IHZhcigtLXNpemUtNC0yKTtcclxuXHJcblx0XHQvLyBCb3R0b20gYm9yZGVyIHRvIHNlcGFyYXRlIHRoZSBoZWFkZXIgZnJvbSB0aGUgY29udGVudC5cclxuXHRcdGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcblxyXG5cdFx0Ly8gVXNlIHRoZSBiYWNrZ3JvdW5kIG9mIHRoZSBzaWRlYmFyLlxyXG5cdFx0YmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xyXG5cclxuXHRcdGJvZHkuaXMtcGhvbmUgJiB7XHJcblx0XHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBUaGUgc2V0dGluZyB0YWIgbmF2IHdpdGhpbiB0aGUgaGVhZGVyLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi1uYXYge1xyXG5cdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHJcblx0XHQvLyBFbnN1cmUgdGhlIG5hdiBpcyBhdCBsZWFzdCBhcyBiaWcgYXMgYSBidXR0b24uXHJcblx0XHRtaW4td2lkdGg6IHZhcigtLXNpemUtNC0xMik7XHJcblx0XHRtaW4taGVpZ2h0OiBjYWxjKHZhcigtLXNpemUtNC0yKSArIHZhcigtLWlucHV0LWhlaWdodCkpO1xyXG5cclxuXHRcdC8vIE92ZXJyaWRlIHRoZSBidXR0b24gcGFkZGluZy5cclxuXHRcdGJ1dHRvbiB7XHJcblx0XHRcdHBhZGRpbmc6IHZhcigtLXNpemUtNC0xKSB2YXIoLS1zaXplLTQtMik7XHJcblx0XHRcdGJveC1zaGFkb3c6IG5vbmU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVkdWNlIHBhZGRpbmcgZm9yIG1vYmlsZS5cclxuXHRcdGJvZHkuaXMtbW9iaWxlICYge1xyXG5cdFx0XHRwYWRkaW5nOiB2YXIoLS1zaXplLTQtMik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ym9keS5pcy1waG9uZSAmLFxyXG5cdFx0Ym9keS5pcy1waG9uZSAmIGJ1dHRvbiB7XHJcblx0XHRcdGhlaWdodDogMTAwJTtcclxuXHRcdFx0bWluLXdpZHRoOiB1bnNldDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRoZSBzZXR0aW5nIHRhYiBuYXYgd2l0aGluIHRoZSBoZWFkZXIuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRyb2xzIHtcclxuXHRcdGZsZXg6IDMgMztcclxuXHJcblx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdGp1c3RpZnktY29udGVudDogZW5kO1xyXG5cdFx0Z2FwOiB2YXIoLS1zaXplLTQtMik7XHJcblxyXG5cdFx0cGFkZGluZy1sZWZ0OiB2YXIoLS1jbS1zZXR0aW5nLXRhYi1jb250cm9scy1tYXJnaW4pO1xyXG5cclxuXHRcdC8vIE1ha2UgdGhlIHJlYWwgY29udHJvbCBlbGVtZW50cyB0cmFuc3BhcmVudCB0byB0aGUgY29udGFpbmVyLlxyXG5cdFx0PiAqOm5vdCgubW9kYWwtY2xvc2UtYnV0dG9uKSB7XHJcblx0XHRcdGRpc3BsYXk6IGNvbnRlbnRzO1xyXG5cclxuXHRcdFx0PiBpbnB1dFt0eXBlPSd0ZXh0J10ge1xyXG5cdFx0XHRcdGZsZXg6IDEgMSBhdXRvO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItY29udHJvbHMgLm1vZGFsLWNsb3NlLWJ1dHRvbiB7XHJcblx0XHRmbGV4OiAwIDAgYXV0bztcclxuXHJcblx0XHRwb3NpdGlvbjogc3RhdGljO1xyXG5cdFx0bGVmdDogdW5zZXQ7XHJcblx0XHR0b3A6IDA7XHJcblx0XHRyaWdodDogMDtcclxuXHRcdGJvdHRvbTogMDtcclxuXHJcblx0XHRib2R5LmlzLXBob25lICYge1xyXG5cdFx0XHRkaXNwbGF5OiBub25lO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhlIHNldHRpbmcgdGFiIHRpdGxlIHdpdGhpbiB0aGUgaGVhZGVyLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi10aXRsZSB7XHJcblx0XHRmbGV4OiAxIDEgYXV0bztcclxuXHRcdGZsZXgtd3JhcDogbm93cmFwO1xyXG5cclxuXHRcdGgyLFxyXG5cdFx0aDMge1xyXG5cdFx0XHRtYXJnaW46IDA7XHJcblx0XHRcdHdvcmQtYnJlYWs6IGtlZXAtYWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGgzIHtcclxuXHRcdFx0Zm9udC1zaXplOiB2YXIoLS1mb250LXVpLXNtYWxsKTtcclxuXHRcdH1cclxuXHJcblx0XHRib2R5Om5vdCguaXMtcGhvbmUpICYgaDMge1xyXG5cdFx0XHRmb250LXNpemU6IDAuOGVtO1xyXG5cdFx0fVxyXG5cclxuXHRcdGJvZHkuaXMtcGhvbmUgJiBoMjpoYXMoKyBoMykge1xyXG5cdFx0XHRkaXNwbGF5OiBub25lO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhlIHNjcm9sbCBjb250YWluZXIgZm9yIHRoZSBzZXR0aW5nIHRhYi5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItdmlld3BvcnQge1xyXG5cdFx0ZmxleDogMSAyIGF1dG87XHJcblxyXG5cdFx0Ly8gRW5hYmxlIHNjcm9sbGluZy5cclxuXHRcdG92ZXJmbG93LXk6IGF1dG87XHJcblx0XHQtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItY29udGVudCB7XHJcblx0XHRmbGV4OiAxIDEgYXV0bztcclxuXHJcblx0XHRib2R5Om5vdCguaXMtcGhvbmUpIHtcclxuXHRcdFx0bWluLWhlaWdodDogMTAwJTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQVVzRkE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUdBOztBQUdBO0VBRUE7O0FBQ0E7RUFDQTs7O0FBTUE7RUFDQTtFQUNBO0VBR0E7RUFDQTtFQUNBO0VBR0E7RUFHQTs7QUFFQTtFQUNBOzs7QUFLQTtFQUNBO0VBQ0E7RUFDQTtFQUdBO0VBQ0E7O0FBR0E7RUFDQTtFQUNBOztBQUlBO0VBQ0E7O0FBR0E7RUFFQTtFQUNBOzs7QUFLQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFHQTtFQUNBOztBQUVBO0VBQ0E7OztBQUtBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0E7OztBQUtBO0VBQ0E7RUFDQTs7QUFFQTtBQUFBO0VBRUE7RUFDQTs7QUFHQTtFQUNBOztBQUdBO0VBQ0E7O0FBR0E7RUFDQTs7O0FBS0E7RUFDQTtFQUdBO0VBQ0E7OztBQUdBO0VBQ0E7O0FBRUE7RUFDQTs7O0FEMUdBO0VBQ0E7OztBRGdSQTtFQUNBOztBQUVBO0VBQ0E7O0FBR0E7RUFDQTtFQUNBOzs7QUFJQTtFQUNBOzs7QUFHQTtFQUNBO0VBTUE7RUFDQTtFQUVBO0VBQ0E7O0FBVEE7RUFDQTs7QUFXQTtFQUNBO0VBQ0E7O0FBR0E7RUFDQTtFQUNBOzs7QURsREE7RUFDQTtFQUNBOzs7QUFHQTtFQUNBO0VBQ0E7OztBRDdTQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTs7O0FBTUE7RUFDQTtFQUNBOztBQUVBO0VBQ0E7RUFDQTs7QUFJQTtFQUNBOztBQUlBO0VBQ0E7O0FBSUE7RUFDQTtFQUNBO0VBQ0E7O0FBSUE7RUFDQTtFQUNBOztBQUNBO0VBQ0E7RUFDQTs7O0FBUUE7QUFBQTtFQUNBOzs7QUFLQTtFQUNBOztBRGdCQTtFQUNBO0VBQ0E7RUFDQTs7O0FBR0E7RUFDQTs7QUFDQTtFQUNBOzs7QUFLQTtFQUNBO0VBQ0E7O0FBR0E7RUFDQTs7QUFFQTtFQUNBOztBQVNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBOzs7QUFJQTtFQUNBOzs7QURwREE7RUFDQTtFQUNBOztBQUVBO0VBQ0E7OztBQUtBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFHQTtFQUNBO0VBQ0E7RUFDQTs7O0FEdEVBO0VBQ0E7OztBQUdBO0VBQ0E7OztBQUdBO0VBQ0E7OztBQUdBO0FBQUE7QUFBQTtFQUdBOzs7QUQzR0E7RUFDQTs7O0FBSUE7RUFDQTs7QUFFQTtFQUNBOztBQUdBO0VBQ0E7OztBRG1MQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOzs7QUFHQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBRUE7O0FBRUE7RUFDQTtFQUVBO0VBQ0E7OztBRDlLQTtFQUNBO0VBQ0E7OztBQUdBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTs7O0FBR0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBOzs7QUFHQTtFQUNBO0VBQ0E7RUFHQTtFQUNBO0VBQ0E7RUFFQSJ9 */
