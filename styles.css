.mod-sidebar-layout .calloutmanager-setting-tab.vertical-tab-content {
  position: relative;
  padding: 0 !important;
  display: flex;
  flex-direction: column;
  overflow-y: initial;
}
.mod-sidebar-layout .calloutmanager-setting-tab.vertical-tab-content {
  --cm-setting-tab-controls-margin: calc(var(--size-4-12) - (var(--size-4-2) - var(--size-4-1)));
}
body.is-phone .mod-sidebar-layout .calloutmanager-setting-tab.vertical-tab-content {
  --cm-setting-tab-controls-margin: var(--size-4-2);
}

.calloutmanager-setting-tab-header {
  display: flex;
  align-items: center;
  padding-top: var(--size-4-1);
  padding-bottom: var(--size-4-1);
  padding-right: var(--size-4-2);
  border-bottom: 1px solid var(--background-modifier-border);
  background-color: var(--background-secondary);
}
body.is-phone .calloutmanager-setting-tab-header {
  background-color: var(--background-primary);
}

.calloutmanager-setting-tab-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: var(--size-4-12);
  min-height: calc(var(--size-4-2) + var(--input-height));
}
.calloutmanager-setting-tab-nav button {
  padding: var(--size-4-1) var(--size-4-2);
  box-shadow: none;
}
body.is-mobile .calloutmanager-setting-tab-nav {
  padding: var(--size-4-2);
}
body.is-phone .calloutmanager-setting-tab-nav, body.is-phone .calloutmanager-setting-tab-nav button {
  height: 100%;
  min-width: unset;
}

.calloutmanager-setting-tab-controls {
  flex: 3 3;
  display: flex;
  align-items: center;
  justify-content: end;
  gap: var(--size-4-2);
  padding-left: var(--cm-setting-tab-controls-margin);
}
.calloutmanager-setting-tab-controls > *:not(.modal-close-button) {
  display: contents;
}
.calloutmanager-setting-tab-controls > *:not(.modal-close-button) > input[type=text] {
  flex: 1 1 auto;
}

.calloutmanager-setting-tab-controls .modal-close-button {
  flex: 0 0 auto;
  position: static;
  left: unset;
  top: 0;
  right: 0;
  bottom: 0;
}
body.is-phone .calloutmanager-setting-tab-controls .modal-close-button {
  display: none;
}

.calloutmanager-setting-tab-title {
  flex: 1 1 auto;
  flex-wrap: nowrap;
}
.calloutmanager-setting-tab-title h2,
.calloutmanager-setting-tab-title h3 {
  margin: 0;
  word-break: keep-all;
}
.calloutmanager-setting-tab-title h3 {
  font-size: var(--font-ui-small);
}
body:not(.is-phone) .calloutmanager-setting-tab-title h3 {
  font-size: 0.8em;
}
body.is-phone .calloutmanager-setting-tab-title h2:has(+ h3) {
  display: none;
}

.calloutmanager-setting-tab-viewport {
  flex: 1 2 auto;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.calloutmanager-setting-tab-content {
  flex: 1 1 auto;
}
.calloutmanager-setting-tab-content body:not(.is-phone) {
  min-height: 100%;
}

.calloutmanager-callout-resolver {
  display: none !important;
}

.calloutmanager-search-error {
  width: 60%;
}
body.is-phone .calloutmanager-search-error {
  width: 100%;
}
.calloutmanager-search-error code {
  word-break: break-all;
  color: var(--text-accent);
}

.calloutmanager-search-error-suggestions {
  color: var(--text-muted);
}

.calloutmanager-preview-container-with-button {
  --calloutmanager-callout-edit-buttons-size: calc(var(--input-height) + 2 * var(--size-4-3));
  display: grid;
  grid-template-columns: 1fr var(--calloutmanager-callout-edit-buttons-size) var(--calloutmanager-callout-edit-buttons-size);
  align-items: center;
  gap: var(--size-4-2);
}
body.is-phone .calloutmanager-preview-container-with-button {
  --calloutmanager-callout-edit-buttons-size: var(--input-height);
}
.calloutmanager-preview-container-with-button > button {
  width: var(--calloutmanager-callout-edit-buttons-size);
  height: 100%;
}
body:not(.is-phone) .calloutmanager-preview-container-with-button > button {
  display: block;
  padding: 0 !important;
}

.calloutmanager-edit-callout-section {
  border-top: 1px solid var(--background-modifier-border);
  padding-top: var(--size-4-3);
  padding-bottom: var(--size-4-6);
}

.calloutmanager-edit-callout-section h2 {
  margin-bottom: 0.3em;
}
.calloutmanager-edit-callout-section h2 + p {
  margin-top: 0;
}

.calloutmanager-edit-callout-appearance .setting-item {
  border-top: none;
  padding-top: 0.375em;
}
.calloutmanager-edit-callout-appearance .setting-item:has(+ .setting-item) {
  padding-bottom: 0.375em;
}
body.is-phone .calloutmanager-edit-callout-appearance .setting-item:has(+ .setting-item) {
  margin-bottom: 0.7em;
}
.calloutmanager-edit-callout-appearance-json pre {
  border: rgba(var(--background-modifier-border)) 1px solid;
  border-radius: var(--callout-radius);
  padding: var(--size-4-2);
  background: var(--background-primary-alt);
  overflow-x: auto;
  margin: 0;
}

.calloutmanager-edit-callout-appearance-reset {
  width: 100%;
}

.callout.calloutmanager-preview {
  mix-blend-mode: unset !important;
  margin: 0 !important;
}

.calloutmanager-preview-container {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.calloutmanager-centerbox {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.calloutmanager-pane button[disabled] {
  box-shadow: none;
  background-color: var(--interactive-normal);
}
.calloutmanager-pane button[disabled]:hover {
  background-color: var(--interactive-normal);
  cursor: not-allowed;
}
.calloutmanager-pane input[type=color][disabled] {
  cursor: not-allowed;
}
.calloutmanager-pane input:invalid:not(:placeholder-shown) {
  border-color: var(--text-error);
}
body.is-phone .calloutmanager-pane input[type=color]::-webkit-color-swatch {
  border-radius: var(--button-radius);
  border: #f00 2px solid;
  border: 1px solid var(--checkbox-border-color);
}
.calloutmanager-pane .clickable-icon.mod-warning {
  color: var(--text-error);
  background: transparent;
}
.calloutmanager-pane .clickable-icon.mod-warning:hover {
  color: var(--text-error);
  background: transparent;
}

body.is-phone .calloutmanager-setting-tab-content .setting-item-control button.clickable-icon,
body.is-phone .calloutmanager-setting-tab-controls button.clickable-icon {
  width: var(--button-height);
}

body.is-phone .calloutmanager-setting-tab-content .setting-item-control button.clickable-icon {
  border: 1px solid var(--checkbox-border-color);
}
.calloutmanager-edit-callout-preview {
  padding-bottom: var(--size-4-8);
  min-height: 14em;
}
body.is-mobile .calloutmanager-edit-callout-preview {
  min-height: 35vh;
}

.calloutmanager-preview-editor {
  resize: vertical;
  width: 100%;
  min-height: 6em;
  margin-top: var(--size-4-3);
  background: transparent;
  font-size: var(--font-text-size);
  font-family: var(--font-text);
  line-height: var(--line-height-normal);
}

.calloutmanager-edit-callout-info {
  color: var(--text-muted);
}

.calloutmanager-edit-callout--invalid-color {
  color: var(--text-error);
}

.calloutmanager-edit-callout--callout-color {
  color: rgb(var(--resolved-callout-color));
}

.calloutmanager-edit-callout--callout-id,
.calloutmanager-edit-callout--callout-icon,
.calloutmanager-edit-callout--callout-source {
  color: var(--text-normal);
}

:root {
  --calloutmanager-reset-button-disabled-opacity: 0.3;
}

.calloutmanager-reset-button:is(.is-disabled, [disabled]) {
  opacity: var(--calloutmanager-reset-button-disabled-opacity);
}
.calloutmanager-reset-button:is(.is-disabled, [disabled]):hover {
  background-color: transparent;
}
.calloutmanager-reset-button:is(.is-disabled, [disabled]):active {
  color: var(--icon-color);
}

:root {
  --calloutmanager-icon-picker-size: 100px;
  --calloutmanager-icon-picker-gap: 8px;
  --calloutmanager-icon-picker-icon-size: 2.5em;
  --calloutmanager-icon-picker-id-size: 0.75em;
}

.calloutmanager-icon-picker {
  display: grid;
  grid-template-columns: repeat(auto-fill, var(--calloutmanager-icon-picker-size));
  grid-auto-rows: var(--calloutmanager-icon-picker-size);
  gap: var(--calloutmanager-icon-picker-gap);
  justify-content: center;
}
.calloutmanager-icon-picker .calloutmanager-icon-preview {
  height: 100%;
  --calloutmanager-icon-preview-icon-size: var(--calloutmanager-icon-picker-icon-size);
  --calloutmanager-icon-preview-id-size: var(--calloutmanager-icon-picker-id-size);
}

:root {
  --calloutmanager-icon-preview-icon-size: 1em;
  --calloutmanager-icon-preview-id-size: 0.8em;
}

.calloutmanager-icon-preview {
  position: relative;
  height: unset;
  min-height: 3em;
  display: flex;
  flex-direction: column;
}

.calloutmanager-icon-preview--icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, calc(-50% - 0.5em));
  --icon-size: var(--calloutmanager-icon-picker-icon-size);
}

.calloutmanager-icon-preview--id {
  width: 100%;
  margin-top: auto;
  white-space: normal;
  word-break: break-word;
  hyphens: manual;
  font-size: var(--calloutmanager-icon-picker-id-size);
}

/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX19maW5hbF9fLmNzcyIsInNvdXJjZXMiOlsic3JjL3VpL2NvbXBvbmVudC9pY29uLXByZXZpZXcudHMiLCJzcmMvcGFuZXMvc2VsZWN0LWljb24tcGFuZS50cyIsInNyYy91aS9jb21wb25lbnQvcmVzZXQtYnV0dG9uLnRzIiwic3JjL3BhbmVzL2VkaXQtY2FsbG91dC1wYW5lL3NlY3Rpb24taW5mby50cyIsInNyYy9wYW5lcy9lZGl0LWNhbGxvdXQtcGFuZS9zZWN0aW9uLXByZXZpZXcudHMiLCJzcmMvdWkvcGFuZS50cyIsInNyYy91aS9jb21wb25lbnQvY2FsbG91dC1wcmV2aWV3LnRzIiwic3JjL3BhbmVzL2VkaXQtY2FsbG91dC1wYW5lL2luZGV4LnRzIiwic3JjL3BhbmVzL21hbmFnZS1jYWxsb3V0cy1wYW5lLnRzIiwic3JjL2NhbGxvdXQtcmVzb2x2ZXIudHMiLCJzcmMvdWkvcGFuZWQtc2V0dGluZy10YWIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBnZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEEgcHJldmlldyBvZiBhbiBpY29uLlxyXG4gKlxyXG4gKiBUaGlzIGlzIGEgYnV0dG9uIHRoYXQgc2hvd3MgdGhlIGljb24gZ3JhcGhpYyBhbmQgaXRzIG5hbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSWNvblByZXZpZXdDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdHB1YmxpYyByZWFkb25seSBjb21wb25lbnRFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHVibGljIHJlYWRvbmx5IGljb25FbDogSFRNTEVsZW1lbnQ7XHJcblx0cHVibGljIHJlYWRvbmx5IGlkRWw6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0dGhpcy5jb21wb25lbnRFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldycgfSk7XHJcblx0XHR0aGlzLmljb25FbCA9IHRoaXMuY29tcG9uZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LS1pY29uJyB9KTtcclxuXHRcdHRoaXMuaWRFbCA9IHRoaXMuY29tcG9uZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LS1pZCcgfSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSBpY29uIG9mIHRoZSBpY29uIHByZXZpZXcgY29tcG9uZW50LlxyXG5cdCAqIFRoaXMgd2lsbCB1cGRhdGUgdGhlIGxhYmVsIGFuZCB0aGUgaWNvbiBTVkcuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gaWNvbiBUaGUgaWNvbiBuYW1lLlxyXG5cdCAqIEByZXR1cm5zIFRoaXMsIGZvciBjaGFpbmluZy5cclxuXHQgKi9cclxuXHRwdWJsaWMgc2V0SWNvbihpY29uOiBzdHJpbmcpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb25zdCBpY29uU3ZnID0gZ2V0SWNvbihpY29uKTtcclxuXHJcblx0XHR0aGlzLmNvbXBvbmVudEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1pY29uLWlkJywgaWNvbik7XHJcblx0XHR0aGlzLmlkRWwudGV4dENvbnRlbnQgPSBpY29uO1xyXG5cdFx0dGhpcy5pY29uRWwuZW1wdHkoKTtcclxuXHRcdGlmIChpY29uU3ZnICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy5pY29uRWwuYXBwZW5kQ2hpbGQoaWNvblN2Zyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSBgY2xpY2tgIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgY29tcG9uZW50LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGxpc3RlbmVyIFRoZSBsaXN0ZW5lci5cclxuXHQgKiBAcmV0dXJucyBUaGlzLCBmb3IgY2hhaW5pbmcuXHJcblx0ICovXHJcblx0cHVibGljIG9uQ2xpY2sobGlzdGVuZXI6IChldnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHR0aGlzLmNvbXBvbmVudEVsLm9uY2xpY2sgPSBsaXN0ZW5lcjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQ6cm9vdCB7XHJcblx0XHQtLWNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldy1pY29uLXNpemU6IDFlbTtcclxuXHRcdC0tY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LWlkLXNpemU6IDAuOGVtO1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldyB7XHJcblx0XHRwb3NpdGlvbjogcmVsYXRpdmU7XHJcblx0XHRoZWlnaHQ6IHVuc2V0O1xyXG5cdFx0bWluLWhlaWdodDogM2VtO1xyXG5cclxuXHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldy0taWNvbiB7XHJcblx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XHJcblx0XHR0b3A6IDUwJTtcclxuXHRcdGxlZnQ6IDUwJTtcclxuXHRcdHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIGNhbGMoLTUwJSAtIDAuNWVtKSk7XHJcblxyXG5cdFx0LS1pY29uLXNpemU6IHZhcigtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLWljb24tc2l6ZSk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3LS1pZCB7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHRcdG1hcmdpbi10b3A6IGF1dG87XHJcblxyXG5cdFx0Ly8gQnJlYWsgd29yZHMuXHJcblx0XHR3aGl0ZS1zcGFjZTogbm9ybWFsO1xyXG5cdFx0d29yZC1icmVhazogYnJlYWstd29yZDtcclxuXHRcdGh5cGhlbnM6IG1hbnVhbDtcclxuXHJcblx0XHRmb250LXNpemU6IHZhcigtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLWlkLXNpemUpO1xyXG5cdH1cclxuYDtcclxuIiwiaW1wb3J0IHsgU2VhcmNoUmVzdWx0LCBUZXh0Q29tcG9uZW50LCBnZXRJY29uSWRzLCBwcmVwYXJlRnV6enlTZWFyY2ggfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgQ2FsbG91dE1hbmFnZXJQbHVnaW4gZnJvbSAnJnBsdWdpbic7XHJcblxyXG5pbXBvcnQgeyBJY29uUHJldmlld0NvbXBvbmVudCB9IGZyb20gJyZ1aS9jb21wb25lbnQvaWNvbi1wcmV2aWV3JztcclxuaW1wb3J0IHsgVUlQYW5lLCBVSVBhbmVUaXRsZSB9IGZyb20gJyZ1aS9wYW5lJztcclxuXHJcbmNvbnN0IHJlY2VudEljb25zOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuXHJcbi8qKlxyXG4gKiBBIHVzZXIgaW50ZXJmYWNlIHBhbmUgZm9yIHNlbGVjdGluZyBhbiBpY29uLlxyXG4gKlxyXG4gKiBUaGlzIHByb3ZpZGVzIGEgc2VhcmNoYWJsZSBncmlkIG9mIGljb25zIHRoYXQgdGhlIHVzZXIgY2FuIHNjcm9sbCB0aHJvdWdoLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlbGVjdEljb25QYW5lIGV4dGVuZHMgVUlQYW5lPHZvaWQ+IHtcclxuXHRwdWJsaWMgcmVhZG9ubHkgdGl0bGU6IFVJUGFuZVRpdGxlO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbjtcclxuXHJcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nO1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0czogSWNvbkZvclNlYXJjaFtdO1xyXG5cclxuXHRwcml2YXRlIHVzZWRJY29uczogTWFwPHN0cmluZywgSWNvbkZvclNlYXJjaD47XHJcblx0cHJpdmF0ZSBhbGxJY29uczogSWNvbkZvclNlYXJjaFtdO1xyXG5cdHByaXZhdGUgcHJldmlld0xpbWl0OiBudW1iZXI7XHJcblx0cHJpdmF0ZSBwcmV2aWV3TGltaXRPdmVyYWdlOiBudW1iZXI7XHJcblx0cHJpdmF0ZSBvbkNob29zZTogKGljb246IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSBjb21wYXJlSWNvbnM6IChhOiBJY29uRm9yU2VhcmNoLCBiOiBJY29uRm9yU2VhcmNoKSA9PiBudW1iZXI7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuXHRcdHBsdWdpbjogQ2FsbG91dE1hbmFnZXJQbHVnaW4sXHJcblx0XHR0aXRsZTogVUlQYW5lVGl0bGUsXHJcblx0XHRvcHRpb25zOiB7IGxpbWl0PzogbnVtYmVyOyBvbkNob29zZTogKGljb246IHN0cmluZykgPT4gdm9pZCB9LFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5vbkNob29zZSA9IG9wdGlvbnMub25DaG9vc2U7XHJcblxyXG5cdFx0dGhpcy5wcmV2aWV3TGltaXQgPSBvcHRpb25zLmxpbWl0ID8/IDI1MDtcclxuXHRcdHRoaXMucHJldmlld0xpbWl0T3ZlcmFnZSA9IDA7XHJcblxyXG5cdFx0dGhpcy5zZWFyY2hRdWVyeSA9ICcnO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzID0gW107XHJcblxyXG5cdFx0Ly8gR2VuZXJhdGUgc3VnZ2VzdGlvbnMgYmFzZWQgb24gd2hhdCBvdGhlciBjYWxsb3V0cyBhcmUgdXNpbmcuXHJcblx0XHRjb25zdCB1c2VkSWNvbklkcyA9IG5ldyBTZXQocGx1Z2luLmNhbGxvdXRzLnZhbHVlcygpLm1hcCgoYykgPT4gYy5pY29uKSk7XHJcblx0XHRjb25zdCB1c2VkSWNvbnMgPSAodGhpcy51c2VkSWNvbnMgPSBuZXcgTWFwKCkpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhbiBlYXNpbHktc2VhcmNoYWJsZSBsaXN0IG9mIGljb25zLlxyXG5cdFx0dGhpcy5hbGxJY29ucyA9IGdldEljb25JZHMoKS5tYXAoKGlkKSA9PiB7XHJcblx0XHRcdGNvbnN0IGljb246IEljb25Gb3JTZWFyY2ggPSB7XHJcblx0XHRcdFx0aWQsXHJcblx0XHRcdFx0c2VhcmNoSWQ6IGlkLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRcdGNvbXBvbmVudDogbnVsbCxcclxuXHRcdFx0XHRzZWFyY2hSZXN1bHQ6IG51bGwsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpZiAodXNlZEljb25JZHMuaGFzKGlkKSkge1xyXG5cdFx0XHRcdHRoaXMudXNlZEljb25zLnNldChpZCwgaWNvbik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBpY29uO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNvbXBhcmF0b3IgZnVuY3Rpb24uXHJcblx0XHR0aGlzLmNvbXBhcmVJY29ucyA9IChcclxuXHRcdFx0eyBpZDogYSwgc2VhcmNoSWQ6IGFMQywgc2VhcmNoUmVzdWx0OiBhU1IgfSxcclxuXHRcdFx0eyBpZDogYiwgc2VhcmNoSWQ6IGJMQywgc2VhcmNoUmVzdWx0OiBiU1IgfSxcclxuXHRcdCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZWNlbmN5ID0gKHJlY2VudEljb25zLmhhcyhiKSA/IDEgOiAwKSAtIChyZWNlbnRJY29ucy5oYXMoYSkgPyAxIDogMCk7XHJcblx0XHRcdGNvbnN0IHN1Z2dlc3RlZCA9ICh1c2VkSWNvbnMuaGFzKGIpID8gMSA6IDApIC0gKHVzZWRJY29ucy5oYXMoYSkgPyAxIDogMCk7XHJcblx0XHRcdGNvbnN0IHNlYXJjaFJhbmsgPSAoYlNSPy5zY29yZSA/PyAwKSAtIChhU1I/LnNjb3JlID8/IDApO1xyXG5cclxuXHRcdFx0Ly8gUmFua2VkLlxyXG5cdFx0XHRjb25zdCBzdW0gPSByZWNlbmN5ICsgc3VnZ2VzdGVkICsgc2VhcmNoUmFuaztcclxuXHRcdFx0aWYgKHN1bSAhPT0gMCkgcmV0dXJuIHN1bTtcclxuXHJcblx0XHRcdC8vIExvY2FsZSBjb21wYXJlLlxyXG5cdFx0XHRyZXR1cm4gYkxDLmxvY2FsZUNvbXBhcmUoYUxDKTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICovXHJcblx0cHVibGljIHNlYXJjaChxdWVyeTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gcXVlcnk7XHJcblxyXG5cdFx0aWYgKHF1ZXJ5ID09PSAnJykge1xyXG5cdFx0XHR0aGlzLnJlc2V0U2VhcmNoUmVzdWx0cygpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc3Qgc2VhcmNoID0gcHJlcGFyZUZ1enp5U2VhcmNoKHF1ZXJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdFx0dGhpcy5jYWxjdWxhdGVTZWFyY2hSZXN1bHRzKChpY29uKSA9PiBzZWFyY2goaWNvbi5zZWFyY2hJZCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRzZSB0aGUgc2VhcmNoIHJlc3VsdHMgbGlzdC5cclxuXHQgKiBAcGFyYW0gc2VhcmNoIFRoZSBzZWFyY2ggZnVuY3Rpb24uXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIGNhbGN1bGF0ZVNlYXJjaFJlc3VsdHMoc2VhcmNoOiAoaWNvbjogSWNvbkZvclNlYXJjaCkgPT4gU2VhcmNoUmVzdWx0IHwgbnVsbCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzID0gdGhpcy5hbGxJY29ucy5maWx0ZXIoKGljb24pID0+IHtcclxuXHRcdFx0aWNvbi5zZWFyY2hSZXN1bHQgPSBzZWFyY2goaWNvbik7XHJcblx0XHRcdHJldHVybiBpY29uLnNlYXJjaFJlc3VsdCAhPSBudWxsO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzLnNvcnQodGhpcy5jb21wYXJlSWNvbnMpO1xyXG5cdFx0dGhpcy5wcmV2aWV3TGltaXRPdmVyYWdlID0gdGhpcy5zZWFyY2hSZXN1bHRzLnNwbGljZSh0aGlzLnByZXZpZXdMaW1pdCkubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVzZXRzIHRoZSBzZWFyY2ggcmVzdWx0cyBsaXN0IHRvIHNob3cgYSBkZWZhdWx0IGxpc3Qgb2Ygc3VnZ2VzdGVkIGljb25zLlxyXG5cdCAqL1xyXG5cdHByb3RlY3RlZCByZXNldFNlYXJjaFJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGFsbEljb25zLCBwcmV2aWV3TGltaXQsIHVzZWRJY29ucyB9ID0gdGhpcztcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0cyA9IEFycmF5LmZyb20oXHJcblx0XHRcdG5ldyBTZXQoW1xyXG5cdFx0XHRcdC4uLmFsbEljb25zLnNsaWNlKDAsIHByZXZpZXdMaW1pdCksXHJcblx0XHRcdFx0Li4uQXJyYXkuZnJvbSh1c2VkSWNvbnMudmFsdWVzKCkpLnNsaWNlKDAsIHByZXZpZXdMaW1pdCksXHJcblx0XHRcdF0pLnZhbHVlcygpLFxyXG5cdFx0KTtcclxuXHJcblx0XHQvLyBTb3J0LlxyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzLnNvcnQodGhpcy5jb21wYXJlSWNvbnMpLnNsaWNlKDAsIHRoaXMucHJldmlld0xpbWl0KTtcclxuXHRcdHRoaXMucHJldmlld0xpbWl0T3ZlcmFnZSA9IHRoaXMuYWxsSWNvbnMubGVuZ3RoIC0gdGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aDtcclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwdWJsaWMgZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gQWRkIHRoZSBpY29ucy5cclxuXHRcdGNvbnN0IGdyaWRFbCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKS5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlcicgfSk7XHJcblx0XHRmb3IgKGNvbnN0IGljb24gb2YgdGhpcy5zZWFyY2hSZXN1bHRzKSB7XHJcblx0XHRcdGlmIChpY29uLmNvbXBvbmVudCA9PSBudWxsKSB7XHJcblx0XHRcdFx0aWNvbi5jb21wb25lbnQgPSBuZXcgSWNvblByZXZpZXdDb21wb25lbnQoZ3JpZEVsKS5zZXRJY29uKGljb24uaWQpLmNvbXBvbmVudEVsO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGdyaWRFbC5hcHBlbmRDaGlsZChpY29uLmNvbXBvbmVudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgYSBkZWxlZ2F0ZWQgY2xpY2sgbGlzdGVuZXIuXHJcblx0XHRncmlkRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoeyB0YXJnZXROb2RlIH0pID0+IHtcclxuXHRcdFx0Zm9yICg7IHRhcmdldE5vZGUgIT0gbnVsbCAmJiB0YXJnZXROb2RlICE9PSBncmlkRWw7IHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRpZiAoISh0YXJnZXROb2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSBjb250aW51ZTtcclxuXHRcdFx0XHRjb25zdCBpY29uSWQgPSB0YXJnZXROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1pY29uLWlkJyk7XHJcblx0XHRcdFx0aWYgKGljb25JZCAhPSBudWxsKSB7XHJcblx0XHRcdFx0XHRyZWNlbnRJY29ucy5hZGQoaWNvbklkKTtcclxuXHRcdFx0XHRcdHRoaXMubmF2LmNsb3NlKCk7XHJcblx0XHRcdFx0XHR0aGlzLm9uQ2hvb3NlKGljb25JZCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgY29udGFpbmVyIGFuZCByZS1yZW5kZXIuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZ3JpZEVsKTtcclxuXHJcblx0XHQvLyBBZGQgYSBtZXNzYWdlIGlmIHRoZXJlIGFyZSB0b28gbWFueSBpY29ucyB0byBkaXNwbGF5LlxyXG5cdFx0Y29uc3QgeyBwcmV2aWV3TGltaXRPdmVyYWdlIH0gPSB0aGlzO1xyXG5cdFx0aWYgKHByZXZpZXdMaW1pdE92ZXJhZ2UgPiAwKSB7XHJcblx0XHRcdGNvbnN0IHsgcGx1cmFsSXMsIHBsdXJhbEljb24gfSA9XHJcblx0XHRcdFx0cHJldmlld0xpbWl0T3ZlcmFnZSA9PT0gMVxyXG5cdFx0XHRcdFx0PyB7IHBsdXJhbElzOiAnaXMnLCBwbHVyYWxJY29uOiAnaWNvbicgfVxyXG5cdFx0XHRcdFx0OiB7IHBsdXJhbElzOiAnYXJlJywgcGx1cmFsSWNvbjogJ2ljb25zJyB9O1xyXG5cdFx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHtcclxuXHRcdFx0XHR0ZXh0OlxyXG5cdFx0XHRcdFx0YFRoZXJlICR7cGx1cmFsSXN9ICR7cHJldmlld0xpbWl0T3ZlcmFnZX0gbW9yZSAke3BsdXJhbEljb259IHRvIHNob3cuIGAgK1xyXG5cdFx0XHRcdFx0YFJlZmluZSB5b3VyIHNlYXJjaCB0byBzZWUgbW9yZS5gLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwdWJsaWMgZGlzcGxheUNvbnRyb2xzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250cm9sc0VsIH0gPSB0aGlzO1xyXG5cclxuXHRcdG5ldyBUZXh0Q29tcG9uZW50KGNvbnRyb2xzRWwpXHJcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNlYXJjaFF1ZXJ5KVxyXG5cdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCBpY29ucy4uLicpXHJcblx0XHRcdC5vbkNoYW5nZSh0aGlzLnNlYXJjaC5iaW5kKHRoaXMpKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwcm90ZWN0ZWQgb25SZWFkeSgpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVzZXRTZWFyY2hSZXN1bHRzKCk7XHJcblx0fVxyXG59XHJcblxyXG5pbnRlcmZhY2UgSWNvbkZvclNlYXJjaCB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRzZWFyY2hJZDogc3RyaW5nO1xyXG5cdGNvbXBvbmVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdHNlYXJjaFJlc3VsdDogU2VhcmNoUmVzdWx0IHwgbnVsbDtcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIFN0eWxlczpcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdDpyb290IHtcclxuXHRcdC0tY2FsbG91dG1hbmFnZXItaWNvbi1waWNrZXItc2l6ZTogMTAwcHg7XHJcblx0XHQtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLWdhcDogOHB4O1xyXG5cdFx0LS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pY29uLXNpemU6IDIuNWVtO1xyXG5cdFx0LS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pZC1zaXplOiAwLjc1ZW07XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItaWNvbi1waWNrZXIge1xyXG5cdFx0ZGlzcGxheTogZ3JpZDtcclxuXHJcblx0XHRncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIHZhcigtLWNhbGxvdXRtYW5hZ2VyLWljb24tcGlja2VyLXNpemUpKTtcclxuXHRcdGdyaWQtYXV0by1yb3dzOiB2YXIoLS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1zaXplKTtcclxuXHRcdGdhcDogdmFyKC0tY2FsbG91dG1hbmFnZXItaWNvbi1waWNrZXItZ2FwKTtcclxuXHJcblx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHJcblx0XHQuY2FsbG91dG1hbmFnZXItaWNvbi1wcmV2aWV3IHtcclxuXHRcdFx0aGVpZ2h0OiAxMDAlO1xyXG5cclxuXHRcdFx0LS1jYWxsb3V0bWFuYWdlci1pY29uLXByZXZpZXctaWNvbi1zaXplOiB2YXIoLS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pY29uLXNpemUpO1xyXG5cdFx0XHQtLWNhbGxvdXRtYW5hZ2VyLWljb24tcHJldmlldy1pZC1zaXplOiB2YXIoLS1jYWxsb3V0bWFuYWdlci1pY29uLXBpY2tlci1pZC1zaXplKTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IEV4dHJhQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEEgcmVzZXQgYnV0dG9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJlc2V0QnV0dG9uQ29tcG9uZW50IGV4dGVuZHMgRXh0cmFCdXR0b25Db21wb25lbnQge1xyXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGNvbnRhaW5lckVsKTtcclxuXHRcdHRoaXMuc2V0SWNvbignbHVjaWRlLXVuZG8nKTtcclxuXHRcdHRoaXMuZXh0cmFTZXR0aW5nc0VsLmNsYXNzTGlzdC5hZGQoJ2NhbGxvdXRtYW5hZ2VyLXJlc2V0LWJ1dHRvbicpO1xyXG5cdH1cclxufVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQ6cm9vdCB7XHJcblx0XHQtLWNhbGxvdXRtYW5hZ2VyLXJlc2V0LWJ1dHRvbi1kaXNhYmxlZC1vcGFjaXR5OiAwLjM7XHJcblx0fVxyXG5cclxuXHQvLyBUaGUgXCJ1bmRvXCIgYnV0dG9uIHdoZW4gdGhlIHNldHRpbmcgaGFzIG5vdCBiZWVuIGNoYW5nZWQgZnJvbSB0aGUgZGVmYXVsdC5cclxuXHQuY2FsbG91dG1hbmFnZXItcmVzZXQtYnV0dG9uOmlzKC5pcy1kaXNhYmxlZCwgW2Rpc2FibGVkXSkge1xyXG5cdFx0b3BhY2l0eTogdmFyKC0tY2FsbG91dG1hbmFnZXItcmVzZXQtYnV0dG9uLWRpc2FibGVkLW9wYWNpdHkpO1xyXG5cclxuXHRcdCY6aG92ZXIge1xyXG5cdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuXHRcdH1cclxuXHJcblx0XHQmOmFjdGl2ZSB7XHJcblx0XHRcdGNvbG9yOiB2YXIoLS1pY29uLWNvbG9yKTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0VGhlbWVNYW5pZmVzdCB9IGZyb20gJ29ic2lkaWFuLWV4dHJhJztcclxuXHJcbmltcG9ydCB7IENhbGxvdXQsIENhbGxvdXRTb3VyY2UgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IGdldENvbG9yRnJvbUNhbGxvdXQgfSBmcm9tICcmY2FsbG91dC1yZXNvbHZlcic7XHJcbmltcG9ydCB7IHRvSGV4UkdCIH0gZnJvbSAnJmNvbG9yJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJJbmZvKGFwcDogQXBwLCBjYWxsb3V0OiBDYWxsb3V0LCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRjb25zdCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cdGNvbnN0IGNvbnRlbnRFbCA9IGZyYWcuY3JlYXRlRGl2KHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LXNlY3Rpb24nIH0pO1xyXG5cclxuXHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQWJvdXQgdGhpcyBDYWxsb3V0JyB9KTtcclxuXHRjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LWluZm8nIH0sIChlbCkgPT4ge1xyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnVGhlICcpO1xyXG5cdFx0ZWwuY3JlYXRlU3Bhbih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC0tY2FsbG91dC1pZCcsIHRleHQ6IGNhbGxvdXQuaWQgfSk7XHJcblx0XHRlbC5hcHBlbmRUZXh0KCcgY2FsbG91dCcpO1xyXG5cclxuXHRcdC8vIENvbG9yIGluZm9ybWF0aW9uLlxyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnIGhhcyAnKTtcclxuXHRcdGFwcGVuZENvbG9ySW5mbyhlbCwgY2FsbG91dCk7XHJcblxyXG5cdFx0Ly8gSWNvbiBpbmZvcm1hdGlvbi5cclxuXHRcdGVsLmFwcGVuZFRleHQoJyBhbmQgJyk7XHJcblx0XHRhcHBlbmRJY29uSW5mbyhlbCwgY2FsbG91dCk7XHJcblxyXG5cdFx0Ly8gU291cmNlIGluZm9ybWF0aW9uLlxyXG5cdFx0aWYgKGNhbGxvdXQuc291cmNlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0aWYgKGNhbGxvdXQuc291cmNlc1swXS50eXBlID09PSAnYnVpbHRpbicpIHtcclxuXHRcdFx0XHRlbC5hcHBlbmRUZXh0KCcuIEl0IGlzIG9uZSBvZiB0aGUgYnVpbHQtaW4gY2FsbG91dHMuJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbC5hcHBlbmRUZXh0KCcuIEl0IHdhcyBhZGRlZCB0byBPYnNpZGlhbiBieSB0aGUgJyk7XHJcblx0XHRcdGFwcGVuZFNvdXJjZUluZm8oYXBwLCBlbCwgY2FsbG91dC5zb3VyY2VzWzBdKTtcclxuXHRcdFx0ZWwuYXBwZW5kVGV4dCgnLicpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnLiBUaGUgY2FsbG91dCBjb21lcyBmcm9tOicpO1xyXG5cdFx0Y29uc3Qgc291cmNlcyA9IGVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LXNvdXJjZS1saXN0JyB9KTtcclxuXHRcdGZvciAoY29uc3Qgc291cmNlIG9mIGNhbGxvdXQuc291cmNlcykge1xyXG5cdFx0XHRjb25zdCBpdGVtRWwgPSBzb3VyY2VzLmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0XHRpdGVtRWwuYXBwZW5kVGV4dCgnVGhlICcpO1xyXG5cdFx0XHRhcHBlbmRTb3VyY2VJbmZvKGFwcCwgaXRlbUVsLCBzb3VyY2UpO1xyXG5cdFx0XHRpdGVtRWwuYXBwZW5kVGV4dCgnLicpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBSZW5kZXIgdGhlIGZyYWdtZW50LlxyXG5cdGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGZyYWcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBlbmRJY29uSW5mbyhlbDogSFRNTEVsZW1lbnQsIGNhbGxvdXQ6IENhbGxvdXQpOiB2b2lkIHtcclxuXHRlbC5hcHBlbmRUZXh0KCdpcyB1c2luZyB0aGUgaWNvbiAnKTtcclxuXHRlbC5jcmVhdGVFbCgnY29kZScsIHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LWljb24nLCB0ZXh0OiBjYWxsb3V0Lmljb24gfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGVuZENvbG9ySW5mbyhlbDogSFRNTEVsZW1lbnQsIGNhbGxvdXQ6IENhbGxvdXQpOiB2b2lkIHtcclxuXHRjb25zdCBjYWxsb3V0Q29sb3IgPSBnZXRDb2xvckZyb21DYWxsb3V0KGNhbGxvdXQpO1xyXG5cclxuXHQvLyBJbnZhbGlkIGNvbG9yLlxyXG5cdGlmIChjYWxsb3V0Q29sb3IgPT0gbnVsbCkge1xyXG5cdFx0ZWwuYXBwZW5kVGV4dCgnYW4gaW52YWxpZCBjb2xvciAoJyk7XHJcblx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHtcclxuXHRcdFx0Y2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jb2xvci1pbnZhbGlkJyxcclxuXHRcdFx0dGV4dDogY2FsbG91dC5jb2xvci50cmltKCksXHJcblx0XHR9KTtcclxuXHRcdGVsLmFwcGVuZFRleHQoJyknKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIFZhbGlkIGNvbG9yLlxyXG5cdGVsLmFwcGVuZFRleHQoJ3RoZSBjb2xvciAnKTtcclxuXHRlbC5jcmVhdGVFbChcclxuXHRcdCdjb2RlJyxcclxuXHRcdHsgY2xzOiAnY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LWNvbG9yJywgdGV4dDogdG9IZXhSR0IoY2FsbG91dENvbG9yKSB9LFxyXG5cdFx0KGNvbG9yRWwpID0+IGNvbG9yRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tcmVzb2x2ZWQtY2FsbG91dC1jb2xvcicsIGNhbGxvdXQuY29sb3IpLFxyXG5cdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGVuZFNvdXJjZUluZm8oYXBwOiBBcHAsIGVsOiBIVE1MRWxlbWVudCwgc291cmNlOiBDYWxsb3V0U291cmNlKTogYm9vbGVhbiB7XHJcblx0c3dpdGNoIChzb3VyY2UudHlwZSkge1xyXG5cdFx0Y2FzZSAnYnVpbHRpbic6XHJcblx0XHRcdGVsLmFwcGVuZFRleHQoJ2J1aWx0LWluIGNhbGxvdXRzJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Y2FzZSAnY3VzdG9tJzpcclxuXHRcdFx0ZWwuYXBwZW5kVGV4dCgnY3VzdG9tIGNhbGxvdXRzIHlvdSBjcmVhdGVkJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Y2FzZSAnc25pcHBldCc6XHJcblx0XHRcdGVsLmFwcGVuZFRleHQoJ0NTUyBzbmlwcGV0ICcpO1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHtcclxuXHRcdFx0XHRjbHM6ICdjYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtc291cmNlJyxcclxuXHRcdFx0XHR0ZXh0OiBgJHtzb3VyY2Uuc25pcHBldH0uY3NzYCxcclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Y2FzZSAndGhlbWUnOiB7XHJcblx0XHRcdGVsLmFwcGVuZFRleHQoJ3RoZW1lICcpO1xyXG5cdFx0XHRjb25zdCB0aGVtZU5hbWUgPSBnZXRUaGVtZU1hbmlmZXN0KGFwcCwgc291cmNlLnRoZW1lKT8ubmFtZSA/PyBzb3VyY2UudGhlbWU7XHJcblx0XHRcdGVsLmNyZWF0ZVNwYW4oeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtc291cmNlJywgdGV4dDogdGhlbWVOYW1lIH0pO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gVGhlIGluZm8gcGFyYWdyYXBoIGFuZCBsaXN0LlxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtaW5mbyB7XHJcblx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1pbnZhbGlkLWNvbG9yIHtcclxuXHRcdGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcclxuXHR9XHJcblxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtY29sb3Ige1xyXG5cdFx0Y29sb3I6IHJnYih2YXIoLS1yZXNvbHZlZC1jYWxsb3V0LWNvbG9yKSk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LWlkLFxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtLWNhbGxvdXQtaWNvbixcclxuXHQuY2FsbG91dG1hbmFnZXItZWRpdC1jYWxsb3V0LS1jYWxsb3V0LXNvdXJjZSB7XHJcblx0XHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC0tY2FsbG91dC1zb3VyY2UtbGlzdCB7XHJcblx0fVxyXG5gO1xyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE1hcmtkb3duUmVuZGVyZXIsIFRleHRBcmVhQ29tcG9uZW50LCBnZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50Q29sb3JTY2hlbWUgfSBmcm9tICdvYnNpZGlhbi1leHRyYSc7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0IH0gZnJvbSAnJmNhbGxvdXQnO1xyXG5pbXBvcnQgeyBDYWxsb3V0U2V0dGluZ3MsIGNhbGxvdXRTZXR0aW5nc1RvQ1NTLCBjdXJyZW50Q2FsbG91dEVudmlyb25tZW50IH0gZnJvbSAnJmNhbGxvdXQtc2V0dGluZ3MnO1xyXG5pbXBvcnQgQ2FsbG91dE1hbmFnZXJQbHVnaW4gZnJvbSAnJnBsdWdpbic7XHJcblxyXG5pbXBvcnQgeyBJc29sYXRlZENhbGxvdXRQcmV2aWV3Q29tcG9uZW50IH0gZnJvbSAnJnVpL2NvbXBvbmVudC9jYWxsb3V0LXByZXZpZXcnO1xyXG5pbXBvcnQgeyBnZXRUaXRsZUZyb21DYWxsb3V0IH0gZnJvbSAnJmNhbGxvdXQtcmVzb2x2ZXInO1xyXG5cclxuLyoqXHJcbiAqIEEgY2FsbG91dCBwcmV2aWV3IGZvciB0aGUgZWRpdCBjYWxsb3V0IHBhbmUuXHJcbiAqXHJcbiAqIFRoaXMgYWxsb3dzIHRoZSBwcmV2aWV3IHRleHQgdG8gYmUgZWRpdGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVkaXRDYWxsb3V0UGFuZVByZXZpZXcge1xyXG5cdHB1YmxpYyByZWFkb25seSBwcmV2aWV3OiBJc29sYXRlZENhbGxvdXRQcmV2aWV3Q29tcG9uZW50O1xyXG5cclxuXHRwcml2YXRlIHJlYWRvbmx5IHBsdWdpbjogQ2FsbG91dE1hbmFnZXJQbHVnaW47XHJcblx0cHJpdmF0ZSByZWFkb25seSBzZWN0aW9uRWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgY2FsbG91dElkOiBzdHJpbmc7XHJcblxyXG5cdHByaXZhdGUgcHJldmlld01hcmtkb3duID0gJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0Lic7XHJcblx0cHJpdmF0ZSBwcmV2aWV3RWRpdG9yRWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0cHJpdmF0ZSBjYWxsb3V0SGFzSWNvblJlYWR5OiBib29sZWFuO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IocGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbiwgY2FsbG91dDogQ2FsbG91dCwgdmlld09ubHk6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuY2FsbG91dEhhc0ljb25SZWFkeSA9IGZhbHNlO1xyXG5cdFx0dGhpcy5jYWxsb3V0SWQgPSBjYWxsb3V0LmlkO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRoZSBjYWxsb3V0IHByZXZpZXcuXHJcblx0XHRjb25zdCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cdFx0dGhpcy5zZWN0aW9uRWwgPSBmcmFnLmNyZWF0ZURpdih7XHJcblx0XHRcdGNsczogWydjYWxsb3V0bWFuYWdlci1wcmV2aWV3LWNvbnRhaW5lcicsICdjYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtcHJldmlldyddLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wcmV2aWV3ID0gbmV3IElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQodGhpcy5zZWN0aW9uRWwsIHtcclxuXHRcdFx0aWQ6IGNhbGxvdXQuaWQsXHJcblx0XHRcdHRpdGxlOiBnZXRUaXRsZUZyb21DYWxsb3V0KGNhbGxvdXQpLFxyXG5cdFx0XHRpY29uOiBjYWxsb3V0Lmljb24sXHJcblx0XHRcdGNvbG9yU2NoZW1lOiBnZXRDdXJyZW50Q29sb3JTY2hlbWUocGx1Z2luLmFwcCksXHJcblx0XHRcdGNvbnRlbnQ6IChjb250YWluZXJFbCkgPT4ge1xyXG5cdFx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLnByZXZpZXdNYXJrZG93biB9KTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE1ha2UgdGhlIHByZXZpZXcgZWRpdGFibGUuXHJcblx0XHRpZiAoIXZpZXdPbmx5KSB7XHJcblx0XHRcdHRoaXMubWFrZUVkaXRhYmxlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG1ha2VFZGl0YWJsZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMucHJldmlldy5jb250ZW50RWwgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gQWRkIGEgY2xpY2sgaGFuZGxlciB0byBjaGFuZ2UgdGhlIHByZXZpZXcuXHJcblx0XHR0aGlzLnByZXZpZXdFZGl0b3JFbCA9IG51bGw7XHJcblx0XHR0aGlzLnByZXZpZXcuY2FsbG91dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5wcmV2aWV3RWRpdG9yRWwgIT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgaGVpZ2h0ID0gY29udGVudEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHRcdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRcdG5ldyBUZXh0QXJlYUNvbXBvbmVudChjb250ZW50RWwpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucHJldmlld01hcmtkb3duKVxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignUHJldmlldyBNYXJrZG93bi4uLicpXHJcblx0XHRcdFx0LnRoZW4oKGMpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGlucHV0RWwgPSAodGhpcy5wcmV2aWV3RWRpdG9yRWwgPSBjLmlucHV0RWwpO1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnaGVpZ2h0JywgYCR7aGVpZ2h0fXB4YCk7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmNsYXNzTGlzdC5hZGQoJ2NhbGxvdXRtYW5hZ2VyLXByZXZpZXctZWRpdG9yJyk7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gYy5nZXRWYWx1ZSgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnByZXZpZXdFZGl0b3JFbCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJldmlld01hcmtkb3duID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2hhbmdlQ29udGVudCh2YWx1ZSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaGVzIHRoZSBjYWxsb3V0IHByZXZpZXcncyBpY29uLlxyXG5cdCAqIFdlIG5lZWQgdG8gZG8gdGhpcyBhZnRlciB0aGUgcHJldmlldyBpcyBhdHRhY2hlZCB0byBET00sIGFzIHdlIGNhbid0IGdldCB0aGUgY29ycmVjdCBpY29uIHVudGlsIHRoYXQgaGFwcGVucy5cclxuXHQgKi9cclxuXHRwcm90ZWN0ZWQgcmVmcmVzaFByZXZpZXdJY29uKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBpY29uRWwsIGNhbGxvdXRFbCB9ID0gdGhpcy5wcmV2aWV3O1xyXG5cclxuXHRcdGlmICh3aW5kb3cuZG9jdW1lbnQuY29udGFpbnModGhpcy5zZWN0aW9uRWwpKSB7XHJcblx0XHRcdGNvbnN0IGljb24gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYWxsb3V0RWwpLmdldFByb3BlcnR5VmFsdWUoJy0tY2FsbG91dC1pY29uJykudHJpbSgpO1xyXG5cdFx0XHRjb25zdCBpY29uU3ZnID0gZ2V0SWNvbihpY29uKSA/PyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdmcnKTtcclxuXHJcblx0XHRcdGljb25FbC5lbXB0eSgpO1xyXG5cdFx0XHRpY29uRWwuYXBwZW5kQ2hpbGQoaWNvblN2Zyk7XHJcblxyXG5cdFx0XHR0aGlzLmNhbGxvdXRIYXNJY29uUmVhZHkgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgcHJldmlldyB0aGF0IGlzIGRpc3BsYXllZCBpbnNpZGUgdGhlIGNhbGxvdXQuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gbWFya2Rvd24gVGhlIG1hcmtkb3duIHRvIHJlbmRlci5cclxuXHQgKi9cclxuXHRwdWJsaWMgYXN5bmMgY2hhbmdlQ29udGVudChtYXJrZG93bjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBjb250ZW50RWwgPSB0aGlzLnByZXZpZXcuY29udGVudEVsIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihtYXJrZG93biwgY29udGVudEVsLCAnJywgdW5kZWZpbmVkIGFzIHVua25vd24gYXMgQ29tcG9uZW50KTtcclxuXHRcdH0gY2F0Y2ggKGV4KSB7XHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnY29kZScpLmNyZWF0ZUVsKCdwcmUnLCB7IHRleHQ6IG1hcmtkb3duIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgc2V0dGluZ3MgZm9yIHRoZSBjYWxsb3V0LlxyXG5cdCAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgY3VzdG9taXplZCBjYWxsb3V0LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHNldHRpbmdzIFRoZSBzZXR0aW5ncyB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIGFzeW5jIGNoYW5nZVNldHRpbmdzKHNldHRpbmdzOiBDYWxsb3V0U2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHsgcHJldmlldyB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHN0eWxlcyA9IGNhbGxvdXRTZXR0aW5nc1RvQ1NTKHRoaXMuY2FsbG91dElkLCBzZXR0aW5ncywgY3VycmVudENhbGxvdXRFbnZpcm9ubWVudCh0aGlzLnBsdWdpbi5hcHApKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgdGhlIGN1c3RvbSBzdHlsZXNoZWV0IG9mIHRoZSBjYWxsb3V0IHByZXZpZXcuXHJcblx0XHRwcmV2aWV3LmN1c3RvbVN0eWxlRWwudGV4dENvbnRlbnQgPSBzdHlsZXM7XHJcblx0XHRwcmV2aWV3LnJlc2V0U3R5bGVQcm9wZXJ0eU92ZXJyaWRlcygpO1xyXG5cdFx0cHJldmlldy5yZW1vdmVTdHlsZXMoKGVsKSA9PiBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dC1tYW5hZ2VyJykgPT09ICdzdHlsZS1vdmVycmlkZXMnKTtcclxuXHJcblx0XHR0aGlzLmNhbGxvdXRIYXNJY29uUmVhZHkgPSBmYWxzZTtcclxuXHJcblx0XHQvLyBSZW1vdmUgdGhlIHByZXZpZXcgc3R5bGVzIGFkZGVkIGJ5IGNhbGxvdXQgbWFuYWdlci5cclxuXHRcdC8vIE5vdyB0aGF0IHdlIGNoYW5nZWQgdGhlIHNldHRpbmdzLCBoYXZpbmcgdGhlIG9sZCBzdHlsZXMgd291bGQgbGVhZCB0byBpbmNvbnNpc3RlbmN5LlxyXG5cdFx0cHJldmlldy5yZW1vdmVTdHlsZXMoKGVsKSA9PiBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5qZWN0LWlkJykgPT09ICdjYWxsb3V0LXNldHRpbmdzJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBdHRhY2hlcyB0aGUgcHJldmlldyB0byBhIGNvbnRhaW5lci5cclxuXHQgKiBAcGFyYW0gY29udGFpbmVyRWwgVGhlIGNvbnRhaW5lciBlbGVtZW50LlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhdHRhY2goY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRjb250YWluZXJFbC5hcHBlbmRDaGlsZCh0aGlzLnNlY3Rpb25FbCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmNhbGxvdXRIYXNJY29uUmVhZHkpIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoUHJldmlld0ljb24oKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gRW5zdXJlIHRoZSBwcmV2aWV3IHRha2VzIGEgY2VydGFpbiBoZWlnaHQuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1wcmV2aWV3IHtcclxuXHRcdHBhZGRpbmctYm90dG9tOiB2YXIoLS1zaXplLTQtOCk7XHJcblx0XHRtaW4taGVpZ2h0OiAxNGVtO1xyXG5cclxuXHRcdGJvZHkuaXMtbW9iaWxlICYge1xyXG5cdFx0XHRtaW4taGVpZ2h0OiAzNXZoO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhlIHRleHQgYm94IHRoYXQgYWxsb3dzIHRoZSBwcmV2aWV3IHRvIGJlIGNoYW5nZWQuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXByZXZpZXctZWRpdG9yIHtcclxuXHRcdHJlc2l6ZTogdmVydGljYWw7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHRcdG1pbi1oZWlnaHQ6IDZlbTtcclxuXHJcblx0XHRtYXJnaW4tdG9wOiB2YXIoLS1zaXplLTQtMyk7XHJcblxyXG5cdFx0Ly8gVHJ5IHRvIGJlIGFzIHRyYW5zcGFyZW50IGFzIHBvc3NpYmxlLlxyXG5cdFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcblx0XHRmb250LXNpemU6IHZhcigtLWZvbnQtdGV4dC1zaXplKTtcclxuXHRcdGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LXRleHQpO1xyXG5cdFx0bGluZS1oZWlnaHQ6IHZhcigtLWxpbmUtaGVpZ2h0LW5vcm1hbCk7XHJcblx0fVxyXG5gO1xyXG4iLCJleHBvcnQgaW50ZXJmYWNlIFVJUGFuZU5hdmlnYXRpb24ge1xyXG5cdGNsb3NlKCk6IHZvaWQ7XHJcblx0b3BlbihwYW5lOiBVSVBhbmU8dW5rbm93bj4pOiB2b2lkO1xyXG5cdHJlcGxhY2UocGFuZTogVUlQYW5lPHVua25vd24+KTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVUlQYW5lVGl0bGUgPSBzdHJpbmcgfCB7IHRpdGxlOiBzdHJpbmc7IHN1YnRpdGxlOiBzdHJpbmcgfTtcclxuXHJcbi8qKlxyXG4gKiBBIHNldHRpbmcgcGFuZSB0aGF0IGV4aXN0cyB3aXRoaW4gdGhlIHNldHRpbmcgdGFiLlxyXG4gKlxyXG4gKiBUaGlzIGhhcyBpdHMgb3duIG5hdmlnYXRpb24gYW5kIHN0aWNreSBoZWFkZXIhXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVUlQYW5lPFMgPSB1bmtub3duPiB7XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IG5hdiE6IFVJUGFuZU5hdmlnYXRpb247XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IGNvbnRhaW5lckVsITogSFRNTEVsZW1lbnQ7XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IGNvbnRyb2xzRWwhOiBIVE1MRWxlbWVudDtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIHRpdGxlIG9mIHRoZSBwYW5lLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhYnN0cmFjdCBnZXQgdGl0bGUoKTogVUlQYW5lVGl0bGU7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGxlZCB0byByZW5kZXIgdGhlIHBhbmUgdG8gaXRzIGNvbnRhaW5lciBlbGVtZW50LlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhYnN0cmFjdCBkaXNwbGF5KCk6IHZvaWQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGxlZCB0byBkaXNwbGF5IHRoZSBjb250cm9scyBmb3IgdGhlIHBhbmUuXHJcblx0ICovXHJcblx0cHVibGljIGRpc3BsYXlDb250cm9scygpOiB2b2lkIHt9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGxlZCB3aGVuIHRoZSBwYW5lIGlzIGNyZWF0ZWQgYW5kIGF0dGFjaGVkIHRvIHRoZSBzZXR0aW5nIHRhYiwgYnV0IGJlZm9yZSB7QGxpbmsgZGlzcGxheX0gaXMgY2FsbGVkLlxyXG5cdCAqL1xyXG5cdHByb3RlY3RlZCBvblJlYWR5KCk6IHZvaWQge31cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGVkIHdoZW4gdGhlIHBhbmUgaXMgcmVtb3ZlZCBhbmQgcmVhZHkgdG8gYmUgZGVzdHJveWVkLlxyXG5cdCAqIEFueSBpbXBvcnRhbnQgc2V0dGluZ3Mgc2hvdWxkIGJlIHNhdmVkIGhlcmUuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gY2FuY2VsbGVkIElmIHRydWUsIHRoZSB1c2VyIGNsb3NlZCB0aGUgcGFuZSB3aXRoIHRoZSBlc2NhcGUga2V5LlxyXG5cdCAqL1xyXG5cdHByb3RlY3RlZCBvbkNsb3NlKGNhbmNlbGxlZDogYm9vbGVhbik6IHZvaWQge31cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGVkIHRvIHNhdmUgdGhlIHN0YXRlIG9mIHRoZSBzZXR0aW5nIHBhbmUuXHJcblx0ICogVGhpcyBpcyB1c2VkIGZvciBzdXNwZW5kaW5nIGEgcGFuZSB3aGVuIGFub3RoZXIgcGFuZSBjb3ZlcnMgaXQgdXAuXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyBUaGUgc2F2ZWQgc3RhdGUuXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIHN1c3BlbmRTdGF0ZSgpOiBTIHtcclxuXHRcdHJldHVybiB1bmRlZmluZWQgYXMgdW5rbm93biBhcyBTO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsbGVkIHRvIGxvYWQgdGhlIHN0YXRlIG9mIHRoZSBzZXR0aW5nIHBhbmUuXHJcblx0ICogVGhpcyBpcyBjYWxsZWQgYmVmb3JlIHtAbGluayBkaXNwbGF5fS5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBzdGF0ZSBUaGUgc3RhdGUgdG8gcmVzdG9yZS5cclxuXHQgKi9cclxuXHRwcm90ZWN0ZWQgcmVzdG9yZVN0YXRlKHN0YXRlOiBTKTogdm9pZCB7fVxyXG59XHJcblxyXG4vKipcclxuICogQSB0eXBlIGZvciBhIHtAbGluayBVSVBhbmV9LCBidXQgd2l0aCBhbGwgcHJvcGVydGllcyBleHBvc2VkIGFuZCB3cml0YWJsZS5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBVSVBhbmVfRlJJRU5EPFMgPSB1bmtub3duPiA9IHtcclxuXHQtcmVhZG9ubHkgW2tleSBpbiBrZXlvZiBVSVBhbmU8Uz5dOiBVSVBhbmU8Uz5ba2V5XTtcclxufSAmIHtcclxuXHRuYXY6IFVJUGFuZTxTPlsnbmF2J10gfCB1bmRlZmluZWQ7XHJcblx0Y29udGFpbmVyRWw6IFVJUGFuZTxTPlsnY29udGFpbmVyRWwnXSB8IHVuZGVmaW5lZDtcclxuXHRjb250cm9sc0VsOiBVSVBhbmU8Uz5bJ2NvbnRyb2xzRWwnXSB8IHVuZGVmaW5lZDtcclxuXHRvblJlYWR5OiBVSVBhbmU8Uz5bJ29uUmVhZHknXTtcclxuXHRvbkNsb3NlOiBVSVBhbmU8Uz5bJ29uQ2xvc2UnXTtcclxuXHRzdXNwZW5kU3RhdGU6IFVJUGFuZTxTPlsnc3VzcGVuZFN0YXRlJ107XHJcblx0cmVzdG9yZVN0YXRlOiBVSVBhbmU8Uz5bJ3Jlc3RvcmVTdGF0ZSddO1xyXG59O1xyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIFN0eWxlczpcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdC8vIEEgY2VudGVyZWQgYm94IHRvIGhlbHAgZGlzcGxheSBoZWxwIG1lc3NhZ2VzIGZvciBlbXB0eSBzZWFyY2hlcy5cclxuXHQuY2FsbG91dG1hbmFnZXItY2VudGVyYm94IHtcclxuXHRcdHdpZHRoOiAxMDAlO1xyXG5cdFx0aGVpZ2h0OiAxMDAlO1xyXG5cclxuXHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdH1cclxuXHJcblx0Ly8gSW1wcm92ZSBmb3JtIFVYLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1wYW5lIHtcclxuXHRcdC8vIE1ha2UgZGlzYWJsZWQgYnV0dG9ucyBsb29rIGRpc2FibGVkLlxyXG5cdFx0YnV0dG9uW2Rpc2FibGVkXSB7XHJcblx0XHRcdGJveC1zaGFkb3c6IG5vbmU7XHJcblx0XHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XHJcblxyXG5cdFx0XHQmOmhvdmVyIHtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xyXG5cdFx0XHRcdGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpbnB1dFt0eXBlPSdjb2xvciddW2Rpc2FibGVkXSB7XHJcblx0XHRcdGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTWFrZSBpbnZhbGlkIHRleHQgYm94ZXMgbG9vayBpbnZhbGlkLlxyXG5cdFx0aW5wdXQ6aW52YWxpZDpub3QoOnBsYWNlaG9sZGVyLXNob3duKSB7XHJcblx0XHRcdGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSW1wcm92ZSBjb2xvciBwaWNrZXIgVVggb24gbW9iaWxlLlxyXG5cdFx0Ym9keS5pcy1waG9uZSAmIGlucHV0W3R5cGU9J2NvbG9yJ106Oi13ZWJraXQtY29sb3Itc3dhdGNoIHtcclxuXHRcdFx0Ym9yZGVyLXJhZGl1czogdmFyKC0tYnV0dG9uLXJhZGl1cyk7XHJcblx0XHRcdGJvcmRlcjogI2YwMCAycHggc29saWQ7XHJcblx0XHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNoZWNrYm94LWJvcmRlci1jb2xvcik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTWFrZSBjbGlja2FibGUgaWNvbnMgd2l0aCAnbW9kLXdhcm5pbmcnIG5vdCBzb2xpZC5cclxuXHRcdC5jbGlja2FibGUtaWNvbi5tb2Qtd2FybmluZyB7XHJcblx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcclxuXHRcdFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcblx0XHRcdCY6aG92ZXIge1xyXG5cdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gTWFrZSBjbGlja2FibGUgaWNvbnMgbm90IHRvbyBsYXJnZSBvbiBtb2JpbGUuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRlbnQgLnNldHRpbmctaXRlbS1jb250cm9sLFxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi1jb250cm9scyB7XHJcblx0XHRib2R5LmlzLXBob25lICYgYnV0dG9uLmNsaWNrYWJsZS1pY29uIHtcclxuXHRcdFx0d2lkdGg6IHZhcigtLWJ1dHRvbi1oZWlnaHQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gTWFrZSBjbGlja2FibGUgaWNvbnMgaW4gc2V0dGluZyBwYW5lcyBtb3JlIHZpc2libGUgb24gbW9iaWxlLlxyXG5cdGJvZHkuaXMtcGhvbmUgLmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRlbnQgLnNldHRpbmctaXRlbS1jb250cm9sIGJ1dHRvbi5jbGlja2FibGUtaWNvbiB7XHJcblx0XHRib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jaGVja2JveC1ib3JkZXItY29sb3IpO1xyXG5cclxuXHRcdCYuY2FsbG91dG1hbmFnZXItc2V0dGluZy1zZXQge1xyXG5cdFx0XHQvLyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcblx0XHR9XHJcblx0fVxyXG5gO1xyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIGdldEljb24gfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0SUQgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IFJHQiB9IGZyb20gJyZjb2xvcic7XHJcblxyXG5jb25zdCBOT19BVFRBQ0ggPSBTeW1ib2woKTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJldmlld09wdGlvbnMge1xyXG5cdC8qKlxyXG5cdCAqIFRoZSBjYWxsb3V0IElELlxyXG5cdCAqL1xyXG5cdGlkOiBDYWxsb3V0SUQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBpY29uIHRvIGRpc3BsYXkgaW4gdGhlIGNhbGxvdXQuXHJcblx0ICogVGhpcyBzaG91bGQgYmUga25vd24gaW4gYWR2YW5jZS5cclxuXHQgKi9cclxuXHRpY29uOiBzdHJpbmc7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBjb2xvciBvZiB0aGUgY2FsbG91dC5cclxuXHQgKi9cclxuXHRjb2xvcj86IFJHQjtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIHRpdGxlIHRvIHNob3cuXHJcblx0ICogVGhlIGNhbGxvdXQgSUQgd2lsbCBiZSB1c2VkIGlmIHRoaXMgaXMgb21pdHRlZC5cclxuXHQgKi9cclxuXHR0aXRsZT86IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCB8IHN0cmluZyB8ICgodGl0bGVFbDogSFRNTEVsZW1lbnQpID0+IHVua25vd24pO1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgY29udGVudCB0byBzaG93LlxyXG5cdCAqL1xyXG5cdGNvbnRlbnQ/OiBIVE1MRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQgfCBzdHJpbmcgfCAoKGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpID0+IHVua25vd24pO1xyXG59XHJcblxyXG4vKipcclxuICogQSBjb21wb25lbnQgdGhhdCBkaXNwbGF5cyBhIHByZXZpZXcgb2YgYSBjYWxsb3V0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENhbGxvdXRQcmV2aWV3Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHRwdWJsaWMgcmVhZG9ubHkgY2FsbG91dEVsOiBIVE1MRWxlbWVudDtcclxuXHRwdWJsaWMgcmVhZG9ubHkgY29udGVudEVsOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuXHRwdWJsaWMgcmVhZG9ubHkgdGl0bGVFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHVibGljIHJlYWRvbmx5IGljb25FbDogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQgfCB0eXBlb2YgTk9fQVRUQUNILCBvcHRpb25zOiBQcmV2aWV3T3B0aW9ucykge1xyXG5cdFx0c3VwZXIoKTtcclxuXHRcdGNvbnN0IHsgY29sb3IsIGljb24sIGlkLCB0aXRsZSwgY29udGVudCB9ID0gb3B0aW9ucztcclxuXHJcblx0XHRjb25zdCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuXHRcdC8vIEJ1aWxkIHRoZSBjYWxsb3V0LlxyXG5cdFx0Y29uc3QgY2FsbG91dEVsID0gKHRoaXMuY2FsbG91dEVsID0gZnJhZy5jcmVhdGVEaXYoeyBjbHM6IFsnY2FsbG91dCcsICdjYWxsb3V0bWFuYWdlci1wcmV2aWV3J10gfSkpO1xyXG5cdFx0Y29uc3QgdGl0bGVFbENvbnRhaW5lciA9IGNhbGxvdXRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0LXRpdGxlJyB9KTtcclxuXHRcdHRoaXMuaWNvbkVsID0gdGl0bGVFbENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0LWljb24nIH0pO1xyXG5cdFx0Y29uc3QgdGl0bGVFbCA9ICh0aGlzLnRpdGxlRWwgPSB0aXRsZUVsQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXQtdGl0bGUtaW5uZXInIH0pKTtcclxuXHRcdGNvbnN0IGNvbnRlbnRFbCA9ICh0aGlzLmNvbnRlbnRFbCA9XHJcblx0XHRcdGNvbnRlbnQgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGNhbGxvdXRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0LWNvbnRlbnQnIH0pKTtcclxuXHJcblx0XHR0aGlzLnNldEljb24oaWNvbik7XHJcblx0XHR0aGlzLnNldENvbG9yKGNvbG9yKTtcclxuXHRcdHRoaXMuc2V0Q2FsbG91dElEKGlkKTtcclxuXHJcblx0XHQvLyBTZXQgdGhlIGNhbGxvdXQgdGl0bGUuXHJcblx0XHRpZiAodGl0bGUgPT0gbnVsbCkgdGl0bGVFbC50ZXh0Q29udGVudCA9IGlkO1xyXG5cdFx0ZWxzZSBpZiAodHlwZW9mIHRpdGxlID09PSAnZnVuY3Rpb24nKSB0aXRsZSh0aXRsZUVsKTtcclxuXHRcdGVsc2UgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycpIHRpdGxlRWwudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuXHRcdGVsc2UgdGl0bGVFbC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblxyXG5cdFx0Ly8gU2V0IHRoZSBjYWxsb3V0IGNvbnRlbnRzLlxyXG5cdFx0aWYgKGNvbnRlbnRFbCAhPSBudWxsKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgY29udGVudCA9PT0gJ2Z1bmN0aW9uJykgY29udGVudChjb250ZW50RWwpO1xyXG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnRFbC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XHJcblx0XHRcdGVsc2UgY29udGVudEVsLmFwcGVuZENoaWxkKGNvbnRlbnQgYXMgSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBdHRhY2ggdG8gdGhlIGNvbnRhaW5lci5cclxuXHRcdGlmIChjb250YWluZXJFbCAhPSBOT19BVFRBQ0gpIHtcclxuXHRcdFx0Q2FsbG91dFByZXZpZXdDb21wb25lbnQucHJvdG90eXBlLmF0dGFjaFRvLmNhbGwodGhpcywgY29udGFpbmVyRWwpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgY2FsbG91dCBJRC5cclxuXHQgKiBUaGlzIHdpbGwgKm5vdCogY2hhbmdlIHRoZSBhcHBlYXJhbmNlIG9mIHRoZSBwcmV2aWV3LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGlkIFRoZSBuZXcgSUQgdG8gdXNlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBzZXRDYWxsb3V0SUQoaWQ6IHN0cmluZyk6IHR5cGVvZiB0aGlzIHtcclxuXHRcdGNvbnN0IHsgY2FsbG91dEVsIH0gPSB0aGlzO1xyXG5cdFx0Y2FsbG91dEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1jYWxsb3V0JywgaWQpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBjYWxsb3V0IGljb24uXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gaWNvbiBUaGUgSUQgb2YgdGhlIG5ldyBpY29uIHRvIHVzZS5cclxuXHQgKi9cclxuXHRwdWJsaWMgc2V0SWNvbihpY29uOiBzdHJpbmcpOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb25zdCB7IGljb25FbCwgY2FsbG91dEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdC8vIENoYW5nZSB0aGUgaWNvbiBzdHlsZSB2YXJpYWJsZS5cclxuXHRcdGNhbGxvdXRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxsb3V0LWljb24nLCBpY29uKTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgaWNvbiBlbGVtZW50IGFuZCBhcHBlbmQgdGhlIFNWRy5cclxuXHRcdGljb25FbC5lbXB0eSgpO1xyXG5cdFx0Y29uc3QgaWNvblN2ZyA9IGdldEljb24oaWNvbik7XHJcblx0XHRpZiAoaWNvblN2ZyAhPSBudWxsKSB7XHJcblx0XHRcdHRoaXMuaWNvbkVsLmFwcGVuZENoaWxkKGljb25TdmcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgY2FsbG91dCBjb2xvci5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3IgdG8gdXNlLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBzZXRDb2xvcihjb2xvcjogUkdCIHwgdW5kZWZpbmVkKTogdHlwZW9mIHRoaXMge1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0RWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKGNvbG9yID09IG51bGwpIHtcclxuXHRcdFx0Y2FsbG91dEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWNhbGxvdXQtY29sb3InKTtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Y2FsbG91dEVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGxvdXQtY29sb3InLCBgJHtjb2xvci5yfSwgJHtjb2xvci5nfSwgJHtjb2xvci5ifWApO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBdHRhY2hlcyB0aGUgY2FsbG91dCBwcmV2aWV3IHRvIGEgRE9NIGVsZW1lbnQuXHJcblx0ICogVGhpcyBwbGFjZXMgaXQgYXQgdGhlIGVuZCBvZiB0aGUgZWxlbWVudC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgY29udGFpbmVyIHRvIGF0dGFjaCB0by5cclxuXHQgKi9cclxuXHRwdWJsaWMgYXR0YWNoVG8oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdHlwZW9mIHRoaXMge1xyXG5cdFx0Y29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5jYWxsb3V0RWwpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldHMgdGhlIGAtLWNhbGxvdXQtY29sb3JgIGFuZCBgLS1jYWxsb3V0LWljb25gIENTUyBwcm9wZXJ0aWVzIGFkZGVkIHRvIHRoZSBjYWxsb3V0IGVsZW1lbnQuXHJcblx0ICovXHJcblx0cHVibGljIHJlc2V0U3R5bGVQcm9wZXJ0eU92ZXJyaWRlcygpIHtcclxuXHRcdGNvbnN0IHsgY2FsbG91dEVsIH0gPSB0aGlzO1xyXG5cdFx0Y2FsbG91dEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWNhbGxvdXQtY29sb3InKTtcclxuXHRcdGNhbGxvdXRFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1jYWxsb3V0LWljb24nKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSXNvbGF0ZWRQcmV2aWV3T3B0aW9ucyBleHRlbmRzIFByZXZpZXdPcHRpb25zIHtcclxuXHRjb2xvclNjaGVtZTogJ2RhcmsnIHwgJ2xpZ2h0JztcclxuXHJcblx0Zm9jdXNlZD86IGJvb2xlYW47XHJcblx0dmlld1R5cGU/OiAnc291cmNlJyB8ICdyZWFkaW5nJztcclxuXHRjc3NFbHM/OiAoSFRNTFN0eWxlRWxlbWVudCB8IEhUTUxMaW5rRWxlbWVudClbXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGlzb2xhdGVkIGNhbGxvdXQgcHJldmlldy5cclxuICpcclxuICogVGhpcyB1c2VzIHRoZSBTaGFkb3cgRE9NIHRvIGNyZWF0ZSBhIGZ1bGwgRE9NIGZvciB0aGUgY2FsbG91dCwgYW5kIGFsbG93cyBmb3IgY3VzdG9tIHN0eWxlcyB0byBiZSB1c2VkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQgZXh0ZW5kcyBDYWxsb3V0UHJldmlld0NvbXBvbmVudCB7XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IHN0eWxlRWxzOiBIVE1MU3R5bGVFbGVtZW50W107XHJcblx0cHJvdGVjdGVkIHJlYWRvbmx5IHNoYWRvd0JvZHk6IEhUTUxCb2R5RWxlbWVudDtcclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgc2hhZG93SGVhZDogSFRNTEhlYWRFbGVtZW50O1xyXG5cdHByb3RlY3RlZCByZWFkb25seSBzaGFkb3dIb3N0RWw6IEhUTUxFbGVtZW50O1xyXG5cdHByb3RlY3RlZCByZWFkb25seSBzaGFkb3dSb290OiBTaGFkb3dSb290O1xyXG5cclxuXHRwdWJsaWMgcmVhZG9ubHkgY3VzdG9tU3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudDtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgb3B0aW9uczogSXNvbGF0ZWRQcmV2aWV3T3B0aW9ucykge1xyXG5cdFx0c3VwZXIoTk9fQVRUQUNILCBvcHRpb25zKTtcclxuXHJcblx0XHRjb25zdCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cdFx0Y29uc3QgZm9jdXNlZCA9IG9wdGlvbnMuZm9jdXNlZCA/PyBmYWxzZTtcclxuXHRcdGNvbnN0IGNvbG9yU2NoZW1lID0gb3B0aW9ucy5jb2xvclNjaGVtZTtcclxuXHRcdGNvbnN0IHJlYWRpbmdWaWV3ID0gKG9wdGlvbnMudmlld1R5cGUgPz8gJ3JlYWRpbmcnKSA9PT0gJ3JlYWRpbmcnO1xyXG5cdFx0Y29uc3QgY3NzRWxzID0gb3B0aW9ucz8uY3NzRWxzID8/IGdldEN1cnJlbnRTdHlsZXMoY29udGFpbmVyRWw/LmRvYyk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgc2hhZG93IGRvbS5cclxuXHRcdGNvbnN0IHNoYWRvd0hvc3RFbCA9ICh0aGlzLnNoYWRvd0hvc3RFbCA9IGZyYWcuY3JlYXRlRGl2KCkpO1xyXG5cdFx0Y29uc3Qgc2hhZG93Um9vdCA9ICh0aGlzLnNoYWRvd1Jvb3QgPSBzaGFkb3dIb3N0RWwuYXR0YWNoU2hhZG93KHsgZGVsZWdhdGVzRm9jdXM6IGZhbHNlLCBtb2RlOiAnY2xvc2VkJyB9KSk7XHJcblx0XHRjb25zdCBzaGFkb3dIZWFkID0gKHRoaXMuc2hhZG93SGVhZCA9IHNoYWRvd1Jvb3QuY3JlYXRlRWwoJ2hlYWQnKSk7XHJcblx0XHRjb25zdCBzaGFkb3dCb2R5ID0gKHRoaXMuc2hhZG93Qm9keSA9IHNoYWRvd1Jvb3QuY3JlYXRlRWwoJ2JvZHknKSk7XHJcblxyXG5cdFx0Ly8gQ29weSB0aGUgc3R5bGVzIGludG8gdGhlIHNoYWRvdyBoZWFkLlxyXG5cdFx0Y29uc3Qgc3R5bGVFbHMgPSAodGhpcy5zdHlsZUVscyA9IFtdIGFzIEhUTUxTdHlsZUVsZW1lbnRbXSk7XHJcblx0XHRmb3IgKGNvbnN0IGNzc0VsIG9mIGNzc0Vscykge1xyXG5cdFx0XHRjb25zdCBjc3NFbENsb25lID0gY3NzRWwuY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0XHRpZiAoY3NzRWwudGFnTmFtZSA9PT0gJ1NUWUxFJykge1xyXG5cdFx0XHRcdHN0eWxlRWxzLnB1c2goY3NzRWxDbG9uZSBhcyBIVE1MU3R5bGVFbGVtZW50KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2hhZG93SGVhZC5hcHBlbmRDaGlsZChjc3NFbENsb25lKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgc3R5bGVzIHRvIHJlc2V0IGFsbCBwcm9wZXJ0aWVzIG9uIGV2ZXJ5dGhpbmcgYWJvdmUgdGhlIGNhbGxvdXQuXHJcblx0XHQvL1xyXG5cdFx0Ly8gVGhpcyBpcyBzbyB3ZSBjYW4ga2VlcCB0aGUgc2VsZWN0b3JzIGNvbnNpc3RlbnQgYmV0d2VlbiByZWFsIE9ic2lkaWFuIGFuZCBvdXIgZmFrZSBvbmUsIHdpdGhvdXRcclxuXHRcdC8vIGhhdmluZyB0aG9zZSBlbGVtZW50cyBhZmZlY3QgdGhlIGRpc3BsYXkgb2YgdGhlIGNhbGxvdXQgaXRzZWxmLlxyXG5cdFx0c2hhZG93SGVhZC5jcmVhdGVFbCgnc3R5bGUnLCB7IHRleHQ6IFNIQURPV19ET01fUkVTRVRfU1RZTEVTIH0pO1xyXG5cclxuXHRcdC8vIEFkZCBhIGN1c3RvbSBzdHlsZSBlbGVtZW50LlxyXG5cdFx0dGhpcy5jdXN0b21TdHlsZUVsID0gc2hhZG93SGVhZC5jcmVhdGVFbCgnc3R5bGUnLCB7IGF0dHI6IHsgJ2RhdGEtY3VzdG9tLXN0eWxlcyc6ICd0cnVlJyB9IH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGZha2UgRE9NIHRyZWUgaW5zaWRlIHRoZSBzaGFkb3cgYm9keSB0byBob3N0IHRoZSBjYWxsb3V0LlxyXG5cdFx0c2hhZG93Qm9keS5jbGFzc0xpc3QuYWRkKGB0aGVtZS0ke2NvbG9yU2NoZW1lfWAsICdvYnNpZGlhbi1hcHAnKTtcclxuXHRcdGNvbnN0IHZpZXdDb250ZW50RWwgPSBzaGFkb3dCb2R5XHJcblx0XHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdhcHAtY29udGFpbmVyJyB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnaG9yaXpvbnRhbC1tYWluLWNvbnRhaW5lcicgfSlcclxuXHRcdFx0LmNyZWF0ZURpdih7IGNsczogJ3dvcmtzcGFjZScgfSlcclxuXHRcdFx0LmNyZWF0ZURpdih7IGNsczogJ3dvcmtzcGFjZS1zcGxpdCBtb2Qtcm9vdCcgfSlcclxuXHRcdFx0LmNyZWF0ZURpdih7IGNsczogYHdvcmtzcGFjZS10YWJzICR7Zm9jdXNlZCA/ICdtb2QtYWN0aXZlJyA6ICcnfWAgfSlcclxuXHRcdFx0LmNyZWF0ZURpdih7IGNsczogJ3dvcmtzcGFjZS10YWItY29udGFpbmVyJyB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiBgd29ya3NwYWNlLWxlYWYgJHtmb2N1c2VkID8gJ21vZC1hY3RpdmUnIDogJyd9YCB9KVxyXG5cdFx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnd29ya3NwYWNlLWxlYWYtY29udGVudCcgfSlcclxuXHRcdFx0LmNyZWF0ZURpdih7IGNsczogJ3ZpZXctY29udGVudCcgfSk7XHJcblxyXG5cdFx0Y29uc3QgY2FsbG91dFBhcmVudEVsID0gcmVhZGluZ1ZpZXdcclxuXHRcdFx0PyBjcmVhdGVSZWFkaW5nVmlld0NvbnRhaW5lcih2aWV3Q29udGVudEVsKVxyXG5cdFx0XHQ6IGNyZWF0ZUxpdmVWaWV3Q29udGFpbmVyKHZpZXdDb250ZW50RWwpO1xyXG5cclxuXHRcdGNhbGxvdXRQYXJlbnRFbC5hcHBlbmRDaGlsZCh0aGlzLmNhbGxvdXRFbCk7XHJcblxyXG5cdFx0Ly8gQXR0YWNoIHRvIHRoZSBjb250YWluZXIuXHJcblx0XHRpZiAoY29udGFpbmVyRWwgIT0gbnVsbCkge1xyXG5cdFx0XHRJc29sYXRlZENhbGxvdXRQcmV2aWV3Q29tcG9uZW50LnByb3RvdHlwZS5hdHRhY2hUby5jYWxsKHRoaXMsIGNvbnRhaW5lckVsKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlcGxhY2VzIHRoZSBgPHN0eWxlPmAgZWxlbWVudHMgdXNlZCBieSB0aGUgaXNvbGF0ZWQgY2FsbG91dCBwcmV2aWV3IHdpdGggdGhlIGxhdGVzdCBvbmVzLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyB1cGRhdGVTdHlsZXMoKTogdHlwZW9mIHRoaXMge1xyXG5cdFx0cmV0dXJuIHRoaXMudXBkYXRlU3R5bGVzV2l0aChcclxuXHRcdFx0Z2V0Q3VycmVudFN0eWxlcyh0aGlzLnNoYWRvd0hvc3RFbC5kb2MpXHJcblx0XHRcdFx0LmZpbHRlcigoZSkgPT4gZS50YWdOYW1lID09PSAnU1RZTEUnKVxyXG5cdFx0XHRcdC5tYXAoKGUpID0+IGUuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxTdHlsZUVsZW1lbnQpLFxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlcGxhY2VzIHRoZSBgPHN0eWxlPmAgZWxlbWVudHMgdXNlZCBieSB0aGUgaXNvbGF0ZWQgY2FsbG91dCBwcmV2aWV3LlxyXG5cdCAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gdXBkYXRlIHRoZSBwcmV2aWV3IHdpdGggdGhlIGxhdGVzdCBzdHlsZXMuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gc3R5bGVFbHMgVGhlIG5ldyBzdHlsZSBlbGVtZW50cyB0byB1c2UuIFRoZXNlIHdpbGwgKm5vdCogYmUgY2xvbmVkLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyB1cGRhdGVTdHlsZXNXaXRoKHN0eWxlRWxzOiBIVE1MU3R5bGVFbGVtZW50W10pOiB0eXBlb2YgdGhpcyB7XHJcblx0XHRjb25zdCB7IHN0eWxlRWxzOiBvbGRTdHlsZUVscywgY3VzdG9tU3R5bGVFbCB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBSZXBsYWNlIHRoZSBzdHlsZXMuXHJcblx0XHRsZXQgaSwgZW5kO1xyXG5cdFx0bGV0IGxhc3ROb2RlID0gY3VzdG9tU3R5bGVFbC5wcmV2aW91c1NpYmxpbmcgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRmb3IgKGkgPSAwLCBlbmQgPSBNYXRoLm1pbihzdHlsZUVscy5sZW5ndGgsIG9sZFN0eWxlRWxzLmxlbmd0aCk7IGkgPCBlbmQ7IGkrKykge1xyXG5cdFx0XHRjb25zdCBlbCA9IHN0eWxlRWxzW2ldO1xyXG5cdFx0XHRvbGRTdHlsZUVsc1tpXS5yZXBsYWNlV2l0aChlbCk7XHJcblx0XHRcdGxhc3ROb2RlID0gZWw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIHN0eWxlcyB0aGF0IGRpZG4ndCBoYXZlIGFueXdoZXJlIHRvIGdvLlxyXG5cdFx0Zm9yIChlbmQgPSBzdHlsZUVscy5sZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xyXG5cdFx0XHRjb25zdCBlbCA9IHN0eWxlRWxzW2ldO1xyXG5cdFx0XHRsYXN0Tm9kZS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgZWwpO1xyXG5cdFx0XHRvbGRTdHlsZUVscy5wdXNoKGVsKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZW1vdmUgZXh0cmEgc3R5bGVzLlxyXG5cdFx0Y29uc3QgdG9SZW1vdmUgPSBvbGRTdHlsZUVscy5zcGxpY2UoaSwgb2xkU3R5bGVFbHMubGVuZ3RoIC0gaSk7XHJcblx0XHRmb3IgKGNvbnN0IG5vZGUgb2YgdG9SZW1vdmUpIHtcclxuXHRcdFx0bm9kZS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZXMgbWF0Y2hpbmcgc3R5bGUgZWxlbWVudHMuXHJcblx0ICogQHBhcmFtIHByZWRpY2F0ZSBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uLiBJZiBpdCByZXR1cm5zIHRydWUsIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQuXHJcblx0ICovXHJcblx0cHVibGljIHJlbW92ZVN0eWxlcyhwcmVkaWNhdGU6IChlbDogSFRNTFN0eWxlRWxlbWVudCkgPT4gYm9vbGVhbikge1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0eWxlRWxzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGVsID0gdGhpcy5zdHlsZUVsc1tpXTtcclxuXHRcdFx0aWYgKHByZWRpY2F0ZShlbCkpIHtcclxuXHRcdFx0XHRlbC5yZW1vdmUoKTtcclxuXHRcdFx0XHR0aGlzLnN0eWxlRWxzLnNwbGljZShpLCAxKTtcclxuXHRcdFx0XHRpLS07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoYW5nZXMgdGhlIGNvbG9yIHNjaGVtZS5cclxuXHQgKiBAcGFyYW0gY29sb3JTY2hlbWUgVGhlIGNvbG9yIHNjaGVtZSB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIHNldENvbG9yU2NoZW1lKGNvbG9yU2NoZW1lOiAnZGFyaycgfCAnbGlnaHQnKTogdHlwZW9mIHRoaXMge1xyXG5cdFx0Y29uc3QgeyBjbGFzc0xpc3QgfSA9IHRoaXMuc2hhZG93Qm9keTtcclxuXHRcdGNsYXNzTGlzdC50b2dnbGUoJ3RoZW1lLWRhcmsnLCBjb2xvclNjaGVtZSA9PT0gJ2RhcmsnKTtcclxuXHRcdGNsYXNzTGlzdC50b2dnbGUoJ3RoZW1lLWxpZ2h0JywgY29sb3JTY2hlbWUgPT09ICdsaWdodCcpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBdHRhY2hlcyB0aGUgY2FsbG91dCBwcmV2aWV3IHRvIGEgRE9NIGVsZW1lbnQuXHJcblx0ICogVGhpcyBwbGFjZXMgaXQgYXQgdGhlIGVuZCBvZiB0aGUgZWxlbWVudC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgY29udGFpbmVyIHRvIGF0dGFjaCB0by5cclxuXHQgKiBAb3ZlcnJpZGVcclxuXHQgKi9cclxuXHRwdWJsaWMgYXR0YWNoVG8oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdHlwZW9mIHRoaXMge1xyXG5cdFx0Y29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5zaGFkb3dIb3N0RWwpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgY3VycmVudGx5LWFwcGxpZWQgT2JzaWRpYW4gc3R5bGVzaGVldHMgYW5kIHN0eWxlcy5cclxuICpcclxuICogQHBhcmFtIGRvYyBUaGUgZG9jdW1lbnQgdG8gdGFrZSB0aGUgc3R5bGVzIGZyb20uXHJcbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mICoqdW5jbG9uZWQqKiBgc3R5bGVgIGFuZCBgbGlua2Agbm9kZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDdXJyZW50U3R5bGVzKGRvYz86IERvY3VtZW50KTogQXJyYXk8SFRNTFN0eWxlRWxlbWVudCB8IEhUTUxMaW5rRWxlbWVudD4ge1xyXG5cdGNvbnN0IGVsczogQXJyYXk8SFRNTFN0eWxlRWxlbWVudCB8IEhUTUxMaW5rRWxlbWVudD4gPSBbXTtcclxuXHRsZXQgbm9kZSA9IChkb2MgPz8gd2luZG93LmRvY3VtZW50KS5oZWFkLmZpcnN0RWxlbWVudENoaWxkO1xyXG5cdGZvciAoOyBub2RlICE9IG51bGw7IG5vZGUgPSBub2RlLm5leHRFbGVtZW50U2libGluZykge1xyXG5cdFx0Y29uc3Qgbm9kZVRhZyA9IG5vZGUudGFnTmFtZTtcclxuXHRcdGlmIChub2RlVGFnID09PSAnU1RZTEUnIHx8IChub2RlVGFnID09PSAnTElOSycgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ3JlbCcpPy50b0xvd2VyQ2FzZSgpID09PSAnc3R5bGVzaGVldCcpKSB7XHJcblx0XHRcdGVscy5wdXNoKG5vZGUgYXMgSFRNTFN0eWxlRWxlbWVudCB8IEhUTUxMaW5rRWxlbWVudCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBlbHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgRE9NIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBPYnNpZGlhbiByZWFkaW5nIHZpZXcuXHJcbiAqIEEgY2FsbG91dCBwbGFjZWQgd2l0aGluIHRoZSByZXR1cm5lZCBjb250YWluZXIgd2lsbCBhY3QgYXMgdGhvdWdoIGl0IGlzIGluc2lkZSBhIE1hcmtkb3duIGRvY3VtZW50J3MgcmVhZGluZyB2aWV3LlxyXG4gKlxyXG4gKiBAcGFyYW0gdmlld0NvbnRlbnRFbCBUaGUgYC52aWV3LWNvbnRlbnRgIGNvbnRhaW5lciBlbGVtZW50LlxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0byBhdHRhY2ggYSBjYWxsb3V0IHRvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUmVhZGluZ1ZpZXdDb250YWluZXIodmlld0NvbnRlbnRFbDogSFRNTERpdkVsZW1lbnQpOiBIVE1MRGl2RWxlbWVudCB7XHJcblx0Ly8gZGl2Lm1hcmtkb3duLXJlYWRpbmctdmlldyBkaXYubWFya2Rvd24tcHJldmlldy12aWUubWFya2Rvd24tcmVuZGVyZWQgLm1hcmtkb3duLXByZXZpZXctc2VjdGlvblxyXG5cdC8vIGRpdiBkaXYuY2FsbG91dFtkYXRhLWNhbGxvdXRdXHJcblx0cmV0dXJuIHZpZXdDb250ZW50RWxcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdtYXJrZG93bi1yZWFkaW5nLXZpZXcnIH0pXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnbWFya2Rvd24tcHJldmlldy12aWV3IG1hcmtkb3duLXJlbmRlcmVkJyB9KVxyXG5cdFx0LmNyZWF0ZURpdih7IGNsczogJ21hcmtkb3duLXByZXZpZXctc2VjdGlvbicgfSlcclxuXHRcdC5jcmVhdGVEaXYoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIE9ic2lkaWFuIGxpdmUgZWRpdG9yIHZpZXcuXHJcbiAqIEEgY2FsbG91dCBwbGFjZWQgd2l0aGluIHRoZSByZXR1cm5lZCBjb250YWluZXIgd2lsbCBhY3QgYXMgdGhvdWdoIGl0IGlzIGluc2lkZSBhIE1hcmtkb3duIGRvY3VtZW50J3MgQ29kZU1pcnJvciBlZGl0b3IuXHJcbiAqXHJcbiAqIEBwYXJhbSB2aWV3Q29udGVudEVsIFRoZSBgLnZpZXctY29udGVudGAgY29udGFpbmVyIGVsZW1lbnQuXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRvIGF0dGFjaCBhIGNhbGxvdXQgdG8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVMaXZlVmlld0NvbnRhaW5lcih2aWV3Q29udGVudEVsOiBIVE1MRGl2RWxlbWVudCk6IEhUTUxEaXZFbGVtZW50IHtcclxuXHQvLyBkaXYubWFya2Rvd24tc291cmNlLXZpZXcuY20tcy1vYnNpZGlhbi5tb2QtY202LmlzLWxpdmUtcHJldmlldyBkaXYuY20tZWRpdG9yLs28MS7NvDIuzbxxIGRpdi5jbS1zY3JvbGxlclxyXG5cdC8vIGRpdi5jbS1zaXplciBkaXYuY20tY29udGVudENvbnRhaW5lciBkaXYuY20tY29udGVudCBkaXYuY20tZW1iZWQtYmxvY2subWFya2Rvd24tcmVuZGVyZWQuY20tY2FsbG91dFxyXG5cdHJldHVybiB2aWV3Q29udGVudEVsXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnbWFya2Rvd24tc291cmNlLXZpZXcgY20tcy1vYnNpZGlhbiBtb2QtY202IGlzLWxpdmUtcHJldmlldycgfSlcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdjbS1lZGl0b3IgzbwxIM28MiDNvHEnIH0pXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnY20tc2Nyb2xsZXInIH0pXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnY20tc2l6ZXInIH0pXHJcblx0XHQuY3JlYXRlRGl2KHsgY2xzOiAnY20tY29udGVudENvbnRhaW5lcicgfSlcclxuXHRcdC5jcmVhdGVEaXYoeyBjbHM6ICdjbS1jb250ZW50JyB9KVxyXG5cdFx0LmNyZWF0ZURpdih7IGNsczogJ2NtLWVtYmVkLWJsb2NrIG1hcmtkb3duLXJlbmRlcmVkIGNtLWNhbGxvdXQnIH0pO1xyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gU3R5bGVzOlxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gUmVzZXQgdGhlIGJsZW5kIG1vZGUgb2YgdGhlIHByZXZpZXcuXHJcblx0Ly8gVGhlIHJlbmRlcmluZyBvZiB0aGUgY2FsbG91dHMgd2lsbCBiZSBicm9rZW4gdW5sZXNzIHRoaXMgaXMgcmVzZXQuXHJcblx0LmNhbGxvdXQuY2FsbG91dG1hbmFnZXItcHJldmlldyB7XHJcblx0XHRtaXgtYmxlbmQtbW9kZTogdW5zZXQgIWltcG9ydGFudDtcclxuXHRcdG1hcmdpbjogMCAhaW1wb3J0YW50O1xyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXByZXZpZXctY29udGFpbmVyIHtcclxuXHRcdG1hcmdpbi10b3A6IDAuNWVtO1xyXG5cdFx0bWFyZ2luLWJvdHRvbTogMC41ZW07XHJcblx0fVxyXG5gO1xyXG5cclxuY29uc3QgU0hBRE9XX0RPTV9SRVNFVF9TVFlMRVMgPSBgXHJcbi8qIFJlc2V0IGxheW91dCBhbmQgc3R5bGluZ3MgZm9yIGFsbCBwcm9wZXJ0aWVzIHVwIHRvIHRoZSBjYWxsb3V0LiAqL1xyXG4uYXBwLWNvbnRhaW5lcixcclxuLmhvcml6b250YWwtbWFpbi1jb250YWluZXIsXHJcbi53b3Jrc3BhY2UsXHJcbi53b3Jrc3BhY2Utc3BsaXQsXHJcbi53b3Jrc3BhY2UtdGFicyxcclxuLndvcmtzcGFjZS10YWItY29udGFpbmVyLFxyXG4ud29ya3NwYWNlLWxlYWYsXHJcbi53b3Jrc3BhY2UtbGVhZi1jb250ZW50LFxyXG4udmlldy1jb250ZW50LFxyXG4ubWFya2Rvd24tcmVhZGluZy12aWV3LFxyXG4ubWFya2Rvd24tc291cmNlLXZpZXcsXHJcbi5jbS1lZGl0b3IuzbwxLs28Mi7NvHEsXHJcbi5jbS1lZGl0b3IuzbwxLs28Mi7NvHEgPiAuY20tc2Nyb2xsZXIsXHJcbi5jbS1zaXplcixcclxuLmNtLWNvbnRlbnRDb250YWluZXIsXHJcbi5jbS1jb250ZW50LFxyXG4ubWFya2Rvd24tcHJldmlldy12aWV3IHtcclxuXHRhbGw6IGluaXRpYWwgIWltcG9ydGFudDtcclxuXHRkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vKiBTZXQgdGhlIHRleHQgY29sb3Igb2YgdGhlIGNvbnRhaW5lciBmb3IgdGhlIGNhbGxvdXQuICovXHJcbi5tYXJrZG93bi1wcmV2aWV3LXNlY3Rpb24sXHJcbi5jbS1jYWxsb3V0IHtcclxuXHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8qIE92ZXJyaWRlIG1hcmdpbiBvbiBjYWxsb3V0IHRvIGtlZXAgdGhlIHByZXZpZXcgYXMgc21hbGwgYXMgcG9zc2libGUuICovXHJcbi5tYXJrZG93bi1wcmV2aWV3LXNlY3Rpb24gPiBkaXYgPiAuY2FsbG91dCxcclxuLmNtLWNhbGxvdXQgPiAuY2FsbG91dCxcclxuLmNhbGxvdXRtYW5hZ2VyLXByZXZpZXcuY2FsbG91dCB7XHJcblx0bWFyZ2luOiAwICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8qIFNldCB0aGUgZm9udCBwcm9wZXJ0aWVzIG9mIHRoZSBjYWxsb3V0LiAqL1xyXG4uY20tY2FsbG91dCxcclxuLmNhbGxvdXQge1xyXG5cdGZvbnQtc2l6ZTogdmFyKC0tZm9udC10ZXh0LXNpemUpICFpbXBvcnRhbnQ7XHJcblx0Zm9udC1mYW1pbHk6IHZhcigtLWZvbnQtdGV4dCkgIWltcG9ydGFudDtcclxuXHRsaW5lLWhlaWdodDogdmFyKC0tbGluZS1oZWlnaHQtbm9ybWFsKSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vKiBVc2UgdHJhbnNwYXJlbnQgYmFja2dyb3VuZCBjb2xvci4gKi9cclxuYm9keSB7XHJcblx0YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcclxufVxyXG5gO1xyXG4iLCJpbXBvcnQgeyBCdXR0b25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0LCBDYWxsb3V0SUQgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IENhbGxvdXRTZXR0aW5ncyB9IGZyb20gJyZjYWxsb3V0LXNldHRpbmdzJztcclxuaW1wb3J0IENhbGxvdXRNYW5hZ2VyUGx1Z2luIGZyb20gJyZwbHVnaW4nO1xyXG5cclxuaW1wb3J0IHsgVUlQYW5lIH0gZnJvbSAnJnVpL3BhbmUnO1xyXG5cclxuaW1wb3J0IHsgQXBwZWFyYW5jZUVkaXRvciB9IGZyb20gJy4vYXBwZWFyYW5jZS1lZGl0b3InO1xyXG5pbXBvcnQgeyBBcHBlYXJhbmNlLCBkZXRlcm1pbmVBcHBlYXJhbmNlVHlwZSB9IGZyb20gJy4vYXBwZWFyYW5jZS10eXBlJztcclxuaW1wb3J0IENvbXBsZXhBcHBlYXJhbmNlRWRpdG9yIGZyb20gJy4vZWRpdG9yLWNvbXBsZXgnO1xyXG5pbXBvcnQgUGVyU2NoZW1lQXBwZWFyYW5jZUVkaXRvciBmcm9tICcuL2VkaXRvci1wZXItc2NoZW1lJztcclxuaW1wb3J0IFVuaWZpZWRBcHBlYXJhbmNlRWRpdG9yIGZyb20gJy4vZWRpdG9yLXVuaWZpZWQnO1xyXG5pbXBvcnQgeyByZW5kZXJJbmZvIH0gZnJvbSAnLi9zZWN0aW9uLWluZm8nO1xyXG5pbXBvcnQgeyBFZGl0Q2FsbG91dFBhbmVQcmV2aWV3IH0gZnJvbSAnLi9zZWN0aW9uLXByZXZpZXcnO1xyXG5cclxuY29uc3QgSU1QT1NTSUJMRV9DQUxMT1VUX0lEID0gJ1tub3QgYSByZWFsIGNhbGxvdXRdJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0Q2FsbG91dFBhbmUgZXh0ZW5kcyBVSVBhbmUge1xyXG5cdHB1YmxpYyByZWFkb25seSB0aXRsZTtcclxuXHRwcml2YXRlIHJlYWRvbmx5IHZpZXdPbmx5OiBib29sZWFuO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgcGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbjtcclxuXHJcblx0cHJpdmF0ZSBjYWxsb3V0OiBDYWxsb3V0O1xyXG5cclxuXHRwcml2YXRlIHByZXZpZXdTZWN0aW9uOiBFZGl0Q2FsbG91dFBhbmVQcmV2aWV3O1xyXG5cdHByaXZhdGUgYXBwZWFyYW5jZUVkaXRvckNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGFwcGVhcmFuY2VFZGl0b3JFbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhcHBlYXJhbmNlRWRpdG9yITogQXBwZWFyYW5jZUVkaXRvcjxBcHBlYXJhbmNlPjtcclxuXHRwcml2YXRlIGFwcGVhcmFuY2UhOiBBcHBlYXJhbmNlO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IocGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbiwgaWQ6IENhbGxvdXRJRCwgdmlld09ubHk6IGJvb2xlYW4pIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMudmlld09ubHkgPSB2aWV3T25seTtcclxuXHRcdHRoaXMudGl0bGUgPSB7IHRpdGxlOiAnQ2FsbG91dCcsIHN1YnRpdGxlOiBpZCB9O1xyXG5cclxuXHRcdC8vIEdldCB0aGUgY2FsbG91dCBpbmZvcm1hdGlvbi5cclxuXHRcdHRoaXMuY2FsbG91dCA9IHBsdWdpbi5jYWxsb3V0cy5nZXQoaWQpID8/IHtcclxuXHRcdFx0c291cmNlczogW3sgdHlwZTogJ2N1c3RvbScgfV0sXHJcblx0XHRcdC4uLnBsdWdpbi5jYWxsb3V0UmVzb2x2ZXIuZ2V0Q2FsbG91dFByb3BlcnRpZXMoSU1QT1NTSUJMRV9DQUxMT1VUX0lEKSxcclxuXHRcdFx0aWQsXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIENyZWF0ZSB0aGUgcHJldmlldy5cclxuXHRcdHRoaXMucHJldmlld1NlY3Rpb24gPSBuZXcgRWRpdENhbGxvdXRQYW5lUHJldmlldyhwbHVnaW4sIHRoaXMuY2FsbG91dCwgZmFsc2UpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSB0aGUgYXBwZWFyYW5jZSBlZGl0b3IuXHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3JDb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5hcHBlYXJhbmNlRWRpdG9yQ29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcclxuXHRcdFx0J2NhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1zZWN0aW9uJyxcclxuXHRcdFx0J2NhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1hcHBlYXJhbmNlJyxcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5hcHBlYXJhbmNlRWRpdG9yQ29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQXBwZWFyYW5jZScgfSk7XHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3JFbCA9IHRoaXMuYXBwZWFyYW5jZUVkaXRvckNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xyXG5cclxuXHRcdHRoaXMuY2hhbmdlU2V0dGluZ3MocGx1Z2luLmdldENhbGxvdXRTZXR0aW5ncyhpZCkgPz8gW10pO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIGNoYW5nZUFwcGVhcmFuY2VFZGl0b3IobmV3QXBwZWFyYW5jZTogQXBwZWFyYW5jZSkge1xyXG5cdFx0Y29uc3Qgb2xkQXBwZWFyYW5jZSA9IHRoaXMuYXBwZWFyYW5jZTtcclxuXHRcdHRoaXMuYXBwZWFyYW5jZSA9IG5ld0FwcGVhcmFuY2U7XHJcblxyXG5cdFx0aWYgKG5ld0FwcGVhcmFuY2UudHlwZSAhPT0gb2xkQXBwZWFyYW5jZT8udHlwZSkge1xyXG5cdFx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3IgPSBuZXcgQVBQRUFSQU5DRV9FRElUT1JTW25ld0FwcGVhcmFuY2UudHlwZV0oKTtcclxuXHJcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMuYXBwZWFyYW5jZUVkaXRvciwge1xyXG5cdFx0XHRcdG5hdjogeyBnZXQ6ICgpID0+IHRoaXMubmF2IH0sXHJcblx0XHRcdFx0cGx1Z2luOiB7IHZhbHVlOiB0aGlzLnBsdWdpbiB9LFxyXG5cdFx0XHRcdGNvbnRhaW5lckVsOiB7IHZhbHVlOiB0aGlzLmFwcGVhcmFuY2VFZGl0b3JFbCB9LFxyXG5cdFx0XHRcdHNldEFwcGVhcmFuY2U6IHsgdmFsdWU6IHRoaXMub25TZXRBcHBlYXJhbmNlLmJpbmQodGhpcykgfSxcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgeyBhcHBlYXJhbmNlRWRpdG9yIH0gPSB0aGlzO1xyXG5cdFx0YXBwZWFyYW5jZUVkaXRvci5hcHBlYXJhbmNlID0gbmV3QXBwZWFyYW5jZTtcclxuXHRcdGFwcGVhcmFuY2VFZGl0b3IuY2FsbG91dCA9IHRoaXMuY2FsbG91dDtcclxuXHR9XHJcblxyXG5cdHByb3RlY3RlZCBvblNldEFwcGVhcmFuY2UoYXBwZWFyYW5jZTogQXBwZWFyYW5jZSkge1xyXG5cdFx0dGhpcy5jaGFuZ2VBcHBlYXJhbmNlRWRpdG9yKGFwcGVhcmFuY2UpO1xyXG5cdFx0Y29uc3QgbmV3U2V0dGluZ3MgPSB0aGlzLmFwcGVhcmFuY2VFZGl0b3IudG9TZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0IH0gPSB0aGlzO1xyXG5cdFx0Y29uc3QgeyBjYWxsb3V0UmVzb2x2ZXIgfSA9IHRoaXMucGx1Z2luO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSB0aGUgcGx1Z2luIHNldHRpbmdzLlxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0Q2FsbG91dFNldHRpbmdzKGNhbGxvdXQuaWQsIG5ld1NldHRpbmdzKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgdGhlIGNhbGxvdXQgcHJvcGVydGllcy5cclxuXHRcdGNvbnN0IHsgY29sb3IsIGljb24gfSA9IGNhbGxvdXRSZXNvbHZlci5nZXRDYWxsb3V0UHJvcGVydGllcyhjYWxsb3V0LmlkKTtcclxuXHRcdGNhbGxvdXQuY29sb3IgPSBjb2xvcjtcclxuXHRcdGNhbGxvdXQuaWNvbiA9IGljb247XHJcblxyXG5cdFx0Ly8gUmVyZW5kZXIgdG8gc2hvdyB3aGF0IGNoYW5nZWQuXHJcblx0XHR0aGlzLnByZXZpZXdTZWN0aW9uLmNoYW5nZVNldHRpbmdzKG5ld1NldHRpbmdzKTtcclxuXHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3IuY2FsbG91dCA9IGNhbGxvdXQ7XHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3JFbC5lbXB0eSgpO1xyXG5cdFx0dGhpcy5hcHBlYXJhbmNlRWRpdG9yLnJlbmRlcigpO1xyXG5cclxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdH1cclxuXHJcblx0LyoqIEBvdmVycmlkZSAqL1xyXG5cdHB1YmxpYyBkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCwgcHJldmlld1NlY3Rpb24sIGFwcGVhcmFuY2VFZGl0b3JDb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0cHJldmlld1NlY3Rpb24uYXR0YWNoKGNvbnRhaW5lckVsKTtcclxuXHRcdHJlbmRlckluZm8odGhpcy5wbHVnaW4uYXBwLCB0aGlzLmNhbGxvdXQsIGNvbnRhaW5lckVsKTtcclxuXHRcdGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGFwcGVhcmFuY2VFZGl0b3JDb250YWluZXJFbCk7XHJcblx0fVxyXG5cclxuXHQvKiogQG92ZXJyaWRlICovXHJcblx0cHVibGljIGRpc3BsYXlDb250cm9scygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY2FsbG91dCwgY29udHJvbHNFbCB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBEZWxldGUgYnV0dG9uLlxyXG5cdFx0aWYgKCF0aGlzLnZpZXdPbmx5ICYmIGNhbGxvdXQuc291cmNlcy5sZW5ndGggPT09IDEgJiYgY2FsbG91dC5zb3VyY2VzWzBdLnR5cGUgPT09ICdjdXN0b20nKSB7XHJcblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbHNFbClcclxuXHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXRyYXNoJylcclxuXHRcdFx0XHQuc2V0VG9vbHRpcCgnRGVsZXRlIENhbGxvdXQnKVxyXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlbW92ZUN1c3RvbUNhbGxvdXQoY2FsbG91dC5pZCk7XHJcblx0XHRcdFx0XHR0aGlzLm5hdi5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnRoZW4oKHsgYnV0dG9uRWwgfSkgPT4gYnV0dG9uRWwuY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWljb24nLCAnbW9kLXdhcm5pbmcnKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBwcmV2aWV3IHRoYXQgaXMgZGlzcGxheWVkIGluc2lkZSB0aGUgY2FsbG91dC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBtYXJrZG93biBUaGUgbWFya2Rvd24gdG8gcmVuZGVyLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhc3luYyBjaGFuZ2VQcmV2aWV3KG1hcmtkb3duOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHJldHVybiB0aGlzLnByZXZpZXdTZWN0aW9uLmNoYW5nZUNvbnRlbnQobWFya2Rvd24pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgc3R5bGVzIG9mIHRoZSBwcmV2aWV3IHRoYXQgaXMgZGlzcGxheWVkIGluc2lkZSB0aGUgY2FsbG91dC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBtYXJrZG93biBUaGUgbWFya2Rvd24gdG8gcmVuZGVyLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBhc3luYyBjaGFuZ2VTZXR0aW5ncyhzZXR0aW5nczogQ2FsbG91dFNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0aGlzLmNoYW5nZUFwcGVhcmFuY2VFZGl0b3IoZGV0ZXJtaW5lQXBwZWFyYW5jZVR5cGUoc2V0dGluZ3MpKTtcclxuXHRcdHRoaXMuYXBwZWFyYW5jZUVkaXRvckVsLmVtcHR5KCk7XHJcblx0XHR0aGlzLmFwcGVhcmFuY2VFZGl0b3IucmVuZGVyKCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5wcmV2aWV3U2VjdGlvbi5jaGFuZ2VTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBBUFBFQVJBTkNFX0VESVRPUlM6IFJlY29yZDxBcHBlYXJhbmNlWyd0eXBlJ10sIHsgbmV3ICgpOiBBcHBlYXJhbmNlRWRpdG9yPEFwcGVhcmFuY2U+IH0+ID0ge1xyXG5cdGNvbXBsZXg6IENvbXBsZXhBcHBlYXJhbmNlRWRpdG9yLFxyXG5cdHVuaWZpZWQ6IFVuaWZpZWRBcHBlYXJhbmNlRWRpdG9yLFxyXG5cdCdwZXItc2NoZW1lJzogUGVyU2NoZW1lQXBwZWFyYW5jZUVkaXRvcixcclxufTtcclxuXHJcbmRlY2xhcmUgY29uc3QgU1RZTEVTOiBgXHJcblx0Ly8gU2VjdGlvbnMgb2YgdGhlIHBhbmUuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1zZWN0aW9uIHtcclxuXHRcdGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcblx0XHRwYWRkaW5nLXRvcDogdmFyKC0tc2l6ZS00LTMpO1xyXG5cdFx0cGFkZGluZy1ib3R0b206IHZhcigtLXNpemUtNC02KTtcclxuXHR9XHJcblxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtc2VjdGlvbiBoMiB7XHJcblx0XHRtYXJnaW4tYm90dG9tOiAwLjNlbTtcclxuXHRcdCYgKyBwIHtcclxuXHRcdFx0bWFyZ2luLXRvcDogMDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtYXBwZWFyYW5jZSB7XHJcblx0XHQuc2V0dGluZy1pdGVtIHtcclxuXHRcdFx0Ym9yZGVyLXRvcDogbm9uZTtcclxuXHRcdFx0cGFkZGluZy10b3A6IDAuMzc1ZW07XHJcblx0XHR9XHJcblxyXG5cdFx0LnNldHRpbmctaXRlbTpoYXMoKyAuc2V0dGluZy1pdGVtKSB7XHJcblx0XHRcdHBhZGRpbmctYm90dG9tOiAwLjM3NWVtO1xyXG5cclxuXHRcdFx0Ym9keS5pcy1waG9uZSAmIHtcclxuXHRcdFx0XHRtYXJnaW4tYm90dG9tOiAwLjdlbTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC5zZXR0aW5nLWl0ZW0gKyAuc2V0dGluZy1pdGVtIHtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRoZSBwcmV2aWV3IHNob3dpbmcgdGhlIGNvbXBsZXggY2FsbG91dCBzZXR0aW5nIEpTT04uXHJcblx0LmNhbGxvdXRtYW5hZ2VyLWVkaXQtY2FsbG91dC1hcHBlYXJhbmNlLWpzb24gcHJlIHtcclxuXHRcdGJvcmRlcjogcmdiYSh2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikpIDFweCBzb2xpZDtcclxuXHRcdGJvcmRlci1yYWRpdXM6IHZhcigtLWNhbGxvdXQtcmFkaXVzKTtcclxuXHRcdHBhZGRpbmc6IHZhcigtLXNpemUtNC0yKTtcclxuXHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xyXG5cdFx0b3ZlcmZsb3cteDogYXV0bztcclxuXHJcblx0XHRtYXJnaW46IDA7XHJcblx0fVxyXG5cclxuXHQvLyBUaGUgcmVzZXQgYnV0dG9uLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1lZGl0LWNhbGxvdXQtYXBwZWFyYW5jZS1yZXNldCB7XHJcblx0XHR3aWR0aDogMTAwJTtcclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCwgTWFya2Rvd25WaWV3LCBTZWFyY2hSZXN1bHQsIFRleHRDb21wb25lbnQsIGdldEljb24sIHByZXBhcmVGdXp6eVNlYXJjaCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IENhbGxvdXQgfSBmcm9tICcmY2FsbG91dCc7XHJcbmltcG9ydCB7IGdldENvbG9yRnJvbUNhbGxvdXQsIGdldFRpdGxlRnJvbUNhbGxvdXQgfSBmcm9tICcmY2FsbG91dC1yZXNvbHZlcic7XHJcbmltcG9ydCB7IHRvSFNWIH0gZnJvbSAnJmNvbG9yJztcclxuaW1wb3J0IENhbGxvdXRNYW5hZ2VyUGx1Z2luIGZyb20gJyZwbHVnaW4nO1xyXG5cclxuaW1wb3J0IHsgQ2FsbG91dFByZXZpZXdDb21wb25lbnQgfSBmcm9tICcmdWkvY29tcG9uZW50L2NhbGxvdXQtcHJldmlldyc7XHJcbmltcG9ydCB7IFVJUGFuZSB9IGZyb20gJyZ1aS9wYW5lJztcclxuXHJcbmltcG9ydCB7IENyZWF0ZUNhbGxvdXRQYW5lIH0gZnJvbSAnLi9jcmVhdGUtY2FsbG91dC1wYW5lJztcclxuaW1wb3J0IHsgRWRpdENhbGxvdXRQYW5lIH0gZnJvbSAnLi9lZGl0LWNhbGxvdXQtcGFuZSc7XHJcbmltcG9ydCB7IGNsb3NlU2V0dGluZ3MgfSBmcm9tICdvYnNpZGlhbi1leHRyYS91bnNhZmUnO1xyXG5cclxuLyoqXHJcbiAqIFRoZSB1c2VyIGludGVyZmFjZSBwYW5lIGZvciBjaGFuZ2luZyBDYWxsb3V0IE1hbmFnZXIgc2V0dGluZ3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFuYWdlQ2FsbG91dHNQYW5lIGV4dGVuZHMgVUlQYW5lIHtcclxuXHRwdWJsaWMgcmVhZG9ubHkgdGl0bGUgPSB7IHRpdGxlOiAnQ2FsbG91dHMnLCBzdWJ0aXRsZTogJ01hbmFnZScgfTtcclxuXHRwcml2YXRlIHJlYWRvbmx5IHZpZXdPbmx5OiBib29sZWFuO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbjtcclxuXHJcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nO1xyXG5cdHByaXZhdGUgc2VhcmNoRmlsdGVyOiBudWxsIHwgKChjYWxsb3V0OiBDYWxsb3V0Rm9yU2VhcmNoKSA9PiBTZWFyY2hSZXN1bHQgfCBudWxsKTtcclxuXHRwcml2YXRlIHByZXZpZXdDYWNoZTogQ2FsbG91dEZvclNlYXJjaFtdO1xyXG5cclxuXHRwcml2YXRlIHNlYXJjaEVycm9yRGl2OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHNlYXJjaEVycm9yUXVlcnkhOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKHBsdWdpbjogQ2FsbG91dE1hbmFnZXJQbHVnaW4pIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHJcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gJyc7XHJcblx0XHR0aGlzLnNlYXJjaEZpbHRlciA9IG51bGw7XHJcblx0XHR0aGlzLnByZXZpZXdDYWNoZSA9IFtdO1xyXG5cdFx0dGhpcy52aWV3T25seSA9IGZhbHNlO1xyXG5cclxuXHRcdGNvbnN0IHsgc2VhcmNoRXJyb3JEaXYsIHNlYXJjaEVycm9yUXVlcnkgfSA9IGNyZWF0ZUVtcHR5U2VhcmNoUmVzdWx0RGl2KCk7XHJcblx0XHR0aGlzLnNlYXJjaEVycm9yRGl2ID0gc2VhcmNoRXJyb3JEaXY7XHJcblx0XHR0aGlzLnNlYXJjaEVycm9yUXVlcnkgPSBzZWFyY2hFcnJvclF1ZXJ5O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hhbmdlIHRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICogQHBhcmFtIHF1ZXJ5IFRoZSBzZWFyY2ggcXVlcnkuXHJcblx0ICovXHJcblx0cHVibGljIHNlYXJjaChxdWVyeTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCBzcGxpdCA9IHF1ZXJ5LnNwbGl0KCc6JywgMik7XHJcblx0XHRsZXQgcHJlZml4ID0gJ2lkJyxcclxuXHRcdFx0c2VhcmNoID0gcXVlcnk7XHJcblx0XHRpZiAoc3BsaXQubGVuZ3RoID09PSAyKSB7XHJcblx0XHRcdHByZWZpeCA9IHNwbGl0WzBdO1xyXG5cdFx0XHRzZWFyY2ggPSBzcGxpdFsxXS50cmltKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHRoZSBzZWFyY2ggcGFyYW1ldGVycy5cclxuXHRcdHRoaXMuc2VhcmNoRmlsdGVyID0gdGhpcy5wcmVwYXJlU2VhcmNoKHNlYXJjaCwgcHJlZml4KTtcclxuXHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBxdWVyeTtcclxuXHRcdHRoaXMuc2VhcmNoRXJyb3JRdWVyeS50ZXh0Q29udGVudCA9IHNlYXJjaDtcclxuXHJcblx0XHQvLyBSZWZyZXNoIHRoZSBkaXNwbGF5LlxyXG5cdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcmVwYXJlcyB0aGUgc2VhcmNoIGZpbHRlciBmdW5jdGlvbi5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkuXHJcblx0ICogQHBhcmFtIHF1ZXJ5UHJlZml4IFRoZSBxdWVyeSBwcmVmaXggKHR5cGUgb2YgcXVlcnkpLlxyXG5cdCAqXHJcblx0ICogQHJldHVybnMgVGhlIHNlYXJjaCBmaWx0ZXIgZnVuY3Rpb24uXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIHByZXBhcmVTZWFyY2gocXVlcnk6IHN0cmluZywgcXVlcnlQcmVmaXg6IHN0cmluZyk6IE1hbmFnZUNhbGxvdXRzUGFuZVsnc2VhcmNoRmlsdGVyJ10ge1xyXG5cdFx0Ly8gU2VhcmNoIGBpZDpgIC0tIFNlYXJjaCBieSBJRC5cclxuXHRcdGlmIChxdWVyeVByZWZpeCA9PT0gJ2lkJykge1xyXG5cdFx0XHRjb25zdCBmdXp6eSA9IHByZXBhcmVGdXp6eVNlYXJjaChxdWVyeS50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdFx0cmV0dXJuIChjYWxsb3V0KSA9PiBmdXp6eShjYWxsb3V0LmlkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZWFyY2ggYGljb246YCAtLSBTZWFyY2ggYnkgaWNvbi5cclxuXHRcdGlmIChxdWVyeVByZWZpeCA9PT0gJ2ljb24nKSB7XHJcblx0XHRcdGNvbnN0IGZ1enp5ID0gcHJlcGFyZUZ1enp5U2VhcmNoKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpO1xyXG5cdFx0XHRyZXR1cm4gKGNhbGxvdXQpID0+IGZ1enp5KGNhbGxvdXQuaWNvbi50b0xvd2VyQ2FzZSgpKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZWFyY2ggYGZyb206YCAtLSBTZWFyY2ggYnkgc291cmNlLlxyXG5cdFx0aWYgKHF1ZXJ5UHJlZml4ID09PSAnZnJvbScpIHtcclxuXHRcdFx0Y29uc3QgcXVlcnlMQyA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGNvbnN0IHF1ZXJ5SXNCdWlsdGluID0gcXVlcnlMQyA9PT0gJ29ic2lkaWFuJyB8fCBxdWVyeUxDID09PSAnYnVpbHRpbicgfHwgcXVlcnlMQyA9PT0gJ2J1aWx0LWluJztcclxuXHRcdFx0Y29uc3QgZnV6enkgPSBwcmVwYXJlRnV6enlTZWFyY2gocXVlcnlMQyk7XHJcblxyXG5cdFx0XHRjb25zdCBoYXNTbmlwcGV0V2l0aFF1ZXJ5QXNJZCA9XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uY2FsbG91dHMuc25pcHBldHMua2V5cygpLmZpbmQoKGlkKSA9PiBpZC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeUxDKSAhPT0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0cmV0dXJuIChjYWxsb3V0KSA9PiB7XHJcblx0XHRcdFx0bGV0IHJlc3VsdCA9IG51bGw7XHJcblx0XHRcdFx0aWYgKHF1ZXJ5ID09PSAnJykgcmV0dXJuIHsgbWF0Y2hlczogW10sIHNjb3JlOiAwIH07XHJcblxyXG5cdFx0XHRcdGZvciAoY29uc3Qgc291cmNlIG9mIGNhbGxvdXQuc291cmNlcykge1xyXG5cdFx0XHRcdFx0Ly8gU3BlY2lhbCBjYXNlOiBhbiBleGFjdCBtYXRjaCBvbiB0aGUgc25pcHBldCBJRC5cclxuXHRcdFx0XHRcdGlmIChoYXNTbmlwcGV0V2l0aFF1ZXJ5QXNJZCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoc291cmNlLnR5cGUgPT09ICdzbmlwcGV0JyAmJiBzb3VyY2Uuc25pcHBldC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeUxDKVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiB7IG1hdGNoZXM6IFtdLCBzY29yZTogLTEgfTtcclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gR2VuZXJhbCBjYXNlczpcclxuXHRcdFx0XHRcdHN3aXRjaCAoc291cmNlLnR5cGUpIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSAnYnVpbHRpbic6XHJcblx0XHRcdFx0XHRcdFx0aWYgKHF1ZXJ5SXNCdWlsdGluKSByZXR1cm4geyBtYXRjaGVzOiBbXSwgc2NvcmU6IC0xIH07XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0XHRjYXNlICdjdXN0b20nOlxyXG5cdFx0XHRcdFx0XHRcdGlmIChxdWVyeUxDID09PSAnY3VzdG9tJykgcmV0dXJuIHsgbWF0Y2hlczogW10sIHNjb3JlOiAtMSB9O1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRcdFx0Y2FzZSAndGhlbWUnOlxyXG5cdFx0XHRcdFx0XHRcdGlmIChxdWVyeUxDID09PSAndGhlbWUnKSByZXR1cm4geyBtYXRjaGVzOiBbXSwgc2NvcmU6IC0xIH07XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdFx0XHRjYXNlICdzbmlwcGV0Jzoge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNuaXBwZXRMQyA9IHNvdXJjZS5zbmlwcGV0LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHNuaXBwZXRMQyA9PT0gcXVlcnlMQykgcmV0dXJuIHsgbWF0Y2hlczogW10sIHNjb3JlOiAtMSB9O1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBUcnkgbWF0Y2hpbmcgZnV6emlseSBvbiB0aGUgc25pcHBldCBuYW1lLlxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZ1enppbHkgPSBmdXp6eShzbmlwcGV0TEMpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmdXp6aWx5ICE9IG51bGwgJiYgKHJlc3VsdCA9PSBudWxsIHx8IGZ1enppbHkuc2NvcmUgPCByZXN1bHQuc2NvcmUpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQgPSBmdXp6aWx5O1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVbmtub3duIHByZWZpeC5cclxuXHRcdHJldHVybiAoKSA9PiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmlsdGVyIGFuZCBzb3J0IGNhbGxvdXQgcHJldmlld3MgYmFzZWQgb24gdGhlIGZ1enp5IHNlYXJjaCBxdWVyeS5cclxuXHQgKiBJZiB0aGVyZSBpcyBubyBzZWFyY2ggcXVlcnksIHByZXZpZXdzIHdpbGwgYmUgc29ydGVkIGJhc2VkIG9uIGNvbG9yLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHByZXZpZXdzIFRoZSBwcmV2aWV3cyB0byBmaWx0ZXIgYW5kIHNvcnQuXHJcblx0ICogQHJldHVybnMgVGhlIGZpbHRlcmVkIGFuZCBzb3J0ZWQgcHJldmlld3MuXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIGZpbHRlckFuZFNvcnQocHJldmlld3M6IENhbGxvdXRGb3JTZWFyY2hbXSk6IENhbGxvdXRGb3JTZWFyY2hbXSB7XHJcblx0XHRjb25zdCB7IHNlYXJjaEZpbHRlciB9ID0gdGhpcztcclxuXHRcdGlmIChzZWFyY2hGaWx0ZXIgPT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm4gcHJldmlld3Muc29ydChjb21wYXJlUHJldmlld0J5Q29sb3IpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZpbHRlciBvdXQgdGhlIHByZXZpZXdzIHRoYXQgZG9uJ3QgbWF0Y2ggdGhlIHNlYXJjaCBxdWVyeS5cclxuXHRcdGNvbnN0IGZpbHRlck1hcHBlZDogQXJyYXk8W0NhbGxvdXRGb3JTZWFyY2gsIFNlYXJjaFJlc3VsdF0+ID0gW107XHJcblx0XHRmb3IgKGNvbnN0IHByZXZpZXcgb2YgcHJldmlld3MpIHtcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gc2VhcmNoRmlsdGVyKHByZXZpZXcpO1xyXG5cdFx0XHRpZiAocmVzdWx0ICE9IG51bGwpIHtcclxuXHRcdFx0XHRmaWx0ZXJNYXBwZWQucHVzaChbcHJldmlldywgcmVzdWx0XSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTb3J0IHRoZSBwcmV2aWV3cy5cclxuXHRcdGZpbHRlck1hcHBlZC5zb3J0KChbYVByZXZpZXcsIGFSZXN1bHRzXSwgW2JQcmV2aWV3LCBiUmVzdWx0c10pID0+IHtcclxuXHRcdFx0Y29uc3Qgc2NvcmVEaWZmID0gYlJlc3VsdHMuc2NvcmUgLSBhUmVzdWx0cy5zY29yZTtcclxuXHRcdFx0aWYgKHNjb3JlRGlmZiAhPSAwKSByZXR1cm4gc2NvcmVEaWZmO1xyXG5cdFx0XHRyZXR1cm4gY29tcGFyZVByZXZpZXdCeUNvbG9yKGFQcmV2aWV3LCBiUHJldmlldyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZXR1cm4gdGhlIHByZXZpZXdzLlxyXG5cdFx0cmV0dXJuIGZpbHRlck1hcHBlZC5tYXAoKFtwcmV2aWV3LCBfXSkgPT4gcHJldmlldyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRoZSBjYWxsb3V0IHByZXZpZXdzLlxyXG5cdCAqIFRoaXMgcmVnZW5lcmF0ZXMgdGhlIHByZXZpZXdzIGFuZCB0aGVpciBtZXRhZGF0YSBmcm9tIHRoZSBsaXN0IG9mIGNhbGxvdXRzIGtub3duIHRvIHRoZSBwbHVnaW4uXHJcblx0ICovXHJcblx0cHJvdGVjdGVkIHJlZnJlc2hQcmV2aWV3cygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGVkaXRCdXR0b25Db250ZW50ID1cclxuXHRcdFx0KHRoaXMudmlld09ubHkgPyBnZXRJY29uKCdsdWNpZGUtdmlldycpIDogZ2V0SWNvbignbHVjaWRlLWVkaXQnKSkgPz9cclxuXHRcdFx0ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0VkaXQgQ2FsbG91dCcpO1xyXG5cclxuXHRcdGNvbnN0IGluc2VydEJ1dHRvbkNvbnRlbnQgPVxyXG5cdFx0XHQodGhpcy52aWV3T25seSA/IGdldEljb24oJ2x1Y2lkZS12aWV3JykgOiBnZXRJY29uKCdsdWNpZGUtZm9yd2FyZCcpKSA/P1xyXG5cdFx0XHRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnSW5zZXJ0IENhbGxvdXQnKTtcclxuXHJcblx0XHRjb25zdCBlZGl0QnV0dG9uSGFuZGxlciA9IChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0bGV0IGlkID0gbnVsbDtcclxuXHRcdFx0Zm9yIChsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldE5vZGU7IHRhcmdldCAhPSBudWxsICYmIGlkID09IG51bGw7IHRhcmdldCA9IHRhcmdldD8ucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdGlmICh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRpZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dC1tYW5hZ2VyLWNhbGxvdXQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChpZCAhPSBudWxsKSB7XHJcblx0XHRcdFx0dGhpcy5uYXYub3BlbihuZXcgRWRpdENhbGxvdXRQYW5lKHRoaXMucGx1Z2luLCBpZCwgdGhpcy52aWV3T25seSkpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IGluc2VydEJ1dHRvbkhhbmRsZXIgPSAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdGxldCBpZCA9IG51bGw7XHJcblx0XHRcdGZvciAobGV0IHRhcmdldCA9IGV2dC50YXJnZXROb2RlOyB0YXJnZXQgIT0gbnVsbCAmJiBpZCA9PSBudWxsOyB0YXJnZXQgPSB0YXJnZXQ/LnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRpZiAodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0aWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtbWFuYWdlci1jYWxsb3V0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzZWxlY3RlZCBjYWxsb3V0LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyBlZGl0aW5nIGEgTWFya2Rvd24gZmlsZS5cclxuICAgICAgICAgICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gdmlldy5lZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbnNlcnRpbmdcIiwgaWQsIGN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlldy5lZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgPiBbISR7aWR9XVxcbj4gQ29udGVudHNgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgdmlldy5lZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvci5saW5lICsgMSwgMTApXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VTZXR0aW5ncyhhcHApXHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gR2VuZXJhdGUgdGhlIGNhY2hlIG9mIHByZXZpZXcgaXRlbXMuXHJcblx0XHR0aGlzLnByZXZpZXdDYWNoZSA9IFtdO1xyXG5cdFx0Zm9yIChjb25zdCBjYWxsb3V0IG9mIHRoaXMucGx1Z2luLmNhbGxvdXRzLnZhbHVlcygpKSB7XHJcblx0XHRcdGNvbnN0IGNhbGxvdXRDb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRjYWxsb3V0Q29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZCgnY2FsbG91dG1hbmFnZXItcHJldmlldy1jb250YWluZXInKTtcclxuXHRcdFx0Y2FsbG91dENvbnRhaW5lckVsLnNldEF0dHJpYnV0ZSgnZGF0YS1jYWxsb3V0LW1hbmFnZXItY2FsbG91dCcsIGNhbGxvdXQuaWQpO1xyXG5cclxuXHRcdFx0Ly8gQWRkIHRoZSBwcmV2aWV3LlxyXG5cdFx0XHR0aGlzLnByZXZpZXdDYWNoZS5wdXNoKGNyZWF0ZVByZXZpZXcoY2FsbG91dCwgY2FsbG91dENvbnRhaW5lckVsKSk7XHJcblxyXG5cdFx0XHQvLyBBZGQgdGhlIGVkaXQgYnV0dG9uIHRvIHRoZSBjb250YWluZXIuXHJcblx0XHRcdGNhbGxvdXRDb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKCdjYWxsb3V0bWFuYWdlci1wcmV2aWV3LWNvbnRhaW5lci13aXRoLWJ1dHRvbicpO1xyXG5cclxuXHRcdFx0Y29uc3QgZWRpdEJ1dHRvbiA9IGNhbGxvdXRDb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRcdGVkaXRCdXR0b24uYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbkNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuXHRcdFx0ZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRCdXR0b25IYW5kbGVyKTtcclxuXHJcblx0XHRcdGNvbnN0IGluc2VydEJ1dHRvbiA9IGNhbGxvdXRDb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRcdGluc2VydEJ1dHRvbi5hcHBlbmRDaGlsZChpbnNlcnRCdXR0b25Db250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcblx0XHRcdGluc2VydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGluc2VydEJ1dHRvbkhhbmRsZXIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqIEBvdmVycmlkZSAqL1xyXG5cdHB1YmxpYyBkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHByZXZpZXdzID0gdGhpcy5maWx0ZXJBbmRTb3J0KHRoaXMucHJldmlld0NhY2hlKTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgY29udGFpbmVyIGFuZCByZS1yZW5kZXIuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Zm9yIChjb25zdCBwcmV2aWV3IG9mIHByZXZpZXdzKSB7XHJcblx0XHRcdGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKHByZXZpZXcuY2FsbG91dENvbnRhaW5lckVsKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBubyBwcmV2aWV3cywgcHJpbnQgaGVscC5cclxuXHRcdGlmIChwcmV2aWV3cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0Y29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy5zZWFyY2hFcnJvckRpdik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiogQG92ZXJyaWRlICovXHJcblx0cHVibGljIGRpc3BsYXlDb250cm9scygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udHJvbHNFbCB9ID0gdGhpcztcclxuXHJcblx0XHRuZXcgVGV4dENvbXBvbmVudChjb250cm9sc0VsKVxyXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5zZWFyY2hRdWVyeSlcclxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdGaWx0ZXIgY2FsbG91dHMuLi4nKVxyXG5cdFx0XHQub25DaGFuZ2UodGhpcy5zZWFyY2guYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnZpZXdPbmx5KSB7XHJcblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbHNFbClcclxuXHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXBsdXMnKVxyXG5cdFx0XHRcdC5zZXRUb29sdGlwKCdOZXcgQ2FsbG91dCcpXHJcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5uYXYub3BlbihuZXcgQ3JlYXRlQ2FsbG91dFBhbmUodGhpcy5wbHVnaW4pKSlcclxuXHRcdFx0XHQudGhlbigoeyBidXR0b25FbCB9KSA9PiBidXR0b25FbC5jbGFzc0xpc3QuYWRkKCdjbGlja2FibGUtaWNvbicpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwcm90ZWN0ZWQgcmVzdG9yZVN0YXRlKHN0YXRlOiB1bmtub3duKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlZnJlc2hQcmV2aWV3cygpO1xyXG5cdH1cclxuXHJcblx0LyoqIEBvdmVycmlkZSAqL1xyXG5cdHByb3RlY3RlZCBvblJlYWR5KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZWZyZXNoUHJldmlld3MoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHtAbGluayBDYWxsb3V0UHJldmlld30gd2l0aCBhdHRhY2hlZCBtZXRhZGF0YSB0byBtYWtlIGl0IGVhc2llciB0byBmaWx0ZXIgYW5kIHNlYXJjaC5cclxuICovXHJcbmludGVyZmFjZSBDYWxsb3V0Rm9yU2VhcmNoIHtcclxuXHRpY29uOiBzdHJpbmc7XHJcblx0aWQ6IHN0cmluZztcclxuXHRzb3VyY2VzOiBDYWxsb3V0Wydzb3VyY2VzJ107XHJcblx0Y2FsbG91dENvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRjb2xvclZhbGlkOiBib29sZWFuO1xyXG5cdGNvbG9ySHVlOiBudW1iZXI7XHJcblx0cHJldmlldzogQ2FsbG91dFByZXZpZXdDb21wb25lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByZXZpZXcoY2FsbG91dDogQ2FsbG91dCwgY2FsbG91dENvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IENhbGxvdXRGb3JTZWFyY2gge1xyXG5cdGNvbnN0IHsgaWNvbiwgaWQgfSA9IGNhbGxvdXQ7XHJcblx0Y29uc3QgY29sb3IgPSBnZXRDb2xvckZyb21DYWxsb3V0KGNhbGxvdXQpO1xyXG5cdHJldHVybiB7XHJcblx0XHRzb3VyY2VzOiBjYWxsb3V0LnNvdXJjZXMsXHJcblx0XHRpY29uLFxyXG5cdFx0aWQsXHJcblx0XHRjYWxsb3V0Q29udGFpbmVyRWwsXHJcblx0XHRjb2xvclZhbGlkOiBjb2xvciAhPSBudWxsLFxyXG5cdFx0Y29sb3JIdWU6IGNvbG9yID09IG51bGwgPyAwIDogdG9IU1YoY29sb3IpLmgsXHJcblx0XHRwcmV2aWV3OiBuZXcgQ2FsbG91dFByZXZpZXdDb21wb25lbnQoY2FsbG91dENvbnRhaW5lckVsLCB7XHJcblx0XHRcdGlkLFxyXG5cdFx0XHRpY29uLFxyXG5cdFx0XHR0aXRsZTogZ2V0VGl0bGVGcm9tQ2FsbG91dChjYWxsb3V0KSxcclxuXHRcdFx0Y29sb3I6IGNvbG9yID8/IHVuZGVmaW5lZCxcclxuXHRcdH0pLFxyXG5cdH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21wYXJlcyB0d28gY2FsbG91dCBwcmV2aWV3cyBieSB0aGVpciBodWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBhIFRoZSBmaXJzdCBwcmV2aWV3LlxyXG4gKiBAcGFyYW0gYiBUaGUgc2Vjb25kIHByZXZpZXcuXHJcbiAqIEByZXR1cm5zIGAtMWAgaWYgdGhlIGEgaGFzIGEgbG93ZXIgaHVlLCBgMGAgaWYgdGhleSBhcmUgdGhlIHNhbWUsIG9yIGAxYCBpZiBhIGhhcyBhIGhpZ2hlciBodWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wYXJlUHJldmlld0J5Q29sb3IoYTogQ2FsbG91dEZvclNlYXJjaCwgYjogQ2FsbG91dEZvclNlYXJjaCk6IG51bWJlciB7XHJcblx0aWYgKGEuY29sb3JWYWxpZCAmJiAhYi5jb2xvclZhbGlkKSByZXR1cm4gLTE7XHJcblx0aWYgKGIuY29sb3JWYWxpZCAmJiAhYS5jb2xvclZhbGlkKSByZXR1cm4gMTtcclxuXHRyZXR1cm4gYS5jb2xvckh1ZSAtIGIuY29sb3JIdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgZGl2IHRoYXQgY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgdXNlciB3aHkgdGhlIHNlYXJjaCBxdWVyeSBmYWlsZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVFbXB0eVNlYXJjaFJlc3VsdERpdigpOiB7IHNlYXJjaEVycm9yRGl2OiBIVE1MRWxlbWVudDsgc2VhcmNoRXJyb3JRdWVyeTogSFRNTEVsZW1lbnQgfSB7XHJcblx0bGV0IHNlYXJjaEVycm9yUXVlcnkhOiBIVE1MRWxlbWVudDtcclxuXHRjb25zdCBzZWFyY2hFcnJvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdHNlYXJjaEVycm9yRGl2LmNsYXNzTmFtZSA9ICdjYWxsb3V0bWFuYWdlci1jZW50ZXJib3gnO1xyXG5cdGNvbnN0IGNvbnRlbnRFbCA9IHNlYXJjaEVycm9yRGl2LmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNlYXJjaC1lcnJvcicgfSk7XHJcblxyXG5cdC8vIFRpdGxlLlxyXG5cdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdObyBjYWxsb3V0cyBmb3VuZC4nIH0pO1xyXG5cclxuXHQvLyBFcnJvciBtZXNzYWdlLlxyXG5cdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHVuZGVmaW5lZCwgKGVsKSA9PiB7XHJcblx0XHRlbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1lvdXIgc2VhcmNoIHF1ZXJ5ICcgfSk7XHJcblx0XHRzZWFyY2hFcnJvclF1ZXJ5ID0gZWwuY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6ICcnIH0pO1xyXG5cdFx0ZWwuY3JlYXRlU3Bhbih7IHRleHQ6ICcgZGlkIG5vdCByZXR1cm4gYW55IHJlc3VsdHMuJyB9KTtcclxuXHR9KTtcclxuXHJcblx0Ly8gU3VnZ2VzdGlvbnMuXHJcblx0Y29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNlYXJjaC1lcnJvci1zdWdnZXN0aW9ucycgfSwgKGVsKSA9PiB7XHJcblx0XHRlbC5jcmVhdGVEaXYoeyB0ZXh0OiAnVHJ5IHNlYXJjaGluZzonIH0pO1xyXG5cdFx0ZWwuY3JlYXRlRWwoJ3VsJywgdW5kZWZpbmVkLCAoZWwpID0+IHtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnQnkgbmFtZTogJyB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ3dhcm5pbmcnIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnQnkgaWNvbjogJyB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ2ljb246Y2hlY2snIH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnQnVpbHQtaW4gY2FsbG91dHM6ICcgfSwgKGVsKSA9PiB7XHJcblx0XHRcdFx0ZWwuY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6ICdmcm9tOm9ic2lkaWFuJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1RoZW1lIGNhbGxvdXRzOiAnIH0sIChlbCkgPT4ge1xyXG5cdFx0XHRcdGVsLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiAnZnJvbTp0aGVtZScgfSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdTbmlwcGV0IGNhbGxvdXRzOiAnIH0sIChlbCkgPT4ge1xyXG5cdFx0XHRcdGVsLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiAnZnJvbTpteSBzbmlwcGV0JyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ0N1c3RvbSBjYWxsb3V0czogJyB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVFbCgnY29kZScsIHsgdGV4dDogJ2Zyb206Y3VzdG9tJyB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIHsgc2VhcmNoRXJyb3JEaXYsIHNlYXJjaEVycm9yUXVlcnkgfTtcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIFN0eWxlczpcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZWFyY2gtZXJyb3Ige1xyXG5cdFx0d2lkdGg6IDYwJTtcclxuXHJcblx0XHRib2R5LmlzLXBob25lICYge1xyXG5cdFx0XHR3aWR0aDogMTAwJTtcclxuXHRcdH1cclxuXHJcblx0XHRjb2RlIHtcclxuXHRcdFx0d29yZC1icmVhazogYnJlYWstYWxsO1xyXG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNlYXJjaC1lcnJvci1zdWdnZXN0aW9ucyB7XHJcblx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItcHJldmlldy1jb250YWluZXItd2l0aC1idXR0b24ge1xyXG5cdFx0LS1jYWxsb3V0bWFuYWdlci1jYWxsb3V0LWVkaXQtYnV0dG9ucy1zaXplOiBjYWxjKHZhcigtLWlucHV0LWhlaWdodCkgKyAyICogdmFyKC0tc2l6ZS00LTMpKTtcclxuXHRcdGJvZHkuaXMtcGhvbmUgJiB7XHJcblx0XHRcdC0tY2FsbG91dG1hbmFnZXItY2FsbG91dC1lZGl0LWJ1dHRvbnMtc2l6ZTogdmFyKC0taW5wdXQtaGVpZ2h0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDb252ZXIgdGhlIHByZXZpZXcgaW50byBhIGdyaWQuXHJcblx0XHRkaXNwbGF5OiBncmlkO1xyXG5cdFx0Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgdmFyKC0tY2FsbG91dG1hbmFnZXItY2FsbG91dC1lZGl0LWJ1dHRvbnMtc2l6ZSk7XHJcblxyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdGdhcDogdmFyKC0tc2l6ZS00LTIpO1xyXG5cclxuXHRcdC8vIEVuc3VyZSB0aGUgYnV0dG9uIGhhcyBhIHNtYWxsIHdpZHRoLCBidXQgY2FuIGdyb3cgdGFsbC5cclxuXHRcdD4gYnV0dG9uIHtcclxuXHRcdFx0d2lkdGg6IHZhcigtLWNhbGxvdXRtYW5hZ2VyLWNhbGxvdXQtZWRpdC1idXR0b25zLXNpemUpO1xyXG5cdFx0XHRoZWlnaHQ6IDEwMCU7XHJcblxyXG5cdFx0XHQvLyBGaXggcmVuZGVyaW5nIG5vdCB3b3JraW5nIG9uIG5vbi1waG9uZSBkZXZpY2VzLlxyXG5cdFx0XHRib2R5Om5vdCguaXMtcGhvbmUpICYge1xyXG5cdFx0XHRcdGRpc3BsYXk6IGJsb2NrO1xyXG5cdFx0XHRcdHBhZGRpbmc6IDAgIWltcG9ydGFudDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuYDtcclxuIiwiaW1wb3J0IHsgZ2V0Q3VycmVudENvbG9yU2NoZW1lIH0gZnJvbSAnb2JzaWRpYW4tZXh0cmEnO1xyXG5cclxuaW1wb3J0IHsgUkdCLCBwYXJzZUNvbG9yUkdCIH0gZnJvbSAnJmNvbG9yJztcclxuXHJcbmltcG9ydCB7IElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQgfSBmcm9tICcmdWkvY29tcG9uZW50L2NhbGxvdXQtcHJldmlldyc7XHJcblxyXG5pbXBvcnQgeyBDYWxsb3V0LCBDYWxsb3V0SUQgfSBmcm9tICcuLi9hcGknO1xyXG5cclxuLyoqXHJcbiAqIEEgY2xhc3MgdGhhdCBmZXRjaGVzIHN0eWxlIGluZm9ybWF0aW9uIGZvciBjYWxsb3V0cy5cclxuICogVGhpcyBrZWVwcyBhIFNoYWRvdyBET00gd2l0aGluIHRoZSBwYWdlIGRvY3VtZW50IGFuZCB1c2VzIGdldENvbXB1dGVkU3R5bGVzIHRvIGdldCBDU1MgdmFyaWFibGVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENhbGxvdXRSZXNvbHZlciB7XHJcblx0cHJpdmF0ZSByZWFkb25seSBob3N0RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSByZWFkb25seSBjYWxsb3V0UHJldmlldzogSXNvbGF0ZWRDYWxsb3V0UHJldmlld0NvbXBvbmVudDtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5ob3N0RWxlbWVudCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRGl2KHtcclxuXHRcdFx0Y2xzOiAnY2FsbG91dG1hbmFnZXItY2FsbG91dC1yZXNvbHZlcicsXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmhvc3RFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XHJcblx0XHR0aGlzLmNhbGxvdXRQcmV2aWV3ID0gbmV3IElzb2xhdGVkQ2FsbG91dFByZXZpZXdDb21wb25lbnQodGhpcy5ob3N0RWxlbWVudCwge1xyXG5cdFx0XHRpZDogJycsXHJcblx0XHRcdGljb246ICcnLFxyXG5cdFx0XHRjb2xvclNjaGVtZTogJ2RhcmsnLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5jYWxsb3V0UHJldmlldy5yZXNldFN0eWxlUHJvcGVydHlPdmVycmlkZXMoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbG9hZHMgdGhlIHN0eWxlcyBvZiB0aGUgY2FsbG91dCByZXNvbHZlci5cclxuXHQgKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBnZXQgdXAtdG8tZGF0ZSBzdHlsZXMgd2hlbiB0aGUgYXBwbGljYXRpb24gQ1NTIGNoYW5nZXMuXHJcblx0ICpcclxuXHQgKiBOb3RlOiBUaGlzIHdpbGwgbm90IHJlbG9hZCB0aGUgT2JzaWRpYW4gYXBwLmNzcyBzdHlsZXNoZWV0LlxyXG5cdCAqIEBwYXJhbSBzdHlsZXMgVGhlIG5ldyBzdHlsZSBlbGVtZW50cyB0byB1c2UuXHJcblx0ICovXHJcblx0cHVibGljIHJlbG9hZFN0eWxlcygpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2FsbG91dFByZXZpZXcuc2V0Q29sb3JTY2hlbWUoZ2V0Q3VycmVudENvbG9yU2NoZW1lKGFwcCkpO1xyXG5cdFx0dGhpcy5jYWxsb3V0UHJldmlldy51cGRhdGVTdHlsZXMoKTtcclxuXHRcdHRoaXMuY2FsbG91dFByZXZpZXcucmVtb3ZlU3R5bGVzKChlbCkgPT4gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtbWFuYWdlcicpID09PSAnc3R5bGUtb3ZlcnJpZGVzJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmVzIHRoZSBob3N0IGVsZW1lbnQuXHJcblx0ICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIHBsdWdpbiBpcyB1bmxvYWRpbmcuXHJcblx0ICovXHJcblx0cHVibGljIHVubG9hZCgpIHtcclxuXHRcdHRoaXMuaG9zdEVsZW1lbnQucmVtb3ZlKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBjb21wdXRlZCBzdHlsZXMgZm9yIGEgZ2l2ZW4gdHlwZSBvZiBjYWxsb3V0LlxyXG5cdCAqIFRoaXMgdXNlcyB0aGUgY3VycmVudCBPYnNpZGlhbiBzdHlsZXMsIHRoZW1lcywgYW5kIHNuaXBwZXRzLlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGlkIFRoZSBjYWxsb3V0IElELlxyXG5cdCAqIEBwYXJhbSBjYWxsYmFjayBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJ1bi4gVGhlIHN0eWxlcyBtYXkgb25seSBiZSBhY2Nlc3NlZCB0aHJvdWdoIHRoaXMuXHJcblx0ICogQHJldHVybnMgV2hhdGV2ZXIgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHJldHVybmVkLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXRDYWxsb3V0U3R5bGVzPFQ+KGlkOiBDYWxsb3V0SUQsIGNhbGxiYWNrOiAoc3R5bGVzOiBDU1NTdHlsZURlY2xhcmF0aW9uKSA9PiBUKTogVCB7XHJcblx0XHRjb25zdCB7IGNhbGxvdXRFbCB9ID0gdGhpcy5jYWxsb3V0UHJldmlldztcclxuXHRcdGNhbGxvdXRFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dCcsIGlkKTtcclxuXHJcblx0XHQvLyBSdW4gdGhlIGNhbGxiYWNrLlxyXG5cdFx0Ly8gICBXZSBuZWVkIHRvIHVzZSB0aGUgY2FsbGJhY2sgdG8gY3JlYXRlIHRoZSBmdWxsIHNldCBvZiBkZXNpcmVkIHJldHVybiBwcm9wZXJ0aWVzIGJlY2F1c2VcclxuXHRcdC8vICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBhbiBvYmplY3QgdGhhdCB3aWxsIHVwZGF0ZSBpdHNlbGYgYXV0b21hdGljYWxseS4gVGhlIG1vbWVudCB3ZVxyXG5cdFx0Ly8gICBjaGFuZ2UgdGhlIGhvc3QgZWxlbWVudCwgYWxsIHRoZSBzdHlsZXMgd2Ugd2FudCBmcm9tIGl0IHdpbGwgYmUgcmVtb3ZlZC5cclxuXHRcdHJldHVybiBjYWxsYmFjayh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYWxsb3V0RWwpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGljb24gYW5kIGNvbG9yIGZvciBhIGdpdmVuIHR5cGUgb2YgY2FsbG91dC5cclxuXHQgKiBUaGlzIHVzZXMgdGhlIGN1cnJlbnQgT2JzaWRpYW4gc3R5bGVzLCB0aGVtZXMsIGFuZCBzbmlwcGV0cy5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBpZCBUaGUgY2FsbG91dCBJRC5cclxuXHQgKiBAcmV0dXJucyBUaGUgY2FsbG91dCBpY29uIGFuZCBjb2xvci5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0Q2FsbG91dFByb3BlcnRpZXMoaWQ6IENhbGxvdXRJRCk6IHsgaWNvbjogc3RyaW5nOyBjb2xvcjogc3RyaW5nIH0ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q2FsbG91dFN0eWxlcyhpZCwgKHN0eWxlcykgPT4gKHtcclxuXHRcdFx0aWNvbjogc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJy0tY2FsbG91dC1pY29uJykudHJpbSgpLFxyXG5cdFx0XHRjb2xvcjogc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJy0tY2FsbG91dC1jb2xvcicpLnRyaW0oKSxcclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXQgY3VzdG9tU3R5bGVFbCgpOiBIVE1MU3R5bGVFbGVtZW50IHtcclxuXHRcdHJldHVybiB0aGlzLmNhbGxvdXRQcmV2aWV3LmN1c3RvbVN0eWxlRWwgYXMgSFRNTFN0eWxlRWxlbWVudDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBjb2xvciAoYXMgYSB7QGxpbmsgUkdCfSkgZnJvbSBhIHtAbGluayBDYWxsb3V0fS5cclxuICogVGhpcyB3aWxsIHRyeSB0byBkbyBiYXNpYyBwYXJzaW5nIG9uIHRoZSBjb2xvciBmaWVsZC5cclxuICpcclxuICogQHBhcmFtIGNhbGxvdXQgVGhlIGNhbGxvdXQuXHJcbiAqIEByZXR1cm5zIFRoZSBjYWxsb3V0J3MgY29sb3IsIG9yIG51bGwgaWYgbm90IHZhbGlkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9yRnJvbUNhbGxvdXQoY2FsbG91dDogQ2FsbG91dCk6IFJHQiB8IG51bGwge1xyXG5cdHJldHVybiBwYXJzZUNvbG9yUkdCKGByZ2IoJHtjYWxsb3V0LmNvbG9yfSlgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIHRpdGxlIG9mIGEgY2FsbG91dC5cclxuICpcclxuICogVGhpcyBzaG91bGQgYmUgdGhlIHNhbWUgYXMgd2hhdCBPYnNpZGlhbiBkaXNwbGF5cyB3aGVuIGEgY2FsbG91dCBibG9jayBkb2VzIG5vdCBoYXZlIGEgdXNlci1zcGVjaWZpZWQgdGl0bGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBjYWxsb3V0IFRoZSBjYWxsb3V0LlxyXG4gKiBAcmV0dXJucyBUaGUgY2FsbG91dCdzIHRpdGxlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpdGxlRnJvbUNhbGxvdXQoY2FsbG91dDogQ2FsbG91dCk6IHN0cmluZyB7XHJcblx0Y29uc3QgbWF0Y2hlcyA9IC9eKC4pKC4qKS91LmV4ZWMoY2FsbG91dC5pZCk7XHJcblx0aWYgKG1hdGNoZXMgPT0gbnVsbCkgcmV0dXJuIGNhbGxvdXQuaWQ7XHJcblxyXG5cdGNvbnN0IGZpcnN0Q2hhciA9IG1hdGNoZXNbMV0udG9Mb2NhbGVVcHBlckNhc2UoKTtcclxuXHRjb25zdCByZW1haW5pbmdDaGFycyA9IG1hdGNoZXNbMl0udG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC8tKy9nLCBcIiBcIik7XHJcblxyXG5cdHJldHVybiBgJHtmaXJzdENoYXJ9JHtyZW1haW5pbmdDaGFyc31gO1xyXG59XHJcblxyXG5kZWNsYXJlIGNvbnN0IFNUWUxFUzogYFxyXG5cdC5jYWxsb3V0bWFuYWdlci1jYWxsb3V0LXJlc29sdmVyIHtcclxuXHRcdGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxuXHR9XHJcbmA7XHJcbiIsImltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IG9wZW5QbHVnaW5TZXR0aW5ncyB9IGZyb20gJ29ic2lkaWFuLWV4dHJhJztcclxuaW1wb3J0IHsgY2xvc2VTZXR0aW5ncyB9IGZyb20gJ29ic2lkaWFuLWV4dHJhL3Vuc2FmZSc7XHJcblxyXG5pbXBvcnQgQ2FsbG91dE1hbmFnZXJQbHVnaW4gZnJvbSAnJnBsdWdpbic7XHJcblxyXG5pbXBvcnQgeyBVSVBhbmUgfSBmcm9tICcuL3BhbmUnO1xyXG5pbXBvcnQgeyBVSVBhbmVMYXllcnMgfSBmcm9tICcuL3BhbmUtbGF5ZXJzJztcclxuXHJcbi8qKlxyXG4gKiBUaGUgc2V0dGluZ3MgdGFiIChVSSkgdGhhdCB3aWxsIHNob3cgdXAgdW5kZXIgT2JzaWRpYW4ncyBzZXR0aW5ncy5cclxuICpcclxuICogVGhpcyBpbXBsZW1lbnRzIHN0YWNrZWQgbmF2aWdhdGlvbiwgd2hlcmUge0BsaW5rIFVJUGFuZX1zIG1heSBiZSBzdGFja2VkIG9uIHRvcCBvZiBlYWNob3RoZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVUlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cHJpdmF0ZSByZWFkb25seSBwbHVnaW46IENhbGxvdXRNYW5hZ2VyUGx1Z2luO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgbGF5ZXJzOiBVSVBhbmVMYXllcnM7XHJcblx0cHJpdmF0ZSByZWFkb25seSBjcmVhdGVEZWZhdWx0OiAoKSA9PiBVSVBhbmU7XHJcblxyXG5cdHByaXZhdGUgaW5pdExheWVyOiBVSVBhbmUgfCBudWxsO1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IocGx1Z2luOiBDYWxsb3V0TWFuYWdlclBsdWdpbiwgY3JlYXRlRGVmYXVsdDogKCkgPT4gVUlQYW5lKSB7XHJcblx0XHRzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmNyZWF0ZURlZmF1bHQgPSBjcmVhdGVEZWZhdWx0O1xyXG5cclxuXHRcdHRoaXMuaW5pdExheWVyID0gbnVsbDtcclxuXHRcdHRoaXMubGF5ZXJzID0gbmV3IFVJUGFuZUxheWVycyh7XHJcblx0XHRcdGNsb3NlOiAoKSA9PiBjbG9zZVNldHRpbmdzKHRoaXMuYXBwKSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIG9wZW5XaXRoUGFuZShwYW5lOiBVSVBhbmUpIHtcclxuXHRcdHRoaXMuaW5pdExheWVyID0gcGFuZTtcclxuXHRcdG9wZW5QbHVnaW5TZXR0aW5ncyh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAb3ZlcnJpZGUgKi9cclxuXHRwdWJsaWMgaGlkZSgpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5pdExheWVyID0gbnVsbDtcclxuXHRcdHRoaXMubGF5ZXJzLmNsZWFyKCk7XHJcblx0XHRzdXBlci5oaWRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwsIGxheWVycyB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgY29udGFpbmVyIGFuZCBjcmVhdGUgdGhlIGVsZW1lbnRzLlxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiJywgJ2NhbGxvdXRtYW5hZ2VyLXBhbmUnKTtcclxuXHJcblx0XHRjb25zdCBoZWFkZXJFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWhlYWRlcicgfSk7XHJcblx0XHRsYXllcnMubmF2RWwgPSBoZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi1uYXYnIH0pO1xyXG5cdFx0bGF5ZXJzLnRpdGxlRWwgPSBoZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdjYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi10aXRsZScgfSk7XHJcblxyXG5cdFx0Y29uc3QgY29udHJvbHNFbCA9IGhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRyb2xzJyB9KTtcclxuXHRcdGxheWVycy5jb250cm9sc0VsID0gY29udHJvbHNFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGxheWVycy5zY3JvbGxFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7XHJcblx0XHRcdGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLXZpZXdwb3J0IHZlcnRpY2FsLXRhYi1jb250ZW50JyxcclxuXHRcdH0pO1xyXG5cdFx0bGF5ZXJzLmNvbnRhaW5lckVsID0gbGF5ZXJzLnNjcm9sbEVsLmNyZWF0ZURpdih7IGNsczogJ2NhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRlbnQnIH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNsb3NlIGJ1dHRvbiwgc2luY2UgdGhlIG5hdGl2ZSBvbmUgaXMgY292ZXJlZC5cclxuXHRcdGNvbnRyb2xzRWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtY2xvc2UtYnV0dG9uJyB9LCAoY2xvc2VCdXR0b25FbCkgPT4ge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XHJcblx0XHRcdFx0aWYgKCFldi5pc1RydXN0ZWQpIHJldHVybjtcclxuXHRcdFx0XHRjbG9zZVNldHRpbmdzKHRoaXMuYXBwKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbGVhciB0aGUgbGF5ZXJzLlxyXG5cdFx0bGF5ZXJzLmNsZWFyKCk7XHJcblxyXG5cdFx0Ly8gUmVuZGVyIHRoZSB0b3AgbGF5ZXIgKG9yIHRoZSBkZWZhdWx0KS5cclxuXHRcdGNvbnN0IGluaXRMYXllciA9IHRoaXMuaW5pdExheWVyID8/IHRoaXMuY3JlYXRlRGVmYXVsdCgpO1xyXG5cdFx0dGhpcy5pbml0TGF5ZXIgPSBudWxsO1xyXG5cdFx0bGF5ZXJzLnRvcCA9IGluaXRMYXllcjtcclxuXHR9XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBTdHlsZXM6XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZGVjbGFyZSBjb25zdCBTVFlMRVM6IGBcclxuXHQvLyBUaGUgc2V0dGluZyB0YWIgY29udGFpbmVyLlxyXG5cdC5tb2Qtc2lkZWJhci1sYXlvdXQgLmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLnZlcnRpY2FsLXRhYi1jb250ZW50IHtcclxuXHRcdHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuXHRcdHBhZGRpbmc6IDAgIWltcG9ydGFudDtcclxuXHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cclxuXHRcdC8vIFByZXZlbnQgc2Nyb2xsaW5nIG9uIHRoZSBwYXJlbnQgY29udGFpbmVyIHNvIHdlIGNhbiBoYXZlIGEgc3RpY2t5IGhlYWRlci5cclxuXHRcdG92ZXJmbG93LXk6IGluaXRpYWw7XHJcblxyXG5cdFx0Ly8gVmFyaWFibGVzLlxyXG5cdFx0JiB7XHJcblx0XHRcdC8vIFNldCBhIG1hcmdpbiB0aGF0IGFsbG93cyB0aGUgY29udHJvbHMgdG8gYmVjb21lIHBhZGRpbmcgaWYgdGhlcmUncyBub3RoaW5nIGluc2lkZSB0aGVtLlxyXG5cdFx0XHQtLWNtLXNldHRpbmctdGFiLWNvbnRyb2xzLW1hcmdpbjogY2FsYyh2YXIoLS1zaXplLTQtMTIpIC0gKHZhcigtLXNpemUtNC0yKSAtIHZhcigtLXNpemUtNC0xKSkpO1xyXG5cdFx0XHRib2R5LmlzLXBob25lICYge1xyXG5cdFx0XHRcdC0tY20tc2V0dGluZy10YWItY29udHJvbHMtbWFyZ2luOiB2YXIoLS1zaXplLTQtMik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRoZSBzZXR0aW5nIHRhYiBoZWFkZXIuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWhlYWRlciB7XHJcblx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcblx0XHQvLyBQYWRkaW5nIHRvIG1pbWljIHRoZSBzaXppbmcgb2YgdGhlICcudmVydGljYWwtdGFiLWNvbnRlbnQnXHJcblx0XHRwYWRkaW5nLXRvcDogdmFyKC0tc2l6ZS00LTEpO1xyXG5cdFx0cGFkZGluZy1ib3R0b206IHZhcigtLXNpemUtNC0xKTtcclxuXHRcdHBhZGRpbmctcmlnaHQ6IHZhcigtLXNpemUtNC0yKTtcclxuXHJcblx0XHQvLyBCb3R0b20gYm9yZGVyIHRvIHNlcGFyYXRlIHRoZSBoZWFkZXIgZnJvbSB0aGUgY29udGVudC5cclxuXHRcdGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcblxyXG5cdFx0Ly8gVXNlIHRoZSBiYWNrZ3JvdW5kIG9mIHRoZSBzaWRlYmFyLlxyXG5cdFx0YmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xyXG5cclxuXHRcdGJvZHkuaXMtcGhvbmUgJiB7XHJcblx0XHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBUaGUgc2V0dGluZyB0YWIgbmF2IHdpdGhpbiB0aGUgaGVhZGVyLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi1uYXYge1xyXG5cdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHJcblx0XHQvLyBFbnN1cmUgdGhlIG5hdiBpcyBhdCBsZWFzdCBhcyBiaWcgYXMgYSBidXR0b24uXHJcblx0XHRtaW4td2lkdGg6IHZhcigtLXNpemUtNC0xMik7XHJcblx0XHRtaW4taGVpZ2h0OiBjYWxjKHZhcigtLXNpemUtNC0yKSArIHZhcigtLWlucHV0LWhlaWdodCkpO1xyXG5cclxuXHRcdC8vIE92ZXJyaWRlIHRoZSBidXR0b24gcGFkZGluZy5cclxuXHRcdGJ1dHRvbiB7XHJcblx0XHRcdHBhZGRpbmc6IHZhcigtLXNpemUtNC0xKSB2YXIoLS1zaXplLTQtMik7XHJcblx0XHRcdGJveC1zaGFkb3c6IG5vbmU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVkdWNlIHBhZGRpbmcgZm9yIG1vYmlsZS5cclxuXHRcdGJvZHkuaXMtbW9iaWxlICYge1xyXG5cdFx0XHRwYWRkaW5nOiB2YXIoLS1zaXplLTQtMik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ym9keS5pcy1waG9uZSAmLFxyXG5cdFx0Ym9keS5pcy1waG9uZSAmIGJ1dHRvbiB7XHJcblx0XHRcdGhlaWdodDogMTAwJTtcclxuXHRcdFx0bWluLXdpZHRoOiB1bnNldDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRoZSBzZXR0aW5nIHRhYiBuYXYgd2l0aGluIHRoZSBoZWFkZXIuXHJcblx0LmNhbGxvdXRtYW5hZ2VyLXNldHRpbmctdGFiLWNvbnRyb2xzIHtcclxuXHRcdGZsZXg6IDMgMztcclxuXHJcblx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdGp1c3RpZnktY29udGVudDogZW5kO1xyXG5cdFx0Z2FwOiB2YXIoLS1zaXplLTQtMik7XHJcblxyXG5cdFx0cGFkZGluZy1sZWZ0OiB2YXIoLS1jbS1zZXR0aW5nLXRhYi1jb250cm9scy1tYXJnaW4pO1xyXG5cclxuXHRcdC8vIE1ha2UgdGhlIHJlYWwgY29udHJvbCBlbGVtZW50cyB0cmFuc3BhcmVudCB0byB0aGUgY29udGFpbmVyLlxyXG5cdFx0PiAqOm5vdCgubW9kYWwtY2xvc2UtYnV0dG9uKSB7XHJcblx0XHRcdGRpc3BsYXk6IGNvbnRlbnRzO1xyXG5cclxuXHRcdFx0PiBpbnB1dFt0eXBlPSd0ZXh0J10ge1xyXG5cdFx0XHRcdGZsZXg6IDEgMSBhdXRvO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItY29udHJvbHMgLm1vZGFsLWNsb3NlLWJ1dHRvbiB7XHJcblx0XHRmbGV4OiAwIDAgYXV0bztcclxuXHJcblx0XHRwb3NpdGlvbjogc3RhdGljO1xyXG5cdFx0bGVmdDogdW5zZXQ7XHJcblx0XHR0b3A6IDA7XHJcblx0XHRyaWdodDogMDtcclxuXHRcdGJvdHRvbTogMDtcclxuXHJcblx0XHRib2R5LmlzLXBob25lICYge1xyXG5cdFx0XHRkaXNwbGF5OiBub25lO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhlIHNldHRpbmcgdGFiIHRpdGxlIHdpdGhpbiB0aGUgaGVhZGVyLlxyXG5cdC5jYWxsb3V0bWFuYWdlci1zZXR0aW5nLXRhYi10aXRsZSB7XHJcblx0XHRmbGV4OiAxIDEgYXV0bztcclxuXHRcdGZsZXgtd3JhcDogbm93cmFwO1xyXG5cclxuXHRcdGgyLFxyXG5cdFx0aDMge1xyXG5cdFx0XHRtYXJnaW46IDA7XHJcblx0XHRcdHdvcmQtYnJlYWs6IGtlZXAtYWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGgzIHtcclxuXHRcdFx0Zm9udC1zaXplOiB2YXIoLS1mb250LXVpLXNtYWxsKTtcclxuXHRcdH1cclxuXHJcblx0XHRib2R5Om5vdCguaXMtcGhvbmUpICYgaDMge1xyXG5cdFx0XHRmb250LXNpemU6IDAuOGVtO1xyXG5cdFx0fVxyXG5cclxuXHRcdGJvZHkuaXMtcGhvbmUgJiBoMjpoYXMoKyBoMykge1xyXG5cdFx0XHRkaXNwbGF5OiBub25lO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhlIHNjcm9sbCBjb250YWluZXIgZm9yIHRoZSBzZXR0aW5nIHRhYi5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItdmlld3BvcnQge1xyXG5cdFx0ZmxleDogMSAyIGF1dG87XHJcblxyXG5cdFx0Ly8gRW5hYmxlIHNjcm9sbGluZy5cclxuXHRcdG92ZXJmbG93LXk6IGF1dG87XHJcblx0XHQtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XHJcblx0fVxyXG5cclxuXHQuY2FsbG91dG1hbmFnZXItc2V0dGluZy10YWItY29udGVudCB7XHJcblx0XHRmbGV4OiAxIDEgYXV0bztcclxuXHJcblx0XHRib2R5Om5vdCguaXMtcGhvbmUpIHtcclxuXHRcdFx0bWluLWhlaWdodDogMTAwJTtcclxuXHRcdH1cclxuXHR9XHJcbmA7XHJcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQVVzRkE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUdBOztBQUdBO0VBRUE7O0FBQ0E7RUFDQTs7O0FBTUE7RUFDQTtFQUNBO0VBR0E7RUFDQTtFQUNBO0VBR0E7RUFHQTs7QUFFQTtFQUNBOzs7QUFLQTtFQUNBO0VBQ0E7RUFDQTtFQUdBO0VBQ0E7O0FBR0E7RUFDQTtFQUNBOztBQUlBO0VBQ0E7O0FBR0E7RUFFQTtFQUNBOzs7QUFLQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFHQTtFQUNBOztBQUVBO0VBQ0E7OztBQUtBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0E7OztBQUtBO0VBQ0E7RUFDQTs7QUFFQTtBQUFBO0VBRUE7RUFDQTs7QUFHQTtFQUNBOztBQUdBO0VBQ0E7O0FBR0E7RUFDQTs7O0FBS0E7RUFDQTtFQUdBO0VBQ0E7OztBQUdBO0VBQ0E7O0FBRUE7RUFDQTs7O0FEMUdBO0VBQ0E7OztBRGdSQTtFQUNBOztBQUVBO0VBQ0E7O0FBR0E7RUFDQTtFQUNBOzs7QUFJQTtFQUNBOzs7QUFHQTtFQUNBO0VBTUE7RUFDQTtFQUVBO0VBQ0E7O0FBVEE7RUFDQTs7QUFXQTtFQUNBO0VBQ0E7O0FBR0E7RUFDQTtFQUNBOzs7QUQ1UUE7RUFDQTtFQUNBO0VBQ0E7OztBQUdBO0VBQ0E7O0FBQ0E7RUFDQTs7O0FBS0E7RUFDQTtFQUNBOztBQUdBO0VBQ0E7O0FBRUE7RUFDQTs7QUFTQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7O0FBSUE7RUFDQTs7O0FEOEtBO0VBQ0E7RUFDQTs7O0FBR0E7RUFDQTtFQUNBOzs7QUQ3U0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7OztBQU1BO0VBQ0E7RUFDQTs7QUFFQTtFQUNBO0VBQ0E7O0FBSUE7RUFDQTs7QUFJQTtFQUNBOztBQUlBO0VBQ0E7RUFDQTtFQUNBOztBQUlBO0VBQ0E7RUFDQTs7QUFDQTtFQUNBO0VBQ0E7OztBQVFBO0FBQUE7RUFDQTs7O0FBS0E7RUFDQTs7QURRQTtFQUNBO0VBQ0E7O0FBRUE7RUFDQTs7O0FBS0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUdBO0VBQ0E7RUFDQTtFQUNBOzs7QUR0RUE7RUFDQTs7O0FBR0E7RUFDQTs7O0FBR0E7RUFDQTs7O0FBR0E7QUFBQTtBQUFBO0VBR0E7OztBRDNHQTtFQUNBOzs7QUFJQTtFQUNBOztBQUVBO0VBQ0E7O0FBR0E7RUFDQTs7O0FEbUxBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQUdBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNBO0VBRUE7RUFDQTs7O0FEOUtBO0VBQ0E7RUFDQTs7O0FBR0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBOzs7QUFHQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7OztBQUdBO0VBQ0E7RUFDQTtFQUdBO0VBQ0E7RUFDQTtFQUVBIn0= */
